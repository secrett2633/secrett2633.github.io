<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <style> 
      ::-webkit-scrollbar{ 
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        width: 0px;
        background-color: #626262;
        /* border-radius: 5px; */
      }

      ::-webkit-scrollbar-thumb {
        width: 0px;
        background-color: #E2E2E2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        width: 10px;
        height: 20px;
        /* background-color: rgba(190, 190, 190, 0.2); */
        background-color: #A2A2A2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-track:hover {
        width: 10px;
        /* background-color: rgba(150, 150, 150, 0.1); */
        background-color: #626262;
        border-radius: 5px;
        /* background: transparent; */
        /* border-radius: 10px; */
      }

      ::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment {
          width:0px;
          height: 0px;
          /* background-color: rgb(14, 221, 24); */
          /* border-radius: 50%; */
      }
    </style>
    
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[Final] PEP 741 - Python Configuration C API | secrett2633</title>
<meta name="description" content="Python Enhancement Proposal 741: ‘Python Configuration C API’에 대한 한국어 번역입니다.">


  <meta name="author" content="secrett2633">
  
  <meta property="article:author" content="secrett2633">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="secrett2633's blog">
<meta property="og:title" content="[Final] PEP 741 - Python Configuration C API">
<meta property="og:url" content="http://localhost:4000/python/pep/741/">


  <meta property="og:description" content="Python Enhancement Proposal 741: ‘Python Configuration C API’에 대한 한국어 번역입니다.">







  <meta property="article:published_time" content="2025-09-27T13:32:38+09:00">



  <meta property="article:modified_time" content="2025-09-27T13:32:38+09:00">



  

  


<link rel="canonical" href="http://localhost:4000/python/pep/741/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "secrett2633",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="secrett2633's blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


    <link rel="icon" type="image/png" sizes="32x32" href="https://secrett2633.github.io/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://secrett2633.github.io/assets/images/favicon/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          secrett2633's blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://github.com/secrett2633">GitHub</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <!-- 2022.02.17 author content hidden -->
  <!-- <div class="author__content">
    
      <h3 class="author__name" itemprop="name">secrett2633</h3>
    
    
  </div> -->

  <div class="author__urls-wrapper">
    <!-- <button class="btn btn--inverse">Follow</button> -->
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <!-- title -->
              <span class="nav__sub-title">Backend</span>
              <hr>
        

        
        <ul>
          
            <li><a href="/backend/django/">Django</a></li>
          
            <li><a href="/backend/logging/">Logging</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <!-- title -->
              <span class="nav__sub-title">Python</span>
              <hr>
        

        
        <ul>
          
            <li><a href="/python/pep/">PEP</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <!-- title -->
              <span class="nav__sub-title">AI/ML</span>
              <hr>
        

        
        <ul>
          
            <li><a href="/ai/llm/">LLM</a></li>
          
            <li><a href="/ai/review/">Review</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <!-- title -->
              <span class="nav__sub-title">DevOps</span>
              <hr>
        

        
        <ul>
          
            <li><a href="/devops/nginx/">Nginx</a></li>
          
            <li><a href="/devops/docker/">Docker</a></li>
          
            <li><a href="/devops/safeline/">SafeLine</a></li>
          
            <li><a href="/devops/jenkins/">Jenkins</a></li>
          
            <li><a href="/devops/github-actions/">GitHub Actions</a></li>
          
            <li><a href="/devops/aws/">AWS</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <!-- title -->
              <span class="nav__sub-title">etc</span>
              <hr>
        

        
        <ul>
          
            <li><a href="/etc/me/">Me</a></li>
          
            <li><a href="/etc/chrome-extension/">Chrome Extension</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Final] PEP 741 - Python Configuration C API">
    <meta itemprop="description" content="Python Enhancement Proposal 741: ‘Python Configuration C API’에 대한 한국어 번역입니다.">
    <meta itemprop="datePublished" content="2025-09-27T13:32:38+09:00">
    <meta itemprop="dateModified" content="2025-09-27T13:32:38+09:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">[Final] PEP 741 - Python Configuration C API
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2025-09-27T13:32:38+09:00">September 27, 2025</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#개요">개요</a></li><li><a href="#pep-741--python-configuration-c-api">PEP 741 – Python Configuration C API</a><ul><li><a href="#요약-abstract">요약 (Abstract)</a></li><li><a href="#배경-rationale">배경 (Rationale)</a><ul><li><a href="#런타임-구성-가져오기">런타임 구성 가져오기</a></li><li><a href="#보안-수정-security-fix">보안 수정 (Security fix)</a></li><li><a href="#pypreconfig와-pyconfig-간의-중복">PyPreConfig와 PyConfig 간의 중복</a></li><li><a href="#python-임베딩-embedding-python">Python 임베딩 (Embedding Python)</a><ul><li><a href="#python을-임베딩하는-애플리케이션-applications-embedding-python">Python을 임베딩하는 애플리케이션 (Applications embedding Python)</a></li><li><a href="#python을-임베딩하는-라이브러리-libraries-embedding-python">Python을 임베딩하는 라이브러리 (Libraries embedding Python)</a></li><li><a href="#독립형-애플리케이션을-만드는-유틸리티-utilities-creating-standalone-applications">독립형 애플리케이션을 만드는 유틸리티 (Utilities creating standalone applications)</a></li></ul></li><li><a href="#런타임-구성-설정-set-the-runtime-configuration">런타임 구성 설정 (Set the runtime configuration)</a></li></ul></li><li><a href="#사양-specification">사양 (Specification)</a><ul><li><a href="#구성-생성-create-config">구성 생성 (Create config)</a></li><li><a href="#옵션-가져오기-get-options">옵션 가져오기 (Get Options)</a></li><li><a href="#옵션-설정-set-options">옵션 설정 (Set Options)</a></li><li><a href="#python-초기화-initialize-python">Python 초기화 (Initialize Python)</a></li><li><a href="#오류-처리-error-handling">오류 처리 (Error Handling)</a></li><li><a href="#런타임-구성-가져오기-및-설정-get-and-set-the-runtime-configuration">런타임 구성 가져오기 및 설정 (Get and Set the Runtime Configuration)</a></li><li><a href="#pyinitconfig-구조체">PyInitConfig 구조체</a></li><li><a href="#구성-옵션-configuration-options">구성 옵션 (Configuration Options)</a><ul><li><a href="#공개-구성-옵션-public-configuration-options">공개 구성 옵션 (Public configuration options)</a></li><li><a href="#읽기-전용-구성-옵션-read-only-configuration-options">읽기 전용 구성 옵션 (Read-only configuration options)</a></li></ul></li><li><a href="#안정성-stability">안정성 (Stability)</a></li><li><a href="#pypreconfig-및-pyconfig-api와의-상호작용-interaction-with-the-pypreconfig-and-pyconfig-apis">PyPreConfig 및 PyConfig API와의 상호작용 (Interaction with the PyPreConfig and PyConfig APIs)</a></li></ul></li><li><a href="#예시-examples">예시 (Examples)</a><ul><li><a href="#python-초기화-initialize-python-1">Python 초기화 (Initialize Python)</a></li><li><a href="#초기화-bytes_warning-옵션-증가-increase-initialization-bytes_warning-option">초기화 bytes_warning 옵션 증가 (Increase initialization bytes_warning option)</a></li><li><a href="#런타임-verbose-옵션-가져오기-get-the-runtime-verbose-option">런타임 verbose 옵션 가져오기 (Get the runtime verbose option)</a></li></ul></li><li><a href="#구현-implementation">구현 (Implementation)</a></li><li><a href="#하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</a></li><li><a href="#기각된-아이디어-rejected-ideas">기각된 아이디어 (Rejected Ideas)</a><ul><li><a href="#텍스트로서의-구성-configuration-as-text">텍스트로서의 구성 (Configuration as text)</a></li><li><a href="#정수로-옵션-참조-refer-to-an-option-with-an-integer">정수로 옵션 참조 (Refer to an option with an integer)</a></li><li><a href="#다단계-초기화-multi-phase-initialization-similar-to-pep-432">다단계 초기화 (Multi-phase initialization (similar to PEP 432))</a></li><li><a href="#로케일-인코딩-및-와이드-문자열-locale-encoding-and-wide-strings">로케일 인코딩 및 와이드 문자열 (Locale encoding and wide strings)</a></li></ul></li><li><a href="#논의-discussions">논의 (Discussions)</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <blockquote>
  <p><strong>원문 링크:</strong> <a href="https://peps.python.org/pep-0741/">PEP 741 - Python Configuration C API</a></p>

  <table>
    <tbody>
      <tr>
        <td><strong>상태:</strong> Final</td>
        <td><strong>유형:</strong> Standards Track</td>
        <td><strong>작성일:</strong> 18-Jan-2024</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<p>PEP 741 – Python Configuration C API 번역 및 정리</p>

<h2 id="개요">개요</h2>

<p>이 문서는 Python Enhancement Proposal (PEP) 741의 내용을 한국어 사용자가 이해하기 쉽도록 번역하고 정리한 것입니다. Python 개발자들이 이 PEP의 제안 내용, 도입 배경, 그리고 실제 Python 사용에 미치는 영향을 명확하게 이해할 수 있도록 돕는 것을 목표로 합니다.</p>

<hr />

<h2 id="pep-741--python-configuration-c-api">PEP 741 – Python Configuration C API</h2>

<ul>
  <li><strong>작성자:</strong> Victor Stinner</li>
  <li><strong>상태:</strong> Final (최종)</li>
  <li><strong>유형:</strong> Standards Track</li>
  <li><strong>생성일:</strong> 2024년 1월 18일</li>
  <li><strong>Python 버전:</strong> 3.14</li>
</ul>

<h3 id="요약-abstract">요약 (Abstract)</h3>

<p>이 PEP는 C 구조체에 의존하지 않고 Python 초기화를 구성할 수 있는 C API를 추가하며, 향후 ABI (Application Binary Interface) 호환 변경을 가능하게 합니다.</p>

<p>또한, <code class="language-plaintext highlighter-rouge">PyInitConfig_AddModule()</code> 함수를 추가하여 PEP 587 API를 완성합니다. 이 함수는 내장 확장 모듈을 추가하는 데 사용될 수 있으며, 이전에는 “inittab”으로 불렸던 기능입니다.</p>

<p>현재 런타임 구성을 가져오고 설정하는 <code class="language-plaintext highlighter-rouge">PyConfig_Get()</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig_Set()</code> 함수도 추가됩니다.</p>

<p>PEP 587 “Python 초기화 구성”은 Python 초기화를 구성하는 모든 방법을 통합했습니다. 이 PEP는 Python 사전 초기화(preinitialization)와 Python 초기화를 단일 API로 통합합니다. 또한, API를 더욱 단순화하기 위해 PEP 587에서 제공했던 “Python” 및 “Isolated”의 두 가지 선택 대신 Python을 임베딩하는 단일 선택지만을 제공합니다.</p>

<p>하위 레벨의 PEP 587 <code class="language-plaintext highlighter-rouge">PyConfig</code> API는 CPython 구현 세부 사항(예: 구성 메커니즘을 포함한 CPython의 전체 CLI 기능 에뮬레이션)과 의도적으로 더 높은 수준의 결합이 필요한 사용 사례를 위해 계속 사용할 수 있습니다.</p>

<h3 id="배경-rationale">배경 (Rationale)</h3>

<h4 id="런타임-구성-가져오기">런타임 구성 가져오기</h4>

<p>PEP 587에는 Python 초기화만 구성하는 API만 있었고, 현재 런타임 구성을 가져오는 API는 없었습니다.</p>

<p>예를 들어, 전역 구성 변수 <code class="language-plaintext highlighter-rouge">Py_UnbufferedStdioFlag</code>는 Python 3.12에서 deprecated 되었고, 대신 <code class="language-plaintext highlighter-rouge">PyConfig.buffered_stdio</code>를 사용하는 것이 권장됩니다. 그러나 <code class="language-plaintext highlighter-rouge">PyConfig.buffered_stdio</code>는 Python을 구성하는 데만 작동하며, 이를 가져오는 공개 API는 없습니다.</p>

<p>제한된 C API 사용자들은 현재 런타임 구성을 가져오는 공개 API를 요청해왔습니다. Cython은 <code class="language-plaintext highlighter-rouge">optimization_level</code> 구성 옵션을 가져와야 합니다.</p>

<p>2022년에 전역 구성 변수가 deprecated 되었을 때, Marc-André Lemburg는 런타임(Python 초기화 중뿐만 아니라)에 이러한 구성 변수에 접근하기 위한 C API를 요청했습니다.</p>

<h4 id="보안-수정-security-fix">보안 수정 (Security fix)</h4>

<p>CVE-2020-10735(매우 큰 문자열을 10진수 정수로 변환할 때 서비스 거부 취약점)를 수정하기 위해, ABI에 영향을 미치는 새로운 <code class="language-plaintext highlighter-rouge">PyConfig</code> 멤버를 안정적인 브랜치에 추가하는 방안이 논의되었습니다.</p>

<p>Gregory P. Smith는 <code class="language-plaintext highlighter-rouge">PyConfig</code> 멤버에 의해 제한되지 않도록 텍스트 기반 구성 파일을 사용하는 다른 API를 제안했습니다.</p>

<p>결론적으로, 안정적인 브랜치에 새로운 <code class="language-plaintext highlighter-rouge">PyConfig</code> 멤버를 추가하지 않고, 개발 브랜치(Python 3.12가 됨)에만 새로운 <code class="language-plaintext highlighter-rouge">PyConfig.int_max_str_digits</code> 멤버를 추가하기로 결정되었습니다. 안정적인 브랜치에서는 전용의 개인 전역 변수(<code class="language-plaintext highlighter-rouge">PyConfig</code>와 관련 없음)가 사용됩니다.</p>

<h4 id="pypreconfig와-pyconfig-간의-중복"><code class="language-plaintext highlighter-rouge">PyPreConfig</code>와 <code class="language-plaintext highlighter-rouge">PyConfig</code> 간의 중복</h4>

<p>Python 사전 초기화는 <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 구조체를 사용하고, Python 초기화는 <code class="language-plaintext highlighter-rouge">PyConfig</code> 구조체를 사용합니다. 두 구조체 모두 <code class="language-plaintext highlighter-rouge">dev_mode</code>, <code class="language-plaintext highlighter-rouge">parse_argv</code>, <code class="language-plaintext highlighter-rouge">isolated</code>, <code class="language-plaintext highlighter-rouge">use_environment</code> 네 가지 중복 멤버를 가지고 있습니다.</p>

<p>이 중복은 일부 <code class="language-plaintext highlighter-rouge">PyConfig</code> 멤버가 사전 초기화에 필요함에도 불구하고 두 구조체가 분리되어 있기 때문에 발생합니다.</p>

<h4 id="python-임베딩-embedding-python">Python 임베딩 (Embedding Python)</h4>

<h5 id="python을-임베딩하는-애플리케이션-applications-embedding-python">Python을 임베딩하는 애플리케이션 (Applications embedding Python)</h5>

<p>예시: Blender 3D 그래픽스, fontforge 폰트 에디터, Gimp, LibreOffice, OBS Studio, Tiled, vim 텍스트 에디터.</p>

<p>Linux, FreeBSD, macOS에서는 애플리케이션이 일반적으로 <code class="language-plaintext highlighter-rouge">libpython</code>에 정적으로 링크되거나 <code class="language-plaintext highlighter-rouge">libpython</code>을 동적으로 로드합니다. <code class="language-plaintext highlighter-rouge">libpython</code> 공유 라이브러리는 버전이 지정되어 있습니다(예: Linux의 Python 3.12용 <code class="language-plaintext highlighter-rouge">libpython3.12.so</code>).</p>

<p><code class="language-plaintext highlighter-rouge">vim</code> 프로젝트는 안정적인 ABI를 목표로 할 수 있습니다. 일반적으로 “시스템 Python” 버전이 사용됩니다. 현재는 사용할 Python 버전을 선택하는 것이 불가능합니다. 사용자들은 필요에 따라 최신 Python을 선택할 수 있는 기능을 원합니다.</p>

<p>Linux에서 GIMP와 같이 Python을 임베딩하는 애플리케이션을 배포하는 또 다른 접근 방식은 Python을 Flatpack, AppImage 또는 Snap “컨테이너”에 포함하는 것입니다. 이 경우 애플리케이션은 컨테이너와 함께 자체 Python 버전 복사본을 가져옵니다.</p>

<h5 id="python을-임베딩하는-라이브러리-libraries-embedding-python">Python을 임베딩하는 라이브러리 (Libraries embedding Python)</h5>

<p>예시: Apache mod_wsgi, nimpy (Nim - Python 브리지), PyO3 (Python 인터프리터용 Rust 바인딩).</p>

<h5 id="독립형-애플리케이션을-만드는-유틸리티-utilities-creating-standalone-applications">독립형 애플리케이션을 만드는 유틸리티 (Utilities creating standalone applications)</h5>

<p>py2app (macOS용), py2exe (Windows용), pyinstaller, PyOxidizer (PEP 587 <code class="language-plaintext highlighter-rouge">PyConfig</code> API 사용).</p>

<p>이러한 유틸리티는 <code class="language-plaintext highlighter-rouge">libpython</code>에 링크되지 않은 독립형 애플리케이션을 생성합니다.</p>

<h4 id="런타임-구성-설정-set-the-runtime-configuration">런타임 구성 설정 (Set the runtime configuration)</h4>

<p>Marc-André Lemburg는 런타임에 일부 구성 옵션의 값을 설정하기 위한 C API를 요청했습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">optimization_level</code></li>
  <li><code class="language-plaintext highlighter-rouge">verbose</code></li>
  <li><code class="language-plaintext highlighter-rouge">parser_debug</code></li>
  <li><code class="language-plaintext highlighter-rouge">inspect</code></li>
  <li><code class="language-plaintext highlighter-rouge">write_bytecode</code></li>
</ul>

<p>이전에는 전역 구성 변수를 직접 설정할 수 있었습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Py_OptimizeFlag</code></li>
  <li><code class="language-plaintext highlighter-rouge">Py_VerboseFlag</code></li>
  <li><code class="language-plaintext highlighter-rouge">Py_DebugFlag</code></li>
  <li><code class="language-plaintext highlighter-rouge">Py_InspectFlag</code></li>
  <li><code class="language-plaintext highlighter-rouge">Py_DontWriteBytecodeFlag</code></li>
</ul>

<p>하지만 이러한 구성 플래그는 Python 3.12에서 deprecated 되었고, Python 3.14에서 제거될 예정입니다.</p>

<h3 id="사양-specification">사양 (Specification)</h3>

<p>Python 초기화를 구성하기 위한 C API 함수와 구조체를 추가합니다.</p>

<h4 id="구성-생성-create-config">구성 생성 (Create config)</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PyInitConfig</code> 불투명(opaque) 구조체.</li>
  <li><code class="language-plaintext highlighter-rouge">PyInitConfig* PyInitConfig_Create(void)</code>: Isolated Configuration의 기본값을 사용하여 새 초기화 구성을 생성합니다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">PyInitConfig_Free()</code>로 해제해야 합니다.</li>
      <li>메모리 할당 실패 시 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">void PyInitConfig_Free(PyInitConfig *config)</code>: 초기화 구성의 메모리를 해제합니다.</li>
</ul>

<h4 id="옵션-가져오기-get-options">옵션 가져오기 (Get Options)</h4>

<p>구성 옵션 <code class="language-plaintext highlighter-rouge">name</code> 매개변수는 <code class="language-plaintext highlighter-rouge">NULL</code>이 아닌 널 종료(null-terminated) UTF-8 인코딩 문자열이어야 합니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_HasOption(PyInitConfig *config, const char *name)</code>: 구성에 <code class="language-plaintext highlighter-rouge">name</code>이라는 옵션이 있는지 테스트합니다.
    <ul>
      <li>옵션이 존재하면 1을 반환하고, 그렇지 않으면 0을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_GetInt(PyInitConfig *config, const char *name, int64_t *value)</code>: 정수 구성 옵션을 가져옵니다.
    <ul>
      <li>성공 시 <code class="language-plaintext highlighter-rouge">*value</code>를 설정하고 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_GetStr(PyInitConfig *config, const char *name, char **value)</code>: 널 종료 UTF-8 인코딩 문자열로 문자열 구성 옵션을 가져옵니다.
    <ul>
      <li>성공 시 <code class="language-plaintext highlighter-rouge">*value</code>를 설정하고 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
      <li>성공 시 문자열은 <code class="language-plaintext highlighter-rouge">free(value)</code>로 해제해야 합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_GetStrList(PyInitConfig *config, const char *name, size_t *length, char ***items)</code>: 널 종료 UTF-8 인코딩 문자열 배열로 문자열 목록 구성 옵션을 가져옵니다.
    <ul>
      <li>성공 시 <code class="language-plaintext highlighter-rouge">*length</code>와 <code class="language-plaintext highlighter-rouge">*value</code>를 설정하고 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
      <li>성공 시 문자열 목록은 <code class="language-plaintext highlighter-rouge">PyInitConfig_FreeStrList(length, items)</code>로 해제해야 합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">void PyInitConfig_FreeStrList(size_t length, char **items)</code>: <code class="language-plaintext highlighter-rouge">PyInitConfig_GetStrList()</code>에 의해 생성된 문자열 목록의 메모리를 해제합니다.</li>
</ul>

<h4 id="옵션-설정-set-options">옵션 설정 (Set Options)</h4>

<p>구성 옵션 <code class="language-plaintext highlighter-rouge">name</code> 매개변수는 <code class="language-plaintext highlighter-rouge">NULL</code>이 아닌 널 종료 UTF-8 인코딩 문자열이어야 합니다.</p>

<p>일부 구성 옵션은 다른 옵션에 부작용을 일으킵니다. 이 논리는 <code class="language-plaintext highlighter-rouge">Py_InitializeFromInitConfig()</code>가 호출될 때만 구현되며, 아래의 “Set” 함수에서는 구현되지 않습니다. 예를 들어, <code class="language-plaintext highlighter-rouge">dev_mode</code>를 1로 설정해도 <code class="language-plaintext highlighter-rouge">faulthandler</code>가 1로 설정되지는 않습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_SetInt(PyInitConfig *config, const char *name, int64_t value)</code>: 정수 구성 옵션을 설정합니다.
    <ul>
      <li>성공 시 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_SetStr(PyInitConfig *config, const char *name, const char *value)</code>: 널 종료 UTF-8 인코딩 문자열에서 문자열 구성 옵션을 설정합니다. 문자열은 복사됩니다.
    <ul>
      <li>성공 시 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_SetStrList(PyInitConfig *config, const char *name, size_t length, char * const *items)</code>: 널 종료 UTF-8 인코딩 문자열 배열에서 문자열 목록 구성 옵션을 설정합니다. 문자열 목록은 복사됩니다.
    <ul>
      <li>성공 시 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_AddModule(PyInitConfig *config, const char *name, PyObject* (*initfunc)(void))</code>: 내장 모듈 테이블에 내장 확장 모듈을 추가합니다.
    <ul>
      <li>새 모듈은 <code class="language-plaintext highlighter-rouge">name</code>으로 가져올 수 있으며, 첫 번째 가져오기 시 호출되는 초기화 함수로 <code class="language-plaintext highlighter-rouge">initfunc</code>를 사용합니다.</li>
      <li>성공 시 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다.</li>
      <li>Python이 여러 번 초기화되는 경우, <code class="language-plaintext highlighter-rouge">PyInitConfig_AddModule()</code>은 각 Python 초기화 시 호출되어야 합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">PyImport_AppendInittab()</code> 함수와 유사합니다.</li>
    </ul>
  </li>
</ul>

<h4 id="python-초기화-initialize-python">Python 초기화 (Initialize Python)</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">int Py_InitializeFromInitConfig(PyInitConfig *config)</code>: 초기화 구성에서 Python을 초기화합니다.
    <ul>
      <li>성공 시 0을 반환합니다. 오류 시 <code class="language-plaintext highlighter-rouge">config</code>에 오류를 설정하고 -1을 반환합니다. Python이 종료되기를 원하면 <code class="language-plaintext highlighter-rouge">config</code>에 종료 코드를 설정하고 -1을 반환합니다.</li>
      <li>종료 코드의 경우 <code class="language-plaintext highlighter-rouge">PyInitConfig_GetExitcode()</code>를 참조하세요.</li>
    </ul>
  </li>
</ul>

<h4 id="오류-처리-error-handling">오류 처리 (Error Handling)</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_GetError(PyInitConfig* config, const char **err_msg)</code>: 구성 오류 메시지를 가져옵니다.
    <ul>
      <li>오류가 설정되어 있으면 <code class="language-plaintext highlighter-rouge">*err_msg</code>를 설정하고 1을 반환합니다. 그렇지 않으면 <code class="language-plaintext highlighter-rouge">*err_msg</code>를 <code class="language-plaintext highlighter-rouge">NULL</code>로 설정하고 0을 반환합니다.</li>
      <li>오류 메시지는 UTF-8 인코딩 문자열입니다.</li>
      <li><code class="language-plaintext highlighter-rouge">config</code>에 종료 코드가 있는 경우, 종료 코드를 오류 메시지로 포맷합니다.</li>
      <li>오류 메시지는 <code class="language-plaintext highlighter-rouge">config</code>로 다른 <code class="language-plaintext highlighter-rouge">PyInitConfig</code> 함수가 호출될 때까지 유효합니다. 호출자는 오류 메시지를 해제할 필요가 없습니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyInitConfig_GetExitcode(PyInitConfig* config, int *exitcode)</code>: 구성 종료 코드를 가져옵니다.
    <ul>
      <li>Python이 종료되기를 원하면 <code class="language-plaintext highlighter-rouge">*exitcode</code>를 설정하고 1을 반환합니다. <code class="language-plaintext highlighter-rouge">config</code>에 종료 코드가 설정되어 있지 않으면 0을 반환합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">parse_argv</code> 옵션이 0이 아닌 경우에만 <code class="language-plaintext highlighter-rouge">Py_InitializeFromInitConfig()</code> 함수가 종료 코드를 설정할 수 있습니다.</li>
      <li>명령줄 파싱이 실패했거나(종료 코드 2) 명령줄 옵션이 명령줄 도움말 표시를 요청하는 경우(종료 코드 0) 종료 코드가 설정될 수 있습니다.</li>
    </ul>
  </li>
</ul>

<h4 id="런타임-구성-가져오기-및-설정-get-and-set-the-runtime-configuration">런타임 구성 가져오기 및 설정 (Get and Set the Runtime Configuration)</h4>

<p>구성 옵션 <code class="language-plaintext highlighter-rouge">name</code> 매개변수는 <code class="language-plaintext highlighter-rouge">NULL</code>이 아닌 널 종료 UTF-8 인코딩 문자열이어야 합니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PyObject* PyConfig_Get(const char *name)</code>: 구성 옵션의 현재 런타임 값을 Python 객체로 가져옵니다.
    <ul>
      <li>성공 시 새 참조를 반환합니다. 오류 시 예외를 설정하고 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환합니다.</li>
      <li>객체 유형은 옵션에 따라 다릅니다: 구성 옵션 표를 참조하세요.</li>
      <li>다른 옵션은 내부 <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> 구조체에서 가져옵니다.</li>
      <li>호출자는 GIL (Global Interpreter Lock)을 보유해야 합니다. 이 함수는 Python 초기화 전이나 Python 종료 후에는 호출할 수 없습니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">int PyConfig_GetInt(const char *name, int *value)</code>: <code class="language-plaintext highlighter-rouge">PyConfig_Get()</code>과 유사하지만 값을 정수로 가져옵니다.
    <ul>
      <li>성공 시 <code class="language-plaintext highlighter-rouge">*value</code>를 설정하고 0을 반환합니다. 오류 시 예외를 설정하고 -1을 반환합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PyObject* PyConfig_Names(void)</code>: 모든 구성 옵션 이름을 <code class="language-plaintext highlighter-rouge">frozenset</code>으로 가져옵니다.
    <ul>
      <li>오류 시 예외를 설정하고 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환합니다.</li>
      <li>호출자는 GIL을 보유해야 합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">PyObject* PyConfig_Set(const char *name, PyObject *value)</code>: 구성 옵션의 현재 런타임 값을 설정합니다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">name</code> 옵션이 없으면 <code class="language-plaintext highlighter-rouge">ValueError</code>를 발생시킵니다.</li>
      <li><code class="language-plaintext highlighter-rouge">value</code>가 유효하지 않은 값이면 <code class="language-plaintext highlighter-rouge">ValueError</code>를 발생시킵니다.</li>
      <li>옵션이 읽기 전용이면(설정할 수 없음) <code class="language-plaintext highlighter-rouge">ValueError</code>를 발생시킵니다.</li>
      <li><code class="language-plaintext highlighter-rouge">value</code>의 유형이 적절하지 않으면 <code class="language-plaintext highlighter-rouge">TypeError</code>를 발생시킵니다.</li>
      <li>읽기 전용 구성 옵션은 설정할 수 없습니다.</li>
      <li>호출자는 GIL을 보유해야 합니다. 이 함수는 Python 초기화 전이나 Python 종료 후에는 호출할 수 없습니다.</li>
    </ul>
  </li>
</ul>

<p>이 C API 함수들은 제한된 C API에서 제외됩니다.</p>

<h4 id="pyinitconfig-구조체"><code class="language-plaintext highlighter-rouge">PyInitConfig</code> 구조체</h4>

<p><code class="language-plaintext highlighter-rouge">PyInitConfig</code> 구조체는 <code class="language-plaintext highlighter-rouge">PyConfig</code> API의 세 가지 구조체(<code class="language-plaintext highlighter-rouge">PyPreConfig</code>, <code class="language-plaintext highlighter-rouge">PyConfig</code>, <code class="language-plaintext highlighter-rouge">PyStatus</code>)를 결합하고 <code class="language-plaintext highlighter-rouge">PyInitConfig_AddModule()</code>을 위한 <code class="language-plaintext highlighter-rouge">inittab</code> 멤버도 가집니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PyPreConfig preconfig</code></li>
  <li><code class="language-plaintext highlighter-rouge">PyConfig config</code></li>
  <li><code class="language-plaintext highlighter-rouge">PyStatus status</code></li>
  <li><code class="language-plaintext highlighter-rouge">struct _inittab *inittab</code> for <code class="language-plaintext highlighter-rouge">PyInitConfig_AddModule()</code></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">PyStatus status</code>는 더 이상 분리되어 있지 않고, 통합된 <code class="language-plaintext highlighter-rouge">PyInitConfig</code> 구조체의 일부가 되어 API를 사용하기 쉽게 만듭니다.</p>

<h4 id="구성-옵션-configuration-options">구성 옵션 (Configuration Options)</h4>

<p>구성 옵션은 <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> 구조체 멤버의 이름을 따릅니다. <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 문서 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> 문서를 참조하세요.</p>

<p>구성 옵션을 deprecated 하거나 제거하는 것은 이 PEP의 범위를 벗어나며, 개별적으로 논의되어야 합니다.</p>

<h5 id="공개-구성-옵션-public-configuration-options">공개 구성 옵션 (Public configuration options)</h5>

<p>다음 옵션은 <code class="language-plaintext highlighter-rouge">PyConfig_Get()</code>으로 가져올 수 있고 <code class="language-plaintext highlighter-rouge">PyConfig_Set()</code>으로 설정할 수 있습니다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">옵션 이름</th>
      <th style="text-align: left">유형</th>
      <th style="text-align: left">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">argv</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">list[str]</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.argv</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">base_exec_prefix</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.base_exec_prefix</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">base_executable</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys._base_executable</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">base_prefix</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.base_prefix</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bytes_warning</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.bytes_warning</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">exec_prefix</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.exec_prefix</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">executable</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.executable</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">inspect</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.inspect</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int_max_str_digits</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.int_max_str_digits</code>, <code class="language-plaintext highlighter-rouge">sys.get_int_max_str_digits()</code> 및 <code class="language-plaintext highlighter-rouge">sys.set_int_max_str_digits()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">interactive</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.interactive</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">module_search_paths</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">list[str]</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.path</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">optimization_level</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.optimize</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">parser_debug</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.debug</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">platlibdir</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.platlibdir</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">prefix</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.base_prefix</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">pycache_prefix</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.pycache_prefix</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">quiet</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.quiet</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">stdlib_dir</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys._stdlib_dir</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">use_environment</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.ignore_environment</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">verbose</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.verbose</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">warnoptions</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">list[str]</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.warnoptions</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">write_bytecode</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.dont_write_bytecode</code> (<code class="language-plaintext highlighter-rouge">int</code>) 및 <code class="language-plaintext highlighter-rouge">sys.dont_write_bytecode</code> (<code class="language-plaintext highlighter-rouge">bool</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">xoptions</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">dict[str, str]</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys._xoptions</code>.</td>
    </tr>
  </tbody>
</table>

<p>일부 옵션 이름은 <code class="language-plaintext highlighter-rouge">optimization_level</code> 옵션과 <code class="language-plaintext highlighter-rouge">sys.flags.optimize</code> 속성처럼 <code class="language-plaintext highlighter-rouge">sys</code> 속성과 다릅니다. <code class="language-plaintext highlighter-rouge">PyConfig_Set()</code>은 해당 <code class="language-plaintext highlighter-rouge">sys</code> 속성을 설정합니다.</p>

<p><code class="language-plaintext highlighter-rouge">xoptions</code>는 <code class="language-plaintext highlighter-rouge">PyInitConfig</code>에서 각 문자열이 <code class="language-plaintext highlighter-rouge">key</code> (값이 암묵적으로 <code class="language-plaintext highlighter-rouge">True</code>) 또는 <code class="language-plaintext highlighter-rouge">key=value</code> 형식인 문자열 목록입니다. 현재 런타임 구성에서는 <code class="language-plaintext highlighter-rouge">dict</code> ( <code class="language-plaintext highlighter-rouge">key: str</code> → <code class="language-plaintext highlighter-rouge">value: str | True</code> )가 됩니다.</p>

<h5 id="읽기-전용-구성-옵션-read-only-configuration-options">읽기 전용 구성 옵션 (Read-only configuration options)</h5>

<p>다음 옵션은 <code class="language-plaintext highlighter-rouge">PyConfig_Get()</code>으로 가져올 수 있지만 <code class="language-plaintext highlighter-rouge">PyConfig_Set()</code>으로 설정할 수 없습니다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">옵션 이름</th>
      <th style="text-align: left">유형</th>
      <th style="text-align: left">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">allocator</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">buffered_stdio</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">check_hash_pycs_mode</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">code_debug_ranges</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">coerce_c_locale</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">coerce_c_locale_warn</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">configure_c_stdio</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">configure_locale</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">cpu_count</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">os.cpu_count()</code> (<code class="language-plaintext highlighter-rouge">int | None</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">dev_mode</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.dev_mode</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">dump_refs</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">dump_refs_file</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">faulthandler</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">faulthandler.is_enabled()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">filesystem_encoding</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.getfilesystemencoding()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">filesystem_errors</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.getfilesystemencodeerrors()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">hash_seed</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">home</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">import_time</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">install_signal_handlers</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">isolated</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.isolated</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">legacy_windows_fs_encoding</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">Windows 전용.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">legacy_windows_stdio</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">Windows 전용.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">malloc_stats</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">orig_argv</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">list[str]</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.orig_argv</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">parse_argv</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">pathconfig_warnings</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">perf_profiling</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.is_stack_trampoline_active()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">program_name</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">run_command</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">run_filename</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">run_module</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">run_presite</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">디버그 빌드 필요.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">safe_path</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">show_ref_count</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">site_import</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.no_site</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">skip_source_first_line</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">stdio_encoding</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.stdin.encoding</code>, <code class="language-plaintext highlighter-rouge">sys.stdout.encoding</code>, <code class="language-plaintext highlighter-rouge">sys.stderr.encoding</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">stdio_errors</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">str</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.stdin.errors</code>, <code class="language-plaintext highlighter-rouge">sys.stdout.errors</code>, <code class="language-plaintext highlighter-rouge">sys.stderr.errors</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">tracemalloc</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">int</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">tracemalloc.is_tracing()</code> (<code class="language-plaintext highlighter-rouge">bool</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">use_frozen_modules</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">use_hash_seed</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">user_site_directory</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys.flags.no_user_site</code> (<code class="language-plaintext highlighter-rouge">int</code>).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">utf8_mode</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">warn_default_encoding</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">_pystats</code></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">bool</code></td>
      <td style="text-align: left">API: <code class="language-plaintext highlighter-rouge">sys._stats_on()</code>, <code class="language-plaintext highlighter-rouge">sys._stats_off()</code>. <code class="language-plaintext highlighter-rouge">Py_STATS</code> 빌드 필요.</td>
    </tr>
  </tbody>
</table>

<h4 id="안정성-stability">안정성 (Stability)</h4>

<p>옵션의 동작, 기본 옵션 값 및 Python 동작은 각 Python 버전마다 변경될 수 있으며, “안정적”이지 않습니다.</p>

<p>또한, 구성 옵션은 일반적인 PEP 387 deprecated 프로세스를 따라 추가, deprecated, 제거될 수 있습니다.</p>

<h4 id="pypreconfig-및-pyconfig-api와의-상호작용-interaction-with-the-pypreconfig-and-pyconfig-apis"><code class="language-plaintext highlighter-rouge">PyPreConfig</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> API와의 상호작용 (Interaction with the PyPreConfig and PyConfig APIs)</h4>

<p>하위 레벨의 PEP 587 <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> API는 계속 사용 가능하며 완벽하게 지원됩니다. 요약에서 언급했듯이, 이러한 API는 더 큰 애플리케이션의 일부로 Python 런타임을 제공하는 것보다 전체 CPython CLI의 동작을 밀접하게 에뮬레이션하려는 임베딩 사용 사례에 대해 선호되는 접근 방식으로 남아 있습니다.</p>

<p><code class="language-plaintext highlighter-rouge">PyPreConfig</code> API는 이 PEP의 초기화 API와 함께 사용될 수 있습니다. 이러한 경우, 인터프리터가 사전 구성되면 <code class="language-plaintext highlighter-rouge">PyInitConfig_SetInt</code>에도 사전 구성 설정에 대한 읽기 전용 대 읽기/쓰기 제한이 적용됩니다 (특히 <code class="language-plaintext highlighter-rouge">use_environment</code>만 업데이트할 수 있으며, 다른 사전 구성 변수를 업데이트하려고 하면 오류가 보고됩니다).</p>

<h3 id="예시-examples">예시 (Examples)</h3>

<h4 id="python-초기화-initialize-python-1">Python 초기화 (Initialize Python)</h4>

<p>Python을 초기화하고, 다양한 유형의 구성 옵션을 설정하며, 오류 시 -1을 반환하는 예시입니다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">init_python</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PyInitConfig</span> <span class="o">*</span><span class="n">config</span> <span class="o">=</span> <span class="n">PyInitConfig_Create</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">config</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"PYTHON INIT ERROR: memory allocation failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 정수 설정 (dev mode)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyInitConfig_SetInt</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">"dev_mode"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">goto</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// UTF-8 문자열 목록 설정 (argv)</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">"my_program"</span><span class="p">,</span> <span class="s">"-c"</span><span class="p">,</span> <span class="s">"pass"</span><span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyInitConfig_SetStrList</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">"argv"</span><span class="p">,</span> <span class="n">Py_ARRAY_LENGTH</span><span class="p">(</span><span class="n">argv</span><span class="p">),</span> <span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">goto</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// UTF-8 문자열 설정 (program name)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyInitConfig_SetStr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">"program_name"</span><span class="p">,</span> <span class="s">L"my_program"</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">goto</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 구성으로 Python 초기화</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Py_InitializeFromInitConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">goto</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">PyInitConfig_Free</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">error:</span>
    <span class="c1">// 오류 메시지 표시</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">err_msg</span><span class="p">;</span>
    <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">PyInitConfig_GetError</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">err_msg</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"PYTHON INIT ERROR: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">err_msg</span><span class="p">);</span>
    <span class="n">PyInitConfig_Free</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="초기화-bytes_warning-옵션-증가-increase-initialization-bytes_warning-option">초기화 <code class="language-plaintext highlighter-rouge">bytes_warning</code> 옵션 증가 (Increase initialization bytes_warning option)</h4>

<p>초기화 구성의 <code class="language-plaintext highlighter-rouge">bytes_warning</code> 옵션을 증가시키는 예시입니다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">config_bytes_warning</span><span class="p">(</span><span class="n">PyInitConfig</span> <span class="o">*</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int64_t</span> <span class="n">bytes_warning</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyInitConfig_GetInt</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">"bytes_warning"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">bytes_warning</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">bytes_warning</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyInitConfig_SetInt</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s">"bytes_warning"</span><span class="p">,</span> <span class="n">bytes_warning</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="런타임-verbose-옵션-가져오기-get-the-runtime-verbose-option">런타임 <code class="language-plaintext highlighter-rouge">verbose</code> 옵션 가져오기 (Get the runtime verbose option)</h4>

<p>구성 옵션 <code class="language-plaintext highlighter-rouge">verbose</code>의 현재 런타임 값을 가져오는 예시입니다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">get_verbose</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">verbose</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">PyConfig_GetInt</span><span class="p">(</span><span class="s">"verbose"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">verbose</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 오류를 조용히 무시</span>
        <span class="n">PyErr_Clear</span><span class="p">();</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">verbose</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>오류 발생 시, 함수는 오류를 조용히 무시하고 -1을 반환합니다. 실제로는 <code class="language-plaintext highlighter-rouge">verbose</code> 옵션을 가져오는 것은 실패할 수 없으며, 미래의 Python 버전에서 옵션이 제거되는 경우에만 발생할 수 있습니다.</p>

<h3 id="구현-implementation">구현 (Implementation)</h3>

<ul>
  <li>이슈: [C API] PEP 741: Add PyInitConfig C API to customize the Python initialization</li>
  <li>PR: Add PyConfig_Get() function</li>
  <li>PR: Add PyInitConfig C API</li>
</ul>

<h3 id="하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</h3>

<p>변경 사항은 완벽하게 하위 호환됩니다. 새로운 API만 추가됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">PyConfig</code> C API (PEP 587)와 같은 기존 API는 변경되지 않습니다.</p>

<h3 id="기각된-아이디어-rejected-ideas">기각된 아이디어 (Rejected Ideas)</h3>

<h4 id="텍스트로서의-구성-configuration-as-text">텍스트로서의 구성 (Configuration as text)</h4>

<p>안정적인 ABI와 호환되도록 하고 사용자 정의 옵션을 허용하기 위해 구성을 텍스트로 제공하는 것이 제안되었습니다.</p>

<p>예시:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># integer
bytes_warning = 2
# string
filesystem_encoding = "utf8"
# comment
# list of strings
argv = ['python', '-c', 'code']
</code></pre></div></div>

<p>API는 파일을 통해 구성하는 것이 아니라 문자열로 구성을 받아들였을 것입니다. 가상의 <code class="language-plaintext highlighter-rouge">PyInit_SetConfig()</code> 함수를 사용한 예시:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">stable_abi_init_demo</span><span class="p">(</span><span class="kt">int</span> <span class="n">set_path</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PyInit_SetConfig</span><span class="p">(</span>
        <span class="s">"isolated = 1</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"argv = ['python', '-c', 'code']</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"filesystem_encoding = 'utf-8'</span><span class="se">\n</span><span class="s">"</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">set_path</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PyInit_SetConfig</span><span class="p">(</span><span class="s">"pythonpath = '/my/path'"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이 예시는 가독성을 위해 오류 처리를 무시합니다.</p>

<p>문제는 이러한 구성 텍스트를 생성하려면 문자열에 따옴표를 추가하고 문자열 내의 따옴표를 이스케이프해야 한다는 것입니다. 문자열 배열을 포맷하는 것은 간단하지 않습니다.</p>

<p>Python이 값을 문자열 또는 문자열 배열로 직접 전달하는 구성 옵션을 설정하는 API를 직접 제공할 수 있는 반면, 문자열 또는 문자열 배열을 포맷하는 API를 제공하는 것은 가치가 없습니다. 이는 줄 바꿈 문자(newline characters)와 같이 이스케이프해야 하는 특정 문자에 특별한 의미를 부여하는 것을 피합니다.</p>

<h4 id="정수로-옵션-참조-refer-to-an-option-with-an-integer">정수로 옵션 참조 (Refer to an option with an integer)</h4>

<p>구성 옵션을 참조하기 위해 문자열을 사용하는 것은 정수를 비교하는 것보다 느릴 수 있는 문자열 비교를 필요로 합니다.</p>

<p><code class="language-plaintext highlighter-rouge">Py_tp_doc</code>와 같은 유형 “슬롯”과 유사하게, 정수를 사용하여 구성 옵션을 참조하는 방안이 있었습니다. <code class="language-plaintext highlighter-rouge">const char *name</code> 매개변수는 <code class="language-plaintext highlighter-rouge">int option</code>으로 대체될 것입니다.</p>

<p>정수를 사용할 때 사용자 정의 옵션을 허용하면 정수 옵션에 대한 “네임스페이스”(범위)를 유지하기가 더 어렵기 때문에 충돌이 발생할 가능성이 더 큽니다. 문자열을 사용하면 콜론 구분 기호가 있는 간단한 접두사를 사용할 수 있습니다.</p>

<p>정수는 또한 정수 상수 목록을 유지해야 하므로 C API와 Python API를 더 크게 만듭니다.</p>

<p>Python 3.13에는 약 62개의 구성 옵션만 있으므로 성능이 실제로 걸림돌이 되는 문제는 아닙니다. 나중에 더 나은 성능이 필요하다면 해시 테이블을 사용하여 이름으로 옵션을 가져올 수 있습니다.</p>

<p>구성 옵션을 가져오는 것이 자주 실행되는 코드(“hot code”)에서 사용되는 경우, 값은 한 번 읽고 캐시될 수 있습니다. 덧붙여, 대부분의 구성 옵션은 런타임에 변경할 수 없습니다.</p>

<h4 id="다단계-초기화-multi-phase-initialization-similar-to-pep-432">다단계 초기화 (Multi-phase initialization (similar to PEP 432))</h4>

<p>Eric Snow는 이 제안이 임베딩 개발자들에게 초기화가 단일 모놀리식 단계라는 생각을 강화할 수 있다고 우려를 표했습니다. 그는 초기화가 5가지 별개의 단계로 구성되며, API가 이를 명시적으로 반영해야 한다고 주장했습니다. Eric은 적어도 초기화 구현이 개선된 코드 상태를 위해 단계들을 반영해야 한다고 제안했습니다. 전반적으로 그의 설명은 PEP 432 및 PEP 587과 유사점이 있습니다.</p>

<p>이 PEP와 관련된 Eric의 또 다른 주요 요점은, 이상적으로는 <code class="language-plaintext highlighter-rouge">Py_InitializeFromConfig()</code>에 전달되는 구성이 해당 함수가 호출되기 전에 완전해야 한다는 것이었습니다. 반면 현재 초기화는 실제로 구성을 수정합니다.</p>

<p>Eric이 반드시 PEP 741에 대한 대안을 제안한 것은 아니지만, 단계별로 세분화된 초기화 API를 추가하려는 모든 제안은 이 PEP가 달성하려는 목표와 사실상 반대됩니다. 이러한 API는 더 복잡하고, 새로운 공개 구조체와 새로운 공개 함수를 추가해야 합니다. 이 PEP가 기존 API를 통합하고 단순화하려는 시도와는 달리(반대), Python 초기화를 더 복잡하게 만듭니다. 유사한 목적을 가진 여러 구조체를 가지면 기존 <code class="language-plaintext highlighter-rouge">PyPreConfig</code> 및 <code class="language-plaintext highlighter-rouge">PyConfig</code> 구조체 간의 중복 멤버와 유사한 문제가 발생할 수 있습니다.</p>

<h4 id="로케일-인코딩-및-와이드-문자열-locale-encoding-and-wide-strings">로케일 인코딩 및 와이드 문자열 (Locale encoding and wide strings)</h4>

<p><code class="language-plaintext highlighter-rouge">PyInitConfig</code> API에서 로케일 인코딩으로 인코딩된 문자열과 와이드 문자열(<code class="language-plaintext highlighter-rouge">wchar_t*</code>)을 받아들이는 것은 <code class="language-plaintext highlighter-rouge">PyInitConfig</code> API를 단순하게 유지하고 Python 사전 초기화의 복잡성을 피하기 위해 보류되었습니다. 이러한 기능은 CPython CLI의 전체 동작을 에뮬레이션할 때 주로 필요하며, 따라서 하위 레벨의 PEP 587 API에서 더 잘 처리됩니다.</p>

<h3 id="논의-discussions">논의 (Discussions)</h3>

<ul>
  <li>PEP 741: Python Configuration C API (second version) (2024년 2월)</li>
  <li>PEP 741: Python Configuration C API (2024년 1월)</li>
  <li>FR: Allow private runtime config to enable extending without breaking the PyConfig ABI (2022년 8월)</li>
</ul>

<hr />
<p>이 문서는 Public Domain 또는 CC0-1.0-Universal 라이선스 중 더 관대한 라이선스에 따라 제공됩니다.</p>

<blockquote>
  <p>⚠️ <strong>알림:</strong> 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.</p>
</blockquote>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/tags/#python" class="page__taxonomy-item" rel="tag">Python</a><span class="sep">, </span>
    
      <a href="/tags/#translation" class="page__taxonomy-item" rel="tag">Translation</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/categories/#python" class="page__taxonomy-item" rel="tag">Python</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-09-27">September 27, 2025</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/python/pep/740/" class="pagination--pager" title="[Final] PEP 740 - Index support for digital attestations
">Previous</a>
    
    
      <a href="/python/pep/742/" class="pagination--pager" title="[Final] PEP 742 - Narrowing types with TypeIs
">Next</a>
    
  </nav>


    </div>

    
  </article>

</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 secrett2633. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'secrett2633/secrett2633.github.io');
    script.setAttribute('issue-term', 'pathname');
    script.setAttribute('theme', 'github-light');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
