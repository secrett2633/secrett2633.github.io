<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <style> 
      ::-webkit-scrollbar{ 
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        width: 0px;
        background-color: #626262;
        /* border-radius: 5px; */
      }

      ::-webkit-scrollbar-thumb {
        width: 0px;
        background-color: #E2E2E2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        width: 10px;
        height: 20px;
        /* background-color: rgba(190, 190, 190, 0.2); */
        background-color: #A2A2A2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-track:hover {
        width: 10px;
        /* background-color: rgba(150, 150, 150, 0.1); */
        background-color: #626262;
        border-radius: 5px;
        /* background: transparent; */
        /* border-radius: 10px; */
      }

      ::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment {
          width:0px;
          height: 0px;
          /* background-color: rgb(14, 221, 24); */
          /* border-radius: 50%; */
      }
    </style>
    
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[Draft] PEP 798 - Unpacking in Comprehensions | secrett2633</title>
<meta name="description" content="Python Enhancement Proposal 798: ‘Unpacking in Comprehensions’에 대한 한국어 번역입니다.">


  <meta name="author" content="secrett2633">
  
  <meta property="article:author" content="secrett2633">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="secrett2633's blog">
<meta property="og:title" content="[Draft] PEP 798 - Unpacking in Comprehensions">
<meta property="og:url" content="http://localhost:4000/python/pep/798/">


  <meta property="og:description" content="Python Enhancement Proposal 798: ‘Unpacking in Comprehensions’에 대한 한국어 번역입니다.">







  <meta property="article:published_time" content="2025-09-27T14:08:32+09:00">



  <meta property="article:modified_time" content="2025-09-27T14:08:32+09:00">



  

  


<link rel="canonical" href="http://localhost:4000/python/pep/798/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "secrett2633",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="secrett2633's blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


    <link rel="icon" type="image/png" sizes="32x32" href="https://secrett2633.github.io/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://secrett2633.github.io/assets/images/favicon/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          secrett2633's blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://github.com/secrett2633">GitHub</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <!-- 2022.02.17 author content hidden -->
  <!-- <div class="author__content">
    
      <h3 class="author__name" itemprop="name">secrett2633</h3>
    
    
  </div> -->

  <div class="author__urls-wrapper">
    <!-- <button class="btn btn--inverse">Follow</button> -->
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    <!-- Backend -->
    <li>
      <span class="nav__sub-title">Backend</span>
      <hr>
      <ul>
        <li><a href="/backend/django/">Django</a></li>
        <li><a href="/backend/logging/">Logging</a></li>
      </ul>
    </li>

    <!-- Python -->
    <li>
      <span class="nav__sub-title">Python</span>
      <hr>
      <ul>
        <li><a href="/python/pep/">PEP</a></li>
      </ul>
    </li>

    <!-- AI/ML -->
    <li>
      <span class="nav__sub-title">AI/ML</span>
      <hr>
      <ul>
        <li><a href="/ai/llm/">LLM</a></li>
        <li><a href="/ai/review/">Review</a></li>
      </ul>
    </li>

    <!-- DevOps -->
    <li>
      <span class="nav__sub-title">DevOps</span>
      <hr>
      <ul>
        <li><a href="/devops/nginx/">Nginx</a></li>
        <li><a href="/devops/docker/">Docker</a></li>
        <li><a href="/devops/safeline/">SafeLine</a></li>
        <li><a href="/devops/jenkins/">Jenkins</a></li>
        <li><a href="/devops/github-actions/">GitHub Actions</a></li>
        <li><a href="/devops/aws/">AWS</a></li>
      </ul>
    </li>

    <!-- etc -->
    <li>
      <span class="nav__sub-title">etc</span>
      <hr>
      <ul>
        <li><a href="/etc/me/">Me</a></li>
        <li><a href="/etc/chrome-extension/">Chrome Extension</a></li>
      </ul>
    </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Draft] PEP 798 - Unpacking in Comprehensions">
    <meta itemprop="description" content="Python Enhancement Proposal 798: ‘Unpacking in Comprehensions’에 대한 한국어 번역입니다.">
    <meta itemprop="datePublished" content="2025-09-27T14:08:32+09:00">
    <meta itemprop="dateModified" content="2025-09-27T14:08:32+09:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">[Draft] PEP 798 - Unpacking in Comprehensions
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2025-09-27T14:08:32+09:00">September 27, 2025</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#개요-abstract">개요 (Abstract)</a></li><li><a href="#동기-motivation">동기 (Motivation)</a></li><li><a href="#근거-rationale">근거 (Rationale)</a></li><li><a href="#명세-specification">명세 (Specification)</a><ul><li><a href="#구문-syntax">구문 (Syntax)</a></li><li><a href="#의미론-listsetdict-comprehension-semantics-listsetdict-comprehensions">의미론: List/Set/Dict Comprehension (Semantics: List/Set/Dict Comprehensions)</a></li><li><a href="#의미론-generator-expression-semantics-generator-expressions">의미론: Generator Expression (Semantics: Generator Expressions)</a></li><li><a href="#할당-표현식과의-상호작용-interaction-with-assignment-expressions">할당 표현식과의 상호작용 (Interaction with Assignment Expressions)</a></li><li><a href="#오류-보고-error-reporting">오류 보고 (Error Reporting)</a></li></ul></li><li><a href="#참조-구현-reference-implementation">참조 구현 (Reference Implementation)</a></li><li><a href="#하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</a></li><li><a href="#코드-예시-code-examples">코드 예시 (Code Examples)</a><ul><li><a href="#명시적-루프-대체-replacing-explicit-loops">명시적 루프 대체 (Replacing Explicit Loops)</a></li><li><a href="#from_iterable-및-관련-함수-대체-replacing-from_iterable-and-friends">from_iterable 및 관련 함수 대체 (Replacing from_iterable and Friends)</a></li><li><a href="#comprehension-내-이중-루프-대체-replacing-double-loops-in-comprehensions">Comprehension 내 이중 루프 대체 (Replacing Double Loops in Comprehensions)</a></li></ul></li><li><a href="#교육-방법-how-to-teach-this">교육 방법 (How to Teach This)</a></li><li><a href="#거부된-대안-제안-rejected-alternative-proposals">거부된 대안 제안 (Rejected Alternative Proposals)</a><ul><li><a href="#함수-인수로-사용되는-starred-generator-starred-generators-as-function-arguments">함수 인수로 사용되는 Starred Generator (Starred Generators as Function Arguments)</a></li><li><a href="#언패킹-연산자-추가-일반화-further-generalizing-unpacking-operators">언패킹 연산자 추가 일반화 (Further Generalizing Unpacking Operators)</a></li><li><a href="#대체-generator-expression-의미론-alternative-generator-expression-semantics">대체 Generator Expression 의미론 (Alternative Generator Expression Semantics)</a></li></ul></li><li><a href="#우려-사항-및-단점-concerns-and-disadvantages">우려 사항 및 단점 (Concerns and Disadvantages)</a></li><li><a href="#부록-다른-언어-appendix-other-languages">부록: 다른 언어 (Appendix: Other Languages)</a></li><li><a href="#부록-generator-위임의-의미론-appendix-semantics-of-generator-delegation">부록: Generator 위임의 의미론 (Appendix: Semantics of Generator Delegation)</a><ul><li><a href="#기본-동작-basic-behavior">기본 동작 (Basic Behavior)</a></li><li><a href="#고급-generator-프로토콜-차이-advanced-generator-protocol-differences">고급 Generator 프로토콜 차이 (Advanced Generator Protocol Differences)</a><ul><li><a href="#send를-사용한-위임-delegation-with-send">.send()를 사용한 위임 (Delegation with .send())</a></li><li><a href="#throw를-사용한-예외-처리-exception-handling-with-throw">.throw()를 사용한 예외 처리 (Exception Handling with .throw())</a></li><li><a href="#close를-사용한-generator-정리-generator-cleanup-with-close">.close()를 사용한 Generator 정리 (Generator Cleanup with .close())</a></li></ul></li></ul></li></ul>

            </nav>
          </aside>
        
        <blockquote>
  <p><strong>원문 링크:</strong> <a href="https://peps.python.org/pep-0798/">PEP 798 - Unpacking in Comprehensions</a></p>

  <table>
    <tbody>
      <tr>
        <td><strong>상태:</strong> Draft</td>
        <td><strong>유형:</strong> Standards Track</td>
        <td><strong>작성일:</strong> 19-Jul-2025</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<p>PEP 798 – Comprehension 내 언패킹 (Unpacking)</p>

<h2 id="개요-abstract">개요 (Abstract)</h2>

<p>이 PEP는 <code class="language-plaintext highlighter-rouge">list</code>, <code class="language-plaintext highlighter-rouge">set</code>, <code class="language-plaintext highlighter-rouge">dictionary</code> Comprehension (컴프리헨션) 및 <code class="language-plaintext highlighter-rouge">generator expression</code> (제너레이터 표현식)을 확장하여 표현식 시작 부분에 언패킹(Unpacking) 표기법(<code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>)을 허용할 것을 제안합니다. 이는 임의의 수의 iterable을 하나의 <code class="language-plaintext highlighter-rouge">list</code>, <code class="language-plaintext highlighter-rouge">set</code> 또는 <code class="language-plaintext highlighter-rouge">generator</code>로, 또는 임의의 수의 딕셔너리를 하나의 딕셔너리로 결합하는 간결한 방법을 제공합니다.</p>

<p>예시는 다음과 같습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">]</span> <span class="c1"># 'its' 내의 iterable들을 연결한 list
</span><span class="p">{</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">}</span> <span class="c1"># 'its' 내의 iterable들을 합집합(union)한 set
</span><span class="p">{</span><span class="o">**</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">}</span> <span class="c1"># 'dicts' 내의 딕셔너리들을 조합한 dict
</span><span class="p">(</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">)</span> <span class="c1"># 'its' 내의 iterable들을 연결한 generator
</span></code></pre></div></div>

<h2 id="동기-motivation">동기 (Motivation)</h2>

<p>PEP 448에 도입된 확장 언패킹 표기법(<code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>)은 몇 개의 iterable 또는 딕셔너리를 쉽게 결합할 수 있도록 합니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">*</span><span class="n">it1</span><span class="p">,</span> <span class="o">*</span><span class="n">it2</span><span class="p">,</span> <span class="o">*</span><span class="n">it3</span><span class="p">]</span> <span class="c1"># 세 개의 iterable을 연결한 list
</span><span class="p">{</span><span class="o">*</span><span class="n">it1</span><span class="p">,</span> <span class="o">*</span><span class="n">it2</span><span class="p">,</span> <span class="o">*</span><span class="n">it3</span><span class="p">}</span> <span class="c1"># 세 개의 iterable을 합집합(union)한 set
</span><span class="p">{</span><span class="o">**</span><span class="n">dict1</span><span class="p">,</span> <span class="o">**</span><span class="n">dict2</span><span class="p">,</span> <span class="o">**</span><span class="n">dict3</span><span class="p">}</span> <span class="c1"># 세 개의 딕셔너리를 조합한 dict
</span></code></pre></div></div>

<p>하지만 임의의 수의 iterable을 유사하게 결합하려는 경우에는 동일한 방식으로 언패킹을 사용할 수 없습니다.</p>

<p>여러 iterable을 결합하는 몇 가지 기존 방법이 있습니다. 예를 들어, 명시적인 루프 구조와 내장된 결합 방법을 사용할 수 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
    <span class="n">new_list</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>

<span class="n">new_set</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
    <span class="n">new_set</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>

<span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">:</span>
    <span class="n">new_dict</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">new_generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">it</span>
</code></pre></div></div>

<p>또는 두 개의 루프를 사용하는 Comprehension으로 더 간결하게 표현할 수 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">]</span>
<span class="p">{</span><span class="n">x</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">}</span>
<span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="p">.</span><span class="nf">items</span><span class="p">()}</span>
<span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">itertools.chain</code> 또는 <code class="language-plaintext highlighter-rouge">itertools.chain.from_iterable</code>을 사용할 수도 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">list</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="n">its</span><span class="p">))</span>
<span class="nf">set</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="n">its</span><span class="p">))</span>
<span class="nf">dict</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="nf">items</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">)))</span>
<span class="n">itertools</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="n">its</span><span class="p">)</span>
<span class="nf">list</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="n">its</span><span class="p">))</span>
<span class="nf">set</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="n">its</span><span class="p">))</span>
<span class="nf">dict</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="nf">items</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">))</span>
<span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="n">its</span><span class="p">)</span>
</code></pre></div></div>

<p>또는 <code class="language-plaintext highlighter-rouge">generator</code>를 제외한 모든 경우에 <code class="language-plaintext highlighter-rouge">functools.reduce</code>를 사용할 수 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">functools</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">iconcat</span><span class="p">,</span> <span class="n">its</span><span class="p">,</span> <span class="p">(</span><span class="n">new_list</span> <span class="p">:</span><span class="o">=</span> <span class="p">[]))</span>
<span class="n">functools</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">ior</span><span class="p">,</span> <span class="n">its</span><span class="p">,</span> <span class="p">(</span><span class="n">new_set</span> <span class="p">:</span><span class="o">=</span> <span class="nf">set</span><span class="p">()))</span>
<span class="n">functools</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">ior</span><span class="p">,</span> <span class="n">its</span><span class="p">,</span> <span class="p">(</span><span class="n">new_dict</span> <span class="p">:</span><span class="o">=</span> <span class="p">{}))</span>
</code></pre></div></div>

<p>이 PEP는 Comprehension 내에서 언패킹 연산을 추가적인 대안으로 허용할 것을 제안합니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">]</span> <span class="c1"># 'its' 내의 iterable들을 연결한 list
</span><span class="p">{</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">}</span> <span class="c1"># 'its' 내의 iterable들을 합집합(union)한 set
</span><span class="p">{</span><span class="o">**</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">}</span> <span class="c1"># 'dicts' 내의 딕셔너리들을 조합한 dict
</span><span class="p">(</span><span class="o">*</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">)</span> <span class="c1"># 'its' 내의 iterable들을 연결한 generator
</span></code></pre></div></div>

<p>이 제안은 비동기 Comprehension 및 <code class="language-plaintext highlighter-rouge">generator expression</code>에도 확장되어, 예를 들어 <code class="language-plaintext highlighter-rouge">(*ait async for ait in aits())</code>는 <code class="language-plaintext highlighter-rouge">(x async for ait in aits() for x in ait)</code>와 동일합니다.</p>

<h2 id="근거-rationale">근거 (Rationale)</h2>

<p>iterable 객체들을 하나의 더 큰 객체로 결합하는 것은 흔한 작업입니다. 예를 들어, 리스트의 리스트를 평탄화(flattening)하는 방법에 대한 StackOverflow 게시물은 460만 회 조회되었습니다. 이처럼 흔한 작업임에도 불구하고, 현재 간결하게 수행할 수 있는 옵션들은 간접적인 수준을 요구하여 결과 코드를 읽고 이해하기 어렵게 만들 수 있습니다.</p>

<p>제안된 표기법은 간결하며(보조 변수의 사용과 반복을 피함), Comprehension과 언패킹 표기법 모두에 익숙한 프로그래머에게 직관적이고 친숙할 것으로 예상됩니다. 표준 라이브러리의 코드를 제안된 구문으로 더 명확하고 간결하게 다시 작성할 수 있는 예시는 <code class="language-plaintext highlighter-rouge">Code Examples</code> 섹션을 참조하십시오.</p>

<p>이 제안은 부분적으로 Python 프로그래밍 수업의 필기시험에서 동기를 얻었습니다. 여러 학생들이 Python에 이미 존재한다고 가정하고 이 표기법(특히 <code class="language-plaintext highlighter-rouge">set</code> 버전)을 솔루션에 사용했습니다. 이는 이 표기법이 초보자에게도 직관적임을 시사합니다. 반대로, 기존 구문인 <code class="language-plaintext highlighter-rouge">[x for it in its for x in it]</code>는 학생들이 종종 틀리는 부분이며, 많은 학생들이 <code class="language-plaintext highlighter-rouge">for</code> 절의 순서를 뒤바꾸는 경향이 있습니다.</p>

<p>또한, 이 PEP가 발표된 후 Reddit 게시물의 댓글 섹션은 이 제안에 대한 상당한 지지를 보여주며, 여기에 제안된 구문이 가독성이 좋고, 직관적이며, 유용하다는 점을 시사합니다.</p>

<h2 id="명세-specification">명세 (Specification)</h2>

<h3 id="구문-syntax">구문 (Syntax)</h3>

<p>문법은 <code class="language-plaintext highlighter-rouge">list</code>/<code class="language-plaintext highlighter-rouge">set</code> Comprehension 및 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 표현식 앞에 <code class="language-plaintext highlighter-rouge">*</code>를 허용하도록 변경되어야 합니다. 또한 <code class="language-plaintext highlighter-rouge">dictionary comprehension</code>의 대체 형식으로 <code class="language-plaintext highlighter-rouge">key: value</code> 쌍 대신 <code class="language-plaintext highlighter-rouge">double-starred</code> 표현식을 사용할 수 있도록 허용해야 합니다.</p>

<p>이는 <code class="language-plaintext highlighter-rouge">listcomp</code> 및 <code class="language-plaintext highlighter-rouge">setcomp</code> 규칙을 <code class="language-plaintext highlighter-rouge">named_expression</code> 대신 <code class="language-plaintext highlighter-rouge">star_named_expression</code>을 사용하도록 업데이트함으로써 달성할 수 있습니다:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>listcomp[expr_ty]:
    | '[' a=star_named_expression b=for_if_clauses ']'
setcomp[expr_ty]:
    | '{' a=star_named_expression b=for_if_clauses '}'
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">genexp</code> 규칙도 유사하게 <code class="language-plaintext highlighter-rouge">starred_expression</code>을 허용하도록 수정해야 합니다:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>genexp[expr_ty]:
    | '(' a=(assignment_expression | expression !':=' | starred_expression) b=for_if_clauses ')'
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">dictionary comprehension</code> 규칙도 이 새로운 형식을 허용하도록 조정해야 합니다:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dictcomp[expr_ty]:
    | '{' a=double_starred_kvpair b=for_if_clauses '}'
</code></pre></div></div>

<p>함수 호출에서 인자 언패킹이 처리되는 방식에는 변경이 없어야 합니다. 즉, 함수에 유일한 인수로 제공되는 <code class="language-plaintext highlighter-rouge">generator expression</code>이 추가적인 중복 괄호를 필요로 하지 않는다는 일반 규칙은 유지되어야 합니다. 이는 예를 들어 <code class="language-plaintext highlighter-rouge">f(*x for x in it)</code>가 <code class="language-plaintext highlighter-rouge">f((*x for x in it))</code>와 동일함을 의미합니다. (<code class="language-plaintext highlighter-rouge">Starred Generators as Function Arguments</code> 섹션에서 더 자세한 논의를 참조하십시오).</p>

<p><code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>는 Comprehension 내 표현식의 최상위 레벨에서만 허용되어야 합니다. (<code class="language-plaintext highlighter-rouge">Further Generalizing Unpacking Operators</code> 섹션에서 더 자세한 논의를 참조하십시오).</p>

<h3 id="의미론-listsetdict-comprehension-semantics-listsetdict-comprehensions">의미론: List/Set/Dict Comprehension (Semantics: List/Set/Dict Comprehensions)</h3>

<p><code class="language-plaintext highlighter-rouge">list comprehension</code> 내에서 별표가 붙은 표현식 <code class="language-plaintext highlighter-rouge">[*expr for x in it]</code>의 의미는 각 표현식을 <code class="language-plaintext highlighter-rouge">iterable</code>로 취급하고, <code class="language-plaintext highlighter-rouge">[*expr1, *expr2, ...]</code>와 같이 명시적으로 나열된 것처럼 이들을 연결하는 것입니다. 유사하게, <code class="language-plaintext highlighter-rouge">{*expr for x in it}</code>는 <code class="language-plaintext highlighter-rouge">{*expr1, *expr2, ...}</code>와 같이 명시적으로 나열된 것처럼 <code class="language-plaintext highlighter-rouge">set union</code>을 형성합니다. 그리고 <code class="language-plaintext highlighter-rouge">{**expr for x in it}</code>는 <code class="language-plaintext highlighter-rouge">{**expr1, **expr2, ...}</code>와 같이 명시적으로 나열된 것처럼 딕셔너리를 결합합니다. 이러한 연산은 이 방식으로 컬렉션을 결합하는 모든 동등한 의미론(예: 딕셔너리를 결합할 때 중복된 키의 경우 나중 값이 이전 값을 덮어쓰는 것 포함)을 유지해야 합니다.</p>

<p>다시 말해, 다음 Comprehension에 의해 생성된 객체들은:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_list</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">expr</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">its</span><span class="p">]</span>
<span class="n">new_set</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="n">expr</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">its</span><span class="p">}</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">expr</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">}</span>
</code></pre></div></div>

<p>각각 다음 코드 조각에 의해 생성된 객체들과 동등해야 합니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
    <span class="n">new_list</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

<span class="n">new_set</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
    <span class="n">new_set</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

<span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dicts</span><span class="p">:</span>
    <span class="n">new_dict</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="의미론-generator-expression-semantics-generator-expressions">의미론: Generator Expression (Semantics: Generator Expressions)</h3>

<p>언패킹 구문을 사용하는 <code class="language-plaintext highlighter-rouge">generator expression</code>은 표현식에 의해 주어진 iterable들을 연결하여 값을 생성하는 새로운 <code class="language-plaintext highlighter-rouge">generator</code>를 형성해야 합니다. 특히, 동작은 다음 코드와 동일하게 정의됩니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># g = (*expr for x in it) 와 동일
</span><span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">expr</span>
<span class="n">g</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">()</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">yield from</code>은 비동기 <code class="language-plaintext highlighter-rouge">generator</code> 내에서 허용되지 않으므로 (PEP 525의 <code class="language-plaintext highlighter-rouge">Asynchronous yield from</code> 섹션 참조), <code class="language-plaintext highlighter-rouge">(*expr async for x in ait())</code>의 동등한 표현은 다음과 같습니다 (물론 이 새로운 형식은 루프 변수 <code class="language-plaintext highlighter-rouge">i</code>를 정의하거나 참조하지 않아야 합니다):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># g = (*expr async for x in ait()) 와 동일
</span><span class="k">async</span> <span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">ait</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
<span class="n">g</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">()</span>
</code></pre></div></div>

<p>이러한 의미론의 세부 사항은 미래에 재검토되어야 합니다. 특히 비동기 <code class="language-plaintext highlighter-rouge">generator</code>가 <code class="language-plaintext highlighter-rouge">yield from</code>을 지원하게 된다면 (<code class="language-plaintext highlighter-rouge">async</code> 변형이 명시적인 루프 대신 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하도록 변경될 수 있음). (<code class="language-plaintext highlighter-rouge">Alternative Generator Expression Semantics</code> 섹션에서 더 자세한 논의를 참조하십시오).</p>

<h3 id="할당-표현식과의-상호작용-interaction-with-assignment-expressions">할당 표현식과의 상호작용 (Interaction with Assignment Expressions)</h3>

<p>이 제안은 Comprehension의 다양한 부분의 평가 순서나 스코프(scope) 규칙을 변경하지 않습니다. 이는 PEP 572의 “walrus operator” <code class="language-plaintext highlighter-rouge">:=</code>를 사용하는 <code class="language-plaintext highlighter-rouge">generator expression</code>에 특히 관련이 있습니다. 이 연산자는 Comprehension 또는 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 사용될 때, 변수 바인딩을 Comprehension 내의 지역 스코프가 아닌 포함하는 스코프(containing scope)에서 수행합니다.</p>

<p>예를 들어, <code class="language-plaintext highlighter-rouge">(*(y := [i, i+1]) for i in (0, 2, 4))</code> 표현식의 평가에서 발생하는 <code class="language-plaintext highlighter-rouge">generator</code>를 고려해 봅시다. 이는 다음 <code class="language-plaintext highlighter-rouge">generator</code>와 거의 동일하지만, <code class="language-plaintext highlighter-rouge">generator expression</code> 형태에서는 <code class="language-plaintext highlighter-rouge">y</code>가 지역적으로 바인딩되는 대신 포함하는 스코프에서 바인딩됩니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="k">yield</span> <span class="nf">from </span><span class="p">(</span><span class="n">y</span> <span class="p">:</span><span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div>

<p>이 예제에서, 서브 표현식 <code class="language-plaintext highlighter-rouge">(y := [i, i+1])</code>는 <code class="language-plaintext highlighter-rouge">generator</code>가 소진되기 전에 정확히 세 번 평가됩니다: Comprehension에서 <code class="language-plaintext highlighter-rouge">i</code>가 각각 <code class="language-plaintext highlighter-rouge">0</code>, <code class="language-plaintext highlighter-rouge">2</code>, <code class="language-plaintext highlighter-rouge">4</code>로 할당된 직후입니다. 따라서 <code class="language-plaintext highlighter-rouge">y</code>(포함하는 스코프 내)는 해당 시점에 수정됩니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">y</span> <span class="p">:</span><span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="nc">Traceback </span><span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;python-input-1&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="sh">'</span><span class="s">y</span><span class="sh">'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="오류-보고-error-reporting">오류 보고 (Error Reporting)</h3>

<p>현재 제안된 구문은 <code class="language-plaintext highlighter-rouge">SyntaxError</code>를 발생시킵니다. 이러한 형식이 구문적으로 유효한 것으로 인식되도록 허용하려면 <code class="language-plaintext highlighter-rouge">invalid_comprehension</code> 및 <code class="language-plaintext highlighter-rouge">invalid_dict_comprehension</code>에 대한 문법 규칙을 각각 <code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code> 사용을 허용하도록 조정해야 합니다.</p>

<p>최소한 다음 경우에 추가적인 특정 오류 메시지가 제공되어야 합니다:</p>

<p><code class="language-plaintext highlighter-rouge">list comprehension</code> 또는 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 <code class="language-plaintext highlighter-rouge">**</code>를 사용하려고 시도하면 딕셔너리 언패킹이 해당 구조에서 사용될 수 없음을 보고해야 합니다. 예를 들면:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">]</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">[</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">]</span>
    <span class="o">^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="nb">dict</span> <span class="n">unpacking</span> <span class="ow">in</span> <span class="nb">list</span> <span class="n">comprehension</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">)</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">(</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">)</span>
    <span class="o">^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="nb">dict</span> <span class="n">unpacking</span> <span class="ow">in</span> <span class="n">generator</span> <span class="n">expression</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">dictionary key/value</code>에서 <code class="language-plaintext highlighter-rouge">*</code>를 사용하려고 시도할 때의 기존 오류 메시지는 유지되어야 하지만, <code class="language-plaintext highlighter-rouge">dictionary key</code> 또는 <code class="language-plaintext highlighter-rouge">value</code>에서 <code class="language-plaintext highlighter-rouge">**</code> 언패킹을 사용하려고 시도할 때도 유사한 메시지가 보고되어야 합니다. 예를 들면:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="o">*</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="o">*</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
    <span class="o">^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="n">a</span> <span class="n">starred</span> <span class="n">expression</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="n">key</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="o">*</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="o">*</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
    <span class="o">^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="n">a</span> <span class="n">starred</span> <span class="n">expression</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="n">value</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="o">**</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="o">**</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
    <span class="o">^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="nb">dict</span> <span class="n">unpacking</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="n">key</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="o">**</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="o">**</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">items</span><span class="p">}</span>
    <span class="o">^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="nb">dict</span> <span class="n">unpacking</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">dictionary</span> <span class="n">value</span>
</code></pre></div></div>

<p>다른 기존 오류 메시지의 문구도 새 구문의 존재를 설명하고, 또는 언패킹과 일반적으로 관련된 모호하거나 혼란스러운 경우(특히 <code class="language-plaintext highlighter-rouge">Further Generalizing Unpacking Operators</code>에서 언급된 경우)를 명확히 하기 위해 조정되어야 합니다. 예를 들면:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="o">*</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span><span class="p">]</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">[</span><span class="o">*</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span><span class="p">]</span>
    <span class="o">^^^^^^^^^^^^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">starred</span> <span class="n">expression</span><span class="p">.</span> <span class="n">Did</span> <span class="n">you</span> <span class="n">forget</span> <span class="n">to</span> <span class="n">wrap</span> <span class="n">the</span> <span class="n">conditional</span> <span class="n">expression</span> <span class="ow">in</span> <span class="n">parentheses</span><span class="err">?</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="o">**</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="o">**</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span><span class="p">}</span>
    <span class="o">^^^^^^^^^^^^^^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">double</span> <span class="n">starred</span> <span class="n">expression</span><span class="p">.</span> <span class="n">Did</span> <span class="n">you</span> <span class="n">forget</span> <span class="n">to</span> <span class="n">wrap</span> <span class="n">the</span> <span class="n">conditional</span> <span class="n">expression</span> <span class="ow">in</span> <span class="n">parentheses</span><span class="err">?</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">*</span><span class="n">y</span><span class="p">]</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">[</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">*</span><span class="n">y</span><span class="p">]</span>
    <span class="o">^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">unpack</span> <span class="n">only</span> <span class="n">part</span> <span class="n">of</span> <span class="n">a</span> <span class="n">conditional</span> <span class="n">expression</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">**</span><span class="n">y</span><span class="p">}</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">{</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="k">else</span> <span class="o">**</span><span class="n">y</span><span class="p">}</span>
    <span class="o">^^</span>
<span class="nb">SyntaxError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">use</span> <span class="nb">dict</span> <span class="n">unpacking</span> <span class="n">on</span> <span class="n">only</span> <span class="n">part</span> <span class="n">of</span> <span class="n">a</span> <span class="n">conditional</span> <span class="n">expression</span>
</code></pre></div></div>

<h2 id="참조-구현-reference-implementation">참조 구현 (Reference Implementation)</h2>

<p>참조 구현은 이 기능을 구현하며, 초안 문서와 추가 테스트 케이스를 포함합니다.</p>

<h2 id="하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</h2>

<p>현재 구문적으로 유효한 모든 Comprehension의 동작은 이 변경의 영향을 받지 않으므로, 하위 호환성 문제가 많지는 않을 것으로 예상됩니다. 원칙적으로 이 변경은 Comprehension에서 언패킹 연산을 시도하면 <code class="language-plaintext highlighter-rouge">SyntaxError</code>가 발생한다는 사실에 의존하는 코드, 또는 대체되는 이전 오류 메시지의 특정 문구에 의존하는 코드에만 영향을 미칠 것입니다. 이는 드물 것으로 예상됩니다.</p>

<p>하나의 관련 우려는 미래에 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 의미론을 변경하여 언패킹 시 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하도록(언패킹되는 <code class="language-plaintext highlighter-rouge">generator</code>에게 위임하도록) 결정하는 경우입니다. 이는 <code class="language-plaintext highlighter-rouge">.asend()</code>, <code class="language-plaintext highlighter-rouge">.athrow()</code>, <code class="language-plaintext highlighter-rouge">.aclose()</code>와 함께 사용될 때 결과 <code class="language-plaintext highlighter-rouge">generator</code>의 동작에 영향을 미치므로 하위 호환성이 없을 것입니다. 그러나 하위 호환성이 없음에도 불구하고, 이러한 변경은 이 제안 하에서 특별히 유용하지 않은 구조의 동작에만 영향을 미치므로 큰 영향을 미치지 않을 가능성이 높습니다. (<code class="language-plaintext highlighter-rouge">Alternative Generator Expression Semantics</code> 섹션에서 더 자세한 논의를 참조하십시오).</p>

<h2 id="코드-예시-code-examples">코드 예시 (Code Examples)</h2>

<p>이 섹션은 표준 라이브러리의 작은 코드 조각들을 어떻게 이 새로운 구문을 사용하여 간결성과 가독성을 향상시키도록 다시 작성할 수 있는지 보여주는 예시를 제시합니다. 참조 구현은 이러한 대체가 이루어진 후에도 모든 테스트를 통과합니다.</p>

<h3 id="명시적-루프-대체-replacing-explicit-loops">명시적 루프 대체 (Replacing Explicit Loops)</h3>

<p>명시적 루프를 대체하면 여러 줄이 한 줄로 압축되고, 보조 변수를 정의하고 참조할 필요가 없어집니다.</p>

<p><code class="language-plaintext highlighter-rouge">email/_header_value_parser.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">self</span><span class="p">:</span>
    <span class="n">comments</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">token</span><span class="p">.</span><span class="n">comments</span><span class="p">)</span>
<span class="k">return</span> <span class="n">comments</span>

<span class="c1"># 개선:
</span><span class="k">return</span> <span class="p">[</span><span class="o">*</span><span class="n">token</span><span class="p">.</span><span class="n">comments</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">self</span><span class="p">]</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">shutil.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">ignored_names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
    <span class="n">ignored_names</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">fnmatch</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">pattern</span><span class="p">))</span>
<span class="k">return</span> <span class="nf">set</span><span class="p">(</span><span class="n">ignored_names</span><span class="p">)</span>

<span class="c1"># 개선:
</span><span class="k">return</span> <span class="p">{</span><span class="o">*</span><span class="n">fnmatch</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span> <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">http/cookiejar.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">cookies</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">_cookies</span><span class="p">.</span><span class="nf">keys</span><span class="p">():</span>
    <span class="n">cookies</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="nf">_cookies_for_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">request</span><span class="p">))</span>
<span class="k">return</span> <span class="n">cookies</span>

<span class="c1"># 개선:
</span><span class="k">return</span> <span class="p">[</span>
    <span class="o">*</span><span class="n">self</span><span class="p">.</span><span class="nf">_cookies_for_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">_cookies</span><span class="p">.</span><span class="nf">keys</span><span class="p">()</span>
<span class="p">]</span>
</code></pre></div></div>

<h3 id="from_iterable-및-관련-함수-대체-replacing-from_iterable-and-friends"><code class="language-plaintext highlighter-rouge">from_iterable</code> 및 관련 함수 대체 (Replacing from_iterable and Friends)</h3>

<p>항상 올바른 선택은 아니지만, <code class="language-plaintext highlighter-rouge">itertools.chain.from_iterable</code> 및 <code class="language-plaintext highlighter-rouge">map</code>을 대체하면 추가적인 간접 레벨을 피할 수 있어, Comprehension이 <code class="language-plaintext highlighter-rouge">map</code>/<code class="language-plaintext highlighter-rouge">filter</code>보다 가독성이 좋다는 일반적인 통념을 따르는 코드가 됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">dataclasses.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">inherited_slots</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span>
    <span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="n">_get_slots</span><span class="p">,</span> <span class="n">cls</span><span class="p">.</span><span class="n">__mro__</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
<span class="p">)</span>

<span class="c1"># 개선:
</span><span class="n">inherited_slots</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="nf">_get_slots</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cls</span><span class="p">.</span><span class="n">__mro__</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">importlib/metadata/__init__.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="k">return</span> <span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span>
    <span class="n">path</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="n">prepared</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="nf">map</span><span class="p">(</span><span class="n">FastPath</span><span class="p">,</span> <span class="n">paths</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># 개선:
</span><span class="nf">return </span><span class="p">(</span><span class="o">*</span><span class="nc">FastPath</span><span class="p">(</span><span class="n">path</span><span class="p">).</span><span class="nf">search</span><span class="p">(</span><span class="n">prepared</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">collections/__init__.py</code> (<code class="language-plaintext highlighter-rouge">Counter</code> 클래스)에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="k">return</span> <span class="n">_chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="nf">_starmap</span><span class="p">(</span><span class="n">_repeat</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="nf">items</span><span class="p">()))</span>

<span class="c1"># 개선:
</span><span class="nf">return </span><span class="p">(</span><span class="o">*</span><span class="nf">_repeat</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="nf">items</span><span class="p">())</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">zipfile/_path/__init__.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">parents</span> <span class="o">=</span> <span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="n">_parents</span><span class="p">,</span> <span class="n">names</span><span class="p">))</span>

<span class="c1"># 개선:
</span><span class="n">parents</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="nf">_parents</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">_pyrepl/_module_completer.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">search_locations</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="n">chain</span><span class="p">.</span><span class="nf">from_iterable</span><span class="p">(</span>
    <span class="nf">getattr</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="sh">'</span><span class="s">submodule_search_locations</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])</span> <span class="k">for</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">specs</span> <span class="k">if</span> <span class="n">spec</span>
<span class="p">))</span>

<span class="c1"># 개선:
</span><span class="n">search_locations</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">*</span><span class="nf">getattr</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="sh">'</span><span class="s">submodule_search_locations</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])</span> <span class="k">for</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">specs</span> <span class="k">if</span> <span class="n">spec</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="comprehension-내-이중-루프-대체-replacing-double-loops-in-comprehensions">Comprehension 내 이중 루프 대체 (Replacing Double Loops in Comprehensions)</h3>

<p>Comprehension 내 이중 루프를 대체하면 보조 변수를 정의하고 참조할 필요가 없어 혼란을 줄일 수 있습니다.</p>

<p><code class="language-plaintext highlighter-rouge">importlib/resources/readers.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">children</span> <span class="o">=</span> <span class="p">(</span><span class="n">child</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">_paths</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">path</span><span class="p">.</span><span class="nf">iterdir</span><span class="p">())</span>

<span class="c1"># 개선:
</span><span class="n">children</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">path</span><span class="p">.</span><span class="nf">iterdir</span><span class="p">()</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">_paths</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">asyncio/base_events.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">exc</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">exceptions</span> <span class="k">for</span> <span class="n">exc</span> <span class="ow">in</span> <span class="n">sub</span><span class="p">]</span>

<span class="c1"># 개선:
</span><span class="n">exceptions</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">sub</span> <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">exceptions</span><span class="p">]</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">_weakrefset.py</code>에서:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 현재:
</span><span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="nf">__class__</span><span class="p">(</span><span class="n">e</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>

<span class="c1"># 개선:
</span><span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="nf">__class__</span><span class="p">(</span><span class="o">*</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="교육-방법-how-to-teach-this">교육 방법 (How to Teach This)</h2>

<p>현재 Comprehension의 개념을 소개하는 일반적인 방법(Python 튜토리얼에서 사용됨)은 동등한 코드를 보여주는 것입니다. 예를 들어, 이 방법은 <code class="language-plaintext highlighter-rouge">out = [expr for x in it]</code>가 다음 코드와 동일하다고 말할 것입니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></div>

<p>이 접근 방식을 취하면 <code class="language-plaintext highlighter-rouge">out = [*expr for x in it]</code>를 대신 다음 코드와 동일하다고 소개할 수 있습니다 (<code class="language-plaintext highlighter-rouge">append</code> 대신 <code class="language-plaintext highlighter-rouge">extend</code> 사용):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></div>

<p>언패킹을 사용하는 <code class="language-plaintext highlighter-rouge">set</code> 및 <code class="language-plaintext highlighter-rouge">dict comprehension</code>도 유사한 비유를 통해 소개될 수 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># out = {expr for x in it} 와 동일
</span><span class="n">out</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

<span class="c1"># out = {*expr for x in it} 와 동일
</span><span class="n">out</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>

<span class="c1"># out = {k_expr: v_expr for x in it} 와 동일
</span><span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">[</span><span class="n">k_expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_expr</span>

<span class="c1"># out = {**expr for x in it} 와 동일 (expr이 **로 언패킹될 수 있는 매핑으로 평가되는 경우)
</span><span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div></div>

<p>그리고 언패킹을 포함하는 <code class="language-plaintext highlighter-rouge">generator expression</code>의 동작을 설명하기 위해 유사한 접근 방식을 취할 수 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># g = (expr for x in it) 와 동일
</span><span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">expr</span>
<span class="n">g</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">()</span>

<span class="c1"># g = (*expr for x in it) 와 동일
</span><span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">expr</span>
<span class="n">g</span> <span class="o">=</span> <span class="nf">generator</span><span class="p">()</span>
</code></pre></div></div>

<p>이러한 특정 예시들로부터, 별표가 없는 Comprehension/genexp가 컬렉션에 단일 요소를 추가하는 연산자를 사용하는 모든 곳에서, 별표가 있는 버전은 대신 해당 컬렉션에 여러 요소를 추가하는 연산자를 사용할 것이라는 아이디어로 일반화할 수 있습니다.</p>

<p>대안으로, 두 아이디어를 별개로 생각할 필요 없이, 새로운 구문을 통해 <code class="language-plaintext highlighter-rouge">out = [...x... for x in it]</code>를 다음 코드와 동일하다고 생각할 수 있습니다 (여기서 <code class="language-plaintext highlighter-rouge">...x...</code>는 임의의 코드를 나타냅니다), <code class="language-plaintext highlighter-rouge">...x...</code>가 <code class="language-plaintext highlighter-rouge">*</code>를 사용하는지 여부와 관계없이:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">extend</span><span class="p">([...</span><span class="n">x</span><span class="p">...])</span>
</code></pre></div></div>

<p>마찬가지로, <code class="language-plaintext highlighter-rouge">out = {...x... for x in it}</code>를 다음 코드와 동일하다고 생각할 수 있습니다. <code class="language-plaintext highlighter-rouge">...x...</code>가 <code class="language-plaintext highlighter-rouge">*</code> 또는 <code class="language-plaintext highlighter-rouge">**</code> 또는 <code class="language-plaintext highlighter-rouge">:</code>를 사용하는지 여부와 관계없이:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span> <span class="c1"># 또는 out = {}
</span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
    <span class="n">out</span><span class="p">.</span><span class="nf">update</span><span class="p">({...</span><span class="n">x</span><span class="p">...})</span>
</code></pre></div></div>

<p>이러한 예시는 Comprehension이 있는 버전과 없는 버전 모두에서 동일한 출력을 생성한다는 의미에서 동등하지만, Comprehension이 없는 버전은 각 <code class="language-plaintext highlighter-rouge">extend</code> 또는 <code class="language-plaintext highlighter-rouge">update</code> 전에 새로운 <code class="language-plaintext highlighter-rouge">list</code>/<code class="language-plaintext highlighter-rouge">set</code>/<code class="language-plaintext highlighter-rouge">dictionary</code>를 만들기 때문에 약간 덜 효율적입니다. 이는 Comprehension을 사용하는 버전에서는 불필요합니다.</p>

<h2 id="거부된-대안-제안-rejected-alternative-proposals">거부된 대안 제안 (Rejected Alternative Proposals)</h2>

<p>위 명세에 대해 생각할 때 주된 목표는 언패킹 및 Comprehension / <code class="language-plaintext highlighter-rouge">generator expression</code>에 대한 기존 규범과의 일관성이었습니다. 이를 해석하는 한 가지 방법은 기존 문법 및 코드 생성에 가능한 가장 작은 변경 사항만 요구하도록 명세를 작성하여, 기존 코드가 주변 의미론을 형성하도록 하는 것이 목표였다는 것입니다.</p>

<p>아래에서는 논의에서 제기되었지만 이 제안에 포함되지 않은 일반적인 우려/대안 제안 중 일부를 논의합니다.</p>

<h3 id="함수-인수로-사용되는-starred-generator-starred-generators-as-function-arguments">함수 인수로 사용되는 Starred Generator (Starred Generators as Function Arguments)</h3>

<p>여러 번 제기된 일반적인 우려(위에서 링크된 논의 스레드뿐만 아니라 이와 동일한 아이디어에 대한 이전 논의에서도)는 <code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>와 같이 별표가 붙은 <code class="language-plaintext highlighter-rouge">generator</code>를 함수의 단일 인수로 전달할 때 발생할 수 있는 구문적 모호성입니다. 원래 PEP 448에서는 이 모호성이 제안의 일부로 유사한 일반화를 포함하지 않은 이유로 언급되었습니다.</p>

<p>이 제안은 <code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>가 <code class="language-plaintext highlighter-rouge">f((*x for x in y))</code>로 해석되어야 하며, 결과 <code class="language-plaintext highlighter-rouge">generator</code>에 대한 추가 언패킹을 시도해서는 안 된다고 제안합니다. 그러나 논의에서는 몇 가지 대안이 제시되었습니다(및/또는 과거에 제시된 바 있음), 예를 들어:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>를 <code class="language-plaintext highlighter-rouge">f(*(x for x in y))</code>로 해석하거나,</li>
  <li><code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>를 <code class="language-plaintext highlighter-rouge">f(*(*x for x in y))</code>로 해석하거나,</li>
  <li>이 제안의 다른 측면이 수락되더라도 <code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>에 대해 계속 <code class="language-plaintext highlighter-rouge">SyntaxError</code>를 발생시키는 것입니다.</li>
</ul>

<p>이러한 대안보다 이 제안을 선호하는 이유는 <code class="language-plaintext highlighter-rouge">generator expression</code> 주변의 기존 구두점 규칙을 유지하기 위함입니다. 현재 일반적인 규칙은 <code class="language-plaintext highlighter-rouge">generator expression</code>이 함수의 단일 인수로 제공되는 경우를 제외하고는 괄호로 묶여야 한다는 것입니다. 이 제안은 더 많은 종류의 <code class="language-plaintext highlighter-rouge">generator expression</code>을 허용하더라도 이 규칙을 유지할 것을 제안합니다. 이 옵션은 언패킹을 사용하는 Comprehension 및 <code class="language-plaintext highlighter-rouge">generator expression</code>과 그렇지 않은 것들 사이에 완전한 대칭을 유지합니다.</p>

<p>현재 우리는 다음 규칙을 가지고 있습니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">f</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">])</span>   <span class="c1"># 단일 list 전달
</span><span class="nf">f</span><span class="p">({</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">})</span>   <span class="c1"># 단일 set 전달
</span><span class="nf">f</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">)</span>     <span class="c1"># 단일 generator 전달 (genexp 주변에 추가 괄호 불필요)
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">])</span>  <span class="c1"># list의 요소들을 개별적으로 전달
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">{</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">})</span>  <span class="c1"># set의 요소들을 개별적으로 전달
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">))</span> <span class="c1"># generator의 요소들을 개별적으로 전달 (괄호 필요)
</span></code></pre></div></div>

<p>이 제안은 Comprehension이 언패킹을 사용하는 경우에도 이러한 규칙을 유지하기로 선택합니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">f</span><span class="p">([</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">])</span>   <span class="c1"># 단일 list 전달
</span><span class="nf">f</span><span class="p">({</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">})</span>   <span class="c1"># 단일 set 전달
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">)</span>     <span class="c1"># 단일 generator 전달 (genexp 주변에 추가 괄호 불필요)
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">])</span>  <span class="c1"># list의 요소들을 개별적으로 전달
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">{</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">})</span>  <span class="c1"># set의 요소들을 개별적으로 전달
</span><span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span><span class="p">))</span> <span class="c1"># generator의 요소들을 개별적으로 전달 (괄호 필요)
</span></code></pre></div></div>

<h3 id="언패킹-연산자-추가-일반화-further-generalizing-unpacking-operators">언패킹 연산자 추가 일반화 (Further Generalizing Unpacking Operators)</h3>

<p>논의에서 나온 또 다른 제안은 Comprehension 내에서 표현식을 언패킹하는 것을 허용하는 것 이상으로 <code class="language-plaintext highlighter-rouge">*</code>를 더욱 일반화하는 것이었습니다. 이 확장의 두 가지 주요 유형이 고려되었습니다:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>를 새로운 종류의 <code class="language-plaintext highlighter-rouge">Unpackable</code> 객체(또는 유사한 것)를 생성하는 진정한 단항 연산자로 만들어서, Comprehension이 이를 언패킹하여 처리할 수 있지만 다른 컨텍스트에서도 사용될 수 있도록 하는 것; 또는</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>를 이 제안에서 허용되는 다른 곳(표현식 리스트, Comprehension, <code class="language-plaintext highlighter-rouge">generator expression</code>, 인자 리스트)에서만 허용하되, Comprehension 내의 서브 표현식에서도 사용할 수 있도록 허용하여, 예를 들어 일부 iterable 객체와 일부 non-iterable 객체를 포함하는 리스트를 평탄화하는 방법으로 다음을 허용하는 것:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">*</span><span class="n">x</span> <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="k">else</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">4</span><span class="p">]]</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>이러한 변형은 (이해하고 구현하기에) 실질적으로 더 복잡하고 유용성이 미미하다고 간주되어 이 PEP에 포함되지 않았습니다. 따라서 이러한 형식은 계속 <code class="language-plaintext highlighter-rouge">SyntaxError</code>를 발생시켜야 하지만, 위에서 설명한 새로운 오류 메시지와 함께 제공되어야 합니다. 그러나 미래 제안을 위한 고려 사항으로 배제되어서는 안 됩니다.</p>

<h3 id="대체-generator-expression-의미론-alternative-generator-expression-semantics">대체 Generator Expression 의미론 (Alternative Generator Expression Semantics)</h3>

<p>또 다른 논의 지점은 <code class="language-plaintext highlighter-rouge">generator expression</code>의 언패킹 의미론, 특히 비동기 <code class="language-plaintext highlighter-rouge">generator</code>가 <code class="language-plaintext highlighter-rouge">yield from</code>을 지원하지 않는다는 점을 고려할 때 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 의미론 간의 관계에 중점을 두었습니다 (PEP 525의 <code class="language-plaintext highlighter-rouge">Asynchronous yield from</code> 섹션 참조).</p>

<p>핵심 질문은 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>이 언패킹할 때 명시적인 루프 대신 <code class="language-plaintext highlighter-rouge">yield from</code>(또는 동등한 것)을 사용해야 하는지에 대한 것이었습니다. 이러한 옵션 간의 주요 차이점은 결과 <code class="language-plaintext highlighter-rouge">generator</code>가 언패킹되는 객체에 위임하는지 여부입니다. 이는 언패킹되는 객체 자체가 <code class="language-plaintext highlighter-rouge">generator</code>인 경우 <code class="language-plaintext highlighter-rouge">.send()/.asend()</code>, <code class="language-plaintext highlighter-rouge">.throw()/.athrow()</code>, <code class="language-plaintext highlighter-rouge">.close()/.aclose()</code>와 함께 사용될 때 이러한 <code class="language-plaintext highlighter-rouge">generator expression</code>의 동작에 영향을 미칠 것입니다. 이러한 옵션 간의 차이점은 <code class="language-plaintext highlighter-rouge">Appendix: Semantics of Generator Delegation</code>에 요약되어 있습니다.</p>

<p>몇 가지 합리적인 옵션이 고려되었으며, Discourse 스레드의 투표에서 명확한 승자는 없었습니다. 위에서 설명한 제안 외에 다음도 고려되었습니다:</p>

<ul>
  <li>
    <p>동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code> 모두에 명시적 루프를 사용하는 것.</p>

    <p>이 전략은 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code> 사이에 대칭성을 가져왔겠지만, 동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 경우 위임을 허용하지 않아 잠재적으로 유용한 도구를 막았을 것입니다. 이 접근 방식의 한 가지 특정 우려는 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator</code> 간의 비대칭성을 도입하는 것이지만, 이러한 비대칭성이 이미 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator</code> 사이에 더 일반적으로 존재한다는 사실로 인해 이 우려는 완화됩니다.</p>
  </li>
  <li>
    <p>동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 언패킹에 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하고, 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 언패킹에 <code class="language-plaintext highlighter-rouge">yield from</code>의 동작을 모방하는 것.</p>

    <p>이 전략은 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator</code>의 언패킹 동작을 대칭적으로 만들겠지만, 더 복잡할 것이며, 그 비용이 이점만큼 가치가 없을 수도 있습니다. 따라서 이 PEP는 언패킹 연산자를 사용하는 <code class="language-plaintext highlighter-rouge">generator expression</code>이 <code class="language-plaintext highlighter-rouge">yield from</code>이 비동기 <code class="language-plaintext highlighter-rouge">generator</code>에서 더 일반적으로 지원될 때까지 <code class="language-plaintext highlighter-rouge">yield from</code>과 유사한 의미론을 사용해서는 안 된다고 제안합니다.</p>
  </li>
  <li>
    <p>동기 <code class="language-plaintext highlighter-rouge">generator expression</code>의 언패킹에 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하고, 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>이 <code class="language-plaintext highlighter-rouge">yield from</code>을 지원할 때까지 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>에서의 언패킹을 금지하는 것.</p>

    <p>이 전략은 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>이 미래에 <code class="language-plaintext highlighter-rouge">yield from</code>에 대한 지원을 얻게 된다면, 그때 내려지는 모든 결정이 완전히 하위 호환성을 갖도록 보장함으로써 마찰을 줄일 수 있을 것입니다. 그러나 그 컨텍스트에서 언패킹의 유용성은 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>이 <code class="language-plaintext highlighter-rouge">yield from</code>에 대한 지원을 받는 경우 미래에 최소한의 침해적인 하위 비호환성 변경의 잠재적인 단점보다 클 것으로 보입니다.</p>
  </li>
  <li>
    <p>모든 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 언패킹을 금지하는 것.</p>

    <p>이는 두 경우 사이에 대칭성을 유지하겠지만, 매우 표현적인 형태를 잃는 단점이 있습니다.</p>
  </li>
</ul>

<p>이러한 각 옵션(이 PEP에 제시된 옵션 포함)은 장점과 단점을 가지고 있으며, 모든 면에서 명확하게 우월한 옵션은 없습니다. <code class="language-plaintext highlighter-rouge">Semantics: Generator Expressions</code>에 제안된 의미론은 동기 및 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code> 모두에서 언패킹이 현재 동등한 <code class="language-plaintext highlighter-rouge">generator</code>를 작성하는 일반적인 방법을 반영하는 합리적인 절충안을 나타냅니다. 또한, 이러한 미묘한 차이는 일반적인 사용 사례에 큰 영향을 미치지 않을 가능성이 높습니다 (예를 들어, 단순 컬렉션을 결합하는 가장 흔한 사용 사례에는 차이가 없습니다).</p>

<p>위에서 제안된 바와 같이, 이 결정은 비동기 <code class="language-plaintext highlighter-rouge">generator</code>가 미래에 <code class="language-plaintext highlighter-rouge">yield from</code>에 대한 지원을 받을 경우 재검토되어야 하며, 이 경우 비동기 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 언패킹의 의미론을 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하도록 조정하는 것을 고려해야 합니다.</p>

<h2 id="우려-사항-및-단점-concerns-and-disadvantages">우려 사항 및 단점 (Concerns and Disadvantages)</h2>

<p>논의 스레드에서 전반적인 합의는 이 구문이 명확하고 직관적이라는 것이었지만, 몇 가지 우려 사항과 잠재적인 단점도 제기되었습니다. 이 섹션은 이러한 우려 사항을 요약하는 것을 목표로 합니다.</p>

<ul>
  <li><strong>기존 대안과의 중복:</strong> 제안된 구문이 더 명확하고 간결하다고 주장할 수 있지만, Python에는 이미 동일한 작업을 수행하는 여러 가지 방법이 있습니다.</li>
  <li><strong>함수 호출 모호성:</strong> <code class="language-plaintext highlighter-rouge">f(*x for x in y)</code>와 같은 표현식은 <code class="language-plaintext highlighter-rouge">generator</code>를 언패킹하려는 것인지 또는 단일 인수로 전달하려는 것인지가 명확하지 않아 처음에는 모호하게 보일 수 있습니다. 이 제안은 이 형식을 <code class="language-plaintext highlighter-rouge">f((*x for x in y))</code>와 동일하게 처리하여 기존 규칙을 유지하지만, 이 동등성이 즉시 명확하지 않을 수 있습니다.</li>
  <li><strong>과도한 사용 또는 오용 가능성:</strong> Comprehension에서 언패킹을 복잡하게 사용하면 명시적 루프에서 더 명확할 수 있는 로직을 모호하게 만들 수 있습니다. 이는 Comprehension 전반에 걸쳐 이미 우려되는 사항이지만, <code class="language-plaintext highlighter-rouge">*</code> 및 <code class="language-plaintext highlighter-rouge">**</code>의 추가는 특히 복잡한 사용을 한눈에 읽고 이해하기 훨씬 더 어렵게 만들 수 있습니다. 예를 들어, 이러한 상황이 드물기는 하지만, 여러 방식으로 언패킹을 사용하는 Comprehension은 무엇이 언제 언패킹되는지 알기 어렵게 만들 수 있습니다: <code class="language-plaintext highlighter-rouge">f(*(*x for *x, _ in list_of_lists))</code>.</li>
  <li><strong>스코프 제한의 불명확성:</strong> 이 제안은 언패킹을 Comprehension 표현식의 최상위 레벨로 제한하지만, 일부 사용자는 <code class="language-plaintext highlighter-rouge">Further Generalizing Unpacking Operators</code>에서 논의된 바와 같이 언패킹 연산자가 추가로 일반화될 것이라고 예상할 수 있습니다.</li>
  <li><strong>외부 도구에 미치는 영향:</strong> Python 구문의 다른 변경 사항과 마찬가지로, 이 변경 사항은 코드 포매터, 린터, 타입 체커 등의 유지보수자에게 새로운 구문이 지원되도록 작업을 생성할 것입니다.</li>
</ul>

<h2 id="부록-다른-언어-appendix-other-languages">부록: 다른 언어 (Appendix: Other Languages)</h2>

<p>꽤 많은 다른 언어들이 Python에 이미 있는 것과 유사한 구문으로 이러한 종류의 평탄화(flattening)를 지원하지만, Comprehension 내에서 언패킹 구문을 사용하는 것에 대한 지원은 드뭅니다. 이 섹션은 몇 가지 다른 언어에서 유사한 구문에 대한 지원을 간략하게 요약합니다.</p>

<p>Comprehension을 지원하는 많은 언어들은 이중 루프를 지원합니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># python
</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">xs</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]</span>

<span class="o">--</span> <span class="n">haskell</span>
<span class="p">[</span><span class="n">x</span> <span class="o">|</span> <span class="n">xs</span> <span class="o">&lt;-</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]],</span> <span class="n">x</span> <span class="o">&lt;-</span> <span class="n">xs</span> <span class="o">++</span> <span class="n">xs</span><span class="p">]</span>

<span class="c1"># julia
</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">xs</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">xs</span><span class="p">;</span> <span class="n">xs</span><span class="p">]]</span>

<span class="p">;</span> <span class="n">clojure</span>
<span class="p">(</span><span class="k">for</span> <span class="p">[</span><span class="n">xs</span> <span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span> <span class="p">[]</span> <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span><span class="p">]]</span> <span class="nf">x </span><span class="p">(</span><span class="n">concat</span> <span class="n">xs</span> <span class="n">xs</span><span class="p">)]</span> <span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<p>몇몇 다른 언어들(Comprehension이 없는 언어들도)은 중첩된 구조의 평탄화를 지원하기 위해 내장 함수나 메서드를 통해 이러한 연산을 지원합니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># python
</span><span class="nf">list</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="nf">chain</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">xs</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">xs</span> <span class="ow">in</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]])))</span>

<span class="o">//</span> <span class="n">javascript</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]].</span><span class="nf">flatMap</span><span class="p">(</span><span class="n">xs</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="n">xs</span><span class="p">,</span> <span class="p">...</span><span class="n">xs</span><span class="p">])</span>

<span class="o">--</span> <span class="n">haskell</span>
<span class="nf">concat </span><span class="p">(</span><span class="nf">map </span><span class="p">(</span>\<span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">++</span> <span class="n">x</span><span class="p">)</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>

<span class="c1"># ruby
</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]].</span><span class="n">flat_map</span> <span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span> <span class="o">*</span> <span class="mi">2</span><span class="p">}</span>
</code></pre></div></div>

<p>그러나 Comprehension과 언패킹을 모두 지원하는 언어는 Comprehension 내에서 언패킹을 허용하는 경향이 없습니다. 예를 들어, Julia에서 다음 표현식은 현재 구문 오류로 이어집니다:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="x">[</span><span class="n">xs</span><span class="o">...</span> <span class="k">for</span> <span class="n">xs</span> <span class="k">in</span> <span class="x">[[</span><span class="mi">1</span><span class="x">,</span><span class="mi">2</span><span class="x">,</span><span class="mi">3</span><span class="x">],</span> <span class="x">[],</span> <span class="x">[</span><span class="mi">4</span><span class="x">,</span><span class="mi">5</span><span class="x">]]]</span>
</code></pre></div></div>

<p>한 가지 반례로, Civet에는 최근 유사한 구문이 추가되었습니다. 예를 들어, 다음은 Civet의 유효한 Comprehension이며, JavaScript의 <code class="language-plaintext highlighter-rouge">...</code> 구문을 사용하여 언패킹을 활용합니다:</p>

<div class="language-coffeescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="nx">xs</span> <span class="o">of</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span> <span class="k">then</span> <span class="p">...(</span><span class="nx">xs</span><span class="o">++</span><span class="nx">xs</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="부록-generator-위임의-의미론-appendix-semantics-of-generator-delegation">부록: Generator 위임의 의미론 (Appendix: Semantics of Generator Delegation)</h2>

<p>위에서 설명된 의미론에 대한 일반적인 질문 중 하나는 <code class="language-plaintext highlighter-rouge">generator expression</code> 내에서 언패킹할 때 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하는 것과 명시적인 루프를 사용하는 것의 차이점에 관한 것이었습니다. 이는 <code class="language-plaintext highlighter-rouge">generator</code>의 상당히 고급 기능이므로, 이 부록은 <code class="language-plaintext highlighter-rouge">yield from</code>을 사용하는 <code class="language-plaintext highlighter-rouge">generator</code>와 명시적인 루프를 사용하는 <code class="language-plaintext highlighter-rouge">generator</code> 간의 몇 가지 주요 차이점을 요약합니다.</p>

<h3 id="기본-동작-basic-behavior">기본 동작 (Basic Behavior)</h3>

<p>값에 대한 단순한 반복의 경우, 이는 <code class="language-plaintext highlighter-rouge">generator expression</code>에서 언패킹의 가장 일반적인 용도가 될 것으로 예상되며, 두 접근 방식 모두 동일한 결과를 생성합니다:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">yield_from</span><span class="p">(</span><span class="n">iterables</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">iterable</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">:</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">iterable</span>

<span class="k">def</span> <span class="nf">explicit_loop</span><span class="p">(</span><span class="n">iterables</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">iterable</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">item</span>

<span class="c1"># 두 가지 모두 동일한 값 시퀀스를 생성합니다.
</span><span class="n">x</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">yield_from</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]))</span>
<span class="n">y</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="nf">explicit_loop</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span> <span class="c1"># True 출력
</span></code></pre></div></div>

<h3 id="고급-generator-프로토콜-차이-advanced-generator-protocol-differences">고급 Generator 프로토콜 차이 (Advanced Generator Protocol Differences)</h3>

<p>차이점은 고급 <code class="language-plaintext highlighter-rouge">generator</code> 프로토콜 메서드인 <code class="language-plaintext highlighter-rouge">.send()</code>, <code class="language-plaintext highlighter-rouge">.throw()</code>, <code class="language-plaintext highlighter-rouge">.close()</code>를 사용할 때, 그리고 서브 iterable이 단순 시퀀스가 아닌 <code class="language-plaintext highlighter-rouge">generator</code> 자체일 때 나타납니다. 이러한 경우, <code class="language-plaintext highlighter-rouge">yield from</code> 버전은 관련 신호가 서브 <code class="language-plaintext highlighter-rouge">generator</code>에 도달하게 하지만, 명시적 루프가 있는 버전은 그렇지 않습니다.</p>

<h4 id="send를-사용한-위임-delegation-with-send"><code class="language-plaintext highlighter-rouge">.send()</code>를 사용한 위임 (Delegation with .send())</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sub_generator</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="k">yield</span> <span class="sh">"</span><span class="s">first</span><span class="sh">"</span>
    <span class="k">yield</span> <span class="sa">f</span><span class="sh">"</span><span class="s">received: </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="sh">"</span>
    <span class="k">yield</span> <span class="sh">"</span><span class="s">last</span><span class="sh">"</span>

<span class="k">def</span> <span class="nf">yield_from</span><span class="p">():</span>
    <span class="k">yield</span> <span class="k">from</span> <span class="nf">sub_generator</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">explicit_loop</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nf">sub_generator</span><span class="p">():</span>
        <span class="k">yield</span> <span class="n">item</span>

<span class="c1"># yield from을 사용하면 값이 서브-generator로 전달됩니다.
</span><span class="n">gen1</span> <span class="o">=</span> <span class="nf">yield_from</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen1</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="nf">print</span><span class="p">(</span><span class="n">gen1</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">hello</span><span class="sh">"</span><span class="p">))</span> <span class="c1"># "received: hello" 출력
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen1</span><span class="p">))</span> <span class="c1"># "last" 출력
</span>
<span class="c1"># 명시적 루프를 사용하면 .send()가 외부 generator에만 영향을 미칩니다.
# 값은 서브-generator에 도달하지 않습니다.
</span><span class="n">gen2</span> <span class="o">=</span> <span class="nf">explicit_loop</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen2</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="nf">print</span><span class="p">(</span><span class="n">gen2</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">hello</span><span class="sh">"</span><span class="p">))</span> <span class="c1"># "received: None" 출력 (서브-generator는 "hello" 대신 None을 받습니다)
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen2</span><span class="p">))</span> <span class="c1"># "last" 출력
</span></code></pre></div></div>

<h4 id="throw를-사용한-예외-처리-exception-handling-with-throw"><code class="language-plaintext highlighter-rouge">.throw()</code>를 사용한 예외 처리 (Exception Handling with .throw())</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sub_generator_with_exception_handling</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="sh">"</span><span class="s">first</span><span class="sh">"</span>
        <span class="k">yield</span> <span class="sh">"</span><span class="s">second</span><span class="sh">"</span>
    <span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">yield</span> <span class="sa">f</span><span class="sh">"</span><span class="s">caught: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span>

<span class="k">def</span> <span class="nf">yield_from</span><span class="p">():</span>
    <span class="k">yield</span> <span class="k">from</span> <span class="nf">sub_generator_with_exception_handling</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">explicit_loop</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nf">sub_generator_with_exception_handling</span><span class="p">():</span>
        <span class="k">yield</span> <span class="n">item</span>

<span class="c1"># yield from을 사용하면 예외가 서브-generator로 전달됩니다.
</span><span class="n">gen1</span> <span class="o">=</span> <span class="nf">yield_from</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen1</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="nf">print</span><span class="p">(</span><span class="n">gen1</span><span class="p">.</span><span class="nf">throw</span><span class="p">(</span><span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">test</span><span class="sh">"</span><span class="p">)))</span> <span class="c1"># "caught: test" 출력
</span>
<span class="c1"># 명시적 루프를 사용하면 예외가 외부 generator에만 영향을 미칩니다.
</span><span class="n">gen2</span> <span class="o">=</span> <span class="nf">explicit_loop</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen2</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="nf">print</span><span class="p">(</span><span class="n">gen2</span><span class="p">.</span><span class="nf">throw</span><span class="p">(</span><span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">test</span><span class="sh">"</span><span class="p">)))</span> <span class="c1"># ValueError가 발생합니다. 서브-generator는 이를 보지 못합니다.
</span></code></pre></div></div>

<h4 id="close를-사용한-generator-정리-generator-cleanup-with-close"><code class="language-plaintext highlighter-rouge">.close()</code>를 사용한 Generator 정리 (Generator Cleanup with .close())</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 서브-generator에 대한 참조를 유지하여 GC가 명시적 루프 버전을 닫지 않도록 합니다.
</span><span class="n">references</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">sub_generator_with_cleanup</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">yield</span> <span class="sh">"</span><span class="s">first</span><span class="sh">"</span>
        <span class="k">yield</span> <span class="sh">"</span><span class="s">second</span><span class="sh">"</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">sub-generator received GeneratorExit</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">yield_from</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nf">sub_generator_with_cleanup</span><span class="p">()</span>
        <span class="n">references</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">g</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">outer generator received GeneratorExit</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">explicit_loop</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nf">sub_generator_with_cleanup</span><span class="p">()</span>
        <span class="n">references</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">item</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">outer generator received GeneratorExit</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># yield from을 사용하면 GeneratorExit이 서브-generator로 전달됩니다.
</span><span class="n">gen1</span> <span class="o">=</span> <span class="nf">yield_from</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen1</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="n">gen1</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span> <span class="c1"># 서브-generator를 닫은 다음 외부 generator를 닫습니다.
</span>
<span class="c1"># 명시적 루프를 사용하면 GeneratorExit이 외부 generator에만 전달됩니다.
</span><span class="n">gen2</span> <span class="o">=</span> <span class="nf">explicit_loop</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen2</span><span class="p">))</span> <span class="c1"># "first" 출력
</span><span class="n">gen2</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span> <span class="c1"># 외부 generator만 닫습니다.
</span><span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">program finished; GC will close the explicit loop subgenerator</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># 두 번째 내부 generator는 GC가 프로그램을 마칠 때 닫힙니다.
</span></code></pre></div></div>

<blockquote>
  <p>⚠️ <strong>알림:</strong> 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.</p>
</blockquote>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/tags/#python" class="page__taxonomy-item" rel="tag">Python</a><span class="sep">, </span>
    
      <a href="/tags/#translation" class="page__taxonomy-item" rel="tag">Translation</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/categories/#python" class="page__taxonomy-item" rel="tag">Python</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-09-27">September 27, 2025</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/python/pep/794/" class="pagination--pager" title="[Accepted] PEP 794 - Import Name Metadata
">Previous</a>
    
    
      <a href="/python/pep/799/" class="pagination--pager" title="[Draft] PEP 799 - A dedicatedprofilingpackage for organizing Python profiling tools
">Next</a>
    
  </nav>


    </div>

    
  </article>

</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 secrett2633. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'secrett2633/secrett2633.github.io');
    script.setAttribute('issue-term', 'pathname');
    script.setAttribute('theme', 'github-light');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
