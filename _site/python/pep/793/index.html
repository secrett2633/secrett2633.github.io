<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <style> 
      ::-webkit-scrollbar{ 
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        width: 0px;
        background-color: #626262;
        /* border-radius: 5px; */
      }

      ::-webkit-scrollbar-thumb {
        width: 0px;
        background-color: #E2E2E2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        width: 10px;
        height: 20px;
        /* background-color: rgba(190, 190, 190, 0.2); */
        background-color: #A2A2A2;
        border-radius: 5px;
      }

      ::-webkit-scrollbar-track:hover {
        width: 10px;
        /* background-color: rgba(150, 150, 150, 0.1); */
        background-color: #626262;
        border-radius: 5px;
        /* background: transparent; */
        /* border-radius: 10px; */
      }

      ::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment {
          width:0px;
          height: 0px;
          /* background-color: rgb(14, 221, 24); */
          /* border-radius: 50%; */
      }
    </style>
    
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>[Draft] PEP 793 - PyModExport: A new entry point for C extension modules | secrett2633</title>
<meta name="description" content="Python Enhancement Proposal 793: ‘PyModExport: A new entry point for C extension modules’에 대한 한국어 번역입니다.">


  <meta name="author" content="secrett2633">
  
  <meta property="article:author" content="secrett2633">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="secrett2633's blog">
<meta property="og:title" content="[Draft] PEP 793 - PyModExport: A new entry point for C extension modules">
<meta property="og:url" content="http://localhost:4000/python/pep/793/">


  <meta property="og:description" content="Python Enhancement Proposal 793: ‘PyModExport: A new entry point for C extension modules’에 대한 한국어 번역입니다.">







  <meta property="article:published_time" content="2025-09-27T14:07:12+09:00">



  <meta property="article:modified_time" content="2025-09-27T14:07:12+09:00">



  

  


<link rel="canonical" href="http://localhost:4000/python/pep/793/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "secrett2633",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="secrett2633's blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


    <link rel="icon" type="image/png" sizes="32x32" href="https://secrett2633.github.io/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://secrett2633.github.io/assets/images/favicon/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          secrett2633's blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://github.com/secrett2633">GitHub</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <!-- 2022.02.17 author content hidden -->
  <!-- <div class="author__content">
    
      <h3 class="author__name" itemprop="name">secrett2633</h3>
    
    
  </div> -->

  <div class="author__urls-wrapper">
    <!-- <button class="btn btn--inverse">Follow</button> -->
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    <!-- Backend -->
    <li>
      <span class="nav__sub-title">Backend</span>
      <hr>
      <ul>
        <li><a href="/backend/django/">Django</a></li>
        <li><a href="/backend/logging/">Logging</a></li>
      </ul>
    </li>

    <!-- Python -->
    <li>
      <span class="nav__sub-title">Python</span>
      <hr>
      <ul>
        <li><a href="/python/pep/">PEP</a></li>
      </ul>
    </li>

    <!-- AI/ML -->
    <li>
      <span class="nav__sub-title">AI/ML</span>
      <hr>
      <ul>
        <li><a href="/ai/llm/">LLM</a></li>
        <li><a href="/ai/review/">Review</a></li>
      </ul>
    </li>

    <!-- DevOps -->
    <li>
      <span class="nav__sub-title">DevOps</span>
      <hr>
      <ul>
        <li><a href="/devops/nginx/">Nginx</a></li>
        <li><a href="/devops/docker/">Docker</a></li>
        <li><a href="/devops/safeline/">SafeLine</a></li>
        <li><a href="/devops/jenkins/">Jenkins</a></li>
        <li><a href="/devops/github-actions/">GitHub Actions</a></li>
        <li><a href="/devops/aws/">AWS</a></li>
      </ul>
    </li>

    <!-- etc -->
    <li>
      <span class="nav__sub-title">etc</span>
      <hr>
      <ul>
        <li><a href="/etc/me/">Me</a></li>
        <li><a href="/etc/chrome-extension/">Chrome Extension</a></li>
      </ul>
    </li>
  </ul>
</nav>
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Draft] PEP 793 - PyModExport: A new entry point for C extension modules">
    <meta itemprop="description" content="Python Enhancement Proposal 793: ‘PyModExport: A new entry point for C extension modules’에 대한 한국어 번역입니다.">
    <meta itemprop="datePublished" content="2025-09-27T14:07:12+09:00">
    <meta itemprop="dateModified" content="2025-09-27T14:07:12+09:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">[Draft] PEP 793 - PyModExport: A new entry point for C extension modules
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        <time datetime="2025-09-27T14:07:12+09:00">September 27, 2025</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#pep-793-pymodexport---c-확장-모듈을-위한-새로운-진입점">PEP 793: PyModExport - C 확장 모듈을 위한 새로운 진입점</a><ul><li><a href="#개요-abstract">개요 (Abstract)</a></li><li><a href="#배경-및-동기-background--motivation">배경 및 동기 (Background &amp; Motivation)</a></li><li><a href="#제안의-근거-rationale">제안의 근거 (Rationale)</a></li><li><a href="#명세-specification">명세 (Specification)</a></li><li><a href="#하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</a></li><li><a href="#포팅-가이드-porting-guide">포팅 가이드 (Porting Guide)</a></li><li><a href="#보안-관련-사항-security-implications">보안 관련 사항 (Security Implications)</a></li><li><a href="#교육-방법-how-to-teach-this">교육 방법 (How to Teach This)</a></li><li><a href="#예시-example">예시 (Example)</a></li><li><a href="#가능한-향후-방향-possible-future-directions">가능한 향후 방향 (Possible Future Directions)</a></li></ul></li></ul>

            </nav>
          </aside>
        
        <blockquote>
  <p><strong>원문 링크:</strong> <a href="https://peps.python.org/pep-0793/">PEP 793 - PyModExport: A new entry point for C extension modules</a></p>

  <table>
    <tbody>
      <tr>
        <td><strong>상태:</strong> Draft</td>
        <td><strong>유형:</strong> Standards Track</td>
        <td><strong>작성일:</strong> 23-May-2025</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<h2 id="pep-793-pymodexport---c-확장-모듈을-위한-새로운-진입점">PEP 793: PyModExport - C 확장 모듈을 위한 새로운 진입점</h2>

<ul>
  <li><strong>작성자:</strong> Petr Viktorin</li>
  <li><strong>상태:</strong> Draft (초안)</li>
  <li><strong>생성일:</strong> 2025년 5월 23일</li>
  <li><strong>Python 버전:</strong> 3.15</li>
</ul>

<h3 id="개요-abstract">개요 (Abstract)</h3>
<p>PEP 793은 C 확장 모듈을 위한 새로운 진입점(entry point)을 제안합니다. 이 진입점을 통해 개발자들은 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체 없이 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 구조체 배열을 사용하여 모듈을 정의할 수 있습니다. 이는 확장 모듈 개발자들이 정적으로 할당된 <code class="language-plaintext highlighter-rouge">PyObject</code>를 사용하지 않도록 하여, 단일 컴파일된 라이브러리 파일이 일반(regular) 빌드와 자유 스레딩(free-threaded) 빌드 CPython 모두에서 사용 가능하도록 하는 가장 큰 장애물을 제거합니다.</p>

<p>이 제안은 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>의 필드를 대체할 새로운 모듈 슬롯 타입을 명시하고, <code class="language-plaintext highlighter-rouge">Py_tp_token</code>과 유사한 토큰을 추가할 수 있도록 합니다. 또한 슬롯을 사용하여 모듈을 동적으로 정의하는 API도 추가합니다. 기존 <code class="language-plaintext highlighter-rouge">PyInit_*</code> API는 소프트 비권장(soft-deprecated)됩니다. 즉, 경고 없이 계속 작동하고 문서화 및 지원되지만, 새 기능은 추가되지 않을 예정입니다.</p>

<h3 id="배경-및-동기-background--motivation">배경 및 동기 (Background &amp; Motivation)</h3>

<p><strong>문제점:</strong>
Python 객체의 메모리 레이아웃은 일반 빌드와 자유 스레딩 빌드 간에 다릅니다. 따라서 두 가지 빌드 모두를 지원하는 ABI(Application Binary Interface)는 현재의 <code class="language-plaintext highlighter-rouge">PyObject</code> 메모리 레이아웃을 포함할 수 없습니다. 기존 ABI와의 호환성을 유지하기 위해 정적으로 할당된 Python 객체를 지원할 수 없습니다.</p>

<p>대부분의 확장 모듈에 필요하며 거의 모든 경우에 정적으로 할당되는 객체는 모듈 내보내기 훅(<code class="language-plaintext highlighter-rouge">PyInit_*</code> 함수)에서 반환되는 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>입니다.</p>

<p><strong>인터프리터 전환 (The interpreter switch):</strong>
Python 3.12에서는 모듈이 서브 인터프리터(sub-interpreter)에 로드될 수 있는지 표시하는 <code class="language-plaintext highlighter-rouge">Py_mod_multiple_interpreters</code> 슬롯이 추가되었습니다. 이 슬롯을 “지원하지 않음(not supported)” 값으로 설정하면 확장이 메인 인터프리터에서만 로드될 수 있음을 나타냅니다.</p>

<p>문제는 Python이 모듈 내보내기 훅을 호출해야만 이 정보를 얻을 수 있다는 점입니다. 싱글 페이즈(single-phase) 모듈의 경우, 이는 모듈 객체를 생성하고 임의의 초기화 코드를 실행합니다. <code class="language-plaintext highlighter-rouge">Py_mod_multiple_interpreters</code>를 “지원하지 않음”으로 설정한 모듈의 경우, 이 초기화는 메인 인터프리터에서 이루어져야 합니다.</p>

<p>이를 위해, 새로운 모듈이 서브 인터프리터에 로드되면 Python은 임시적으로 메인 인터프리터로 전환하고, 그곳에서 내보내기 훅을 호출한 다음, 다시 원래 인터프리터로 전환하거나 가져오기를 실패하게 합니다. 이러한 불필요하고 취약한 추가 작업은 근본적인 설계 문제를 보여줍니다. 즉, Python은 확장 모듈이 잠재적으로 완전히 자신을 초기화하기 전에 해당 확장에 대한 정보를 얻을 방법이 없습니다.</p>

<h3 id="제안의-근거-rationale">제안의 근거 (Rationale)</h3>

<p>정적으로 할당된 <code class="language-plaintext highlighter-rouge">PyObject*</code>를 요구하는 모듈 내보내기 훅을 피하기 위해 두 가지 옵션이 고려되었습니다.</p>

<ol>
  <li><strong>동적으로 할당된 객체 반환:</strong> 인터프리터로 소유권이 이전되는 동적으로 할당된 객체를 반환합니다. 이 구조체는 기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>와 매우 유사할 수 있지만, 참조 카운트(reference-counted)되어야 합니다.</li>
  <li><strong>새로운 내보내기 훅 추가:</strong> <code class="language-plaintext highlighter-rouge">PyObject*</code>를 반환하지 않는 새로운 내보내기 훅을 추가합니다.</li>
</ol>

<p>PEP 489에서 Python 3.5를 위해 두 번째 옵션이 고려되었으나, <code class="language-plaintext highlighter-rouge">PyInit</code> 훅 이름을 유지하는 것이 더 간단한 해결책으로 판단되어 기각되었습니다. 그러나 10년이 지난 지금, 그 선택의 함의를 수정하는 작업은 더 이상 간단하지 않습니다.</p>

<p>새로운 훅은 Python이 “인터프리터 전환” 문제를 피할 수 있도록 합니다. 효과적으로 이는 다중 페이즈 초기화(multi-phase initialization)에 새로운 단계를 추가하여 Python이 모듈의 호환성을 미리 확인할 수 있게 합니다.</p>

<p><strong>래퍼 구조체 없는 슬롯 사용 (Using slots without a wrapper struct):</strong>
기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>는 고정 필드와 “slots” 배열을 가진 구조체입니다. 슬롯과 달리 고정 필드는 개별적으로 비권장하거나 교체할 수 없습니다. 이 제안은 고정 필드를 제거하고 래퍼 구조체 없이 슬롯 배열을 직접 사용하는 것을 제안합니다.</p>

<p><strong>토큰 (Tokens):</strong>
정적 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>는 모듈 생성 방법을 설명하는 것 외에 또 다른 목적을 가집니다. 모듈 객체에 연결된 정적으로 할당된 싱글톤으로서, 확장 개발자가 주어진 Python 모듈이 “자신의 것”인지 확인할 수 있게 합니다. 즉, 모듈 객체가 알려진 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>를 가지면 해당 모듈 상태는 알려진 메모리 레이아웃을 가집니다.</p>

<p>유형(type)의 경우 유사한 문제가 <code class="language-plaintext highlighter-rouge">Py_tp_token</code>을 추가함으로써 해결되었습니다. 이 제안은 모듈에도 동일한 메커니즘을 추가합니다.</p>

<p><strong>기존 내보내기 훅의 소프트 비권장 (Soft-deprecating the existing export hook):</strong>
기존 확장의 개발자가 여기에 제안된 API로 전환할 유일한 이유는 단일 모듈이 자유 스레딩 및 비자유 스레딩 빌드 모두에서 작동하도록 허용하기 때문입니다. Python이 이를 허용하는 것이 중요하지만, 많은 기존 모듈의 경우 Python 3.14 이하 버전과의 호환성을 잃을 가치가 없습니다.</p>

<p>따라서, 이 PEP는 <code class="language-plaintext highlighter-rouge">PyInit_*</code> 방식에 새로운 기능을 추가하는 것을 중단할 것을 제안합니다. 결국, 확장 개발자가 전환하기에 가장 좋은 시점은 어차피 모듈 초기화를 수정하려는 때입니다.</p>

<h3 id="명세-specification">명세 (Specification)</h3>

<p><strong>새로운 내보내기 훅:</strong>
확장 모듈을 가져올 때, Python은 이제 다음과 같은 내보내기 훅을 먼저 찾습니다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PyModuleDef_Slot</span> <span class="o">*</span><span class="n">PyModExport_</span><span class="o">&lt;</span><span class="n">NAME</span><span class="o">&gt;</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">spec</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;NAME&gt;</code>은 모듈의 이름입니다. 비 ASCII 이름의 경우, <code class="language-plaintext highlighter-rouge">PyModExportU_&lt;NAME&gt;</code>을 찾으며, <code class="language-plaintext highlighter-rouge">&lt;NAME&gt;</code>은 기존 <code class="language-plaintext highlighter-rouge">PyInitU_*</code> 훅과 같이 인코딩됩니다.</p>

<p>만약 찾지 못하면, 이전 Python 버전과 동일하게 (<code class="language-plaintext highlighter-rouge">PyInit_*</code> 또는 <code class="language-plaintext highlighter-rouge">PyInitU_*</code> 함수를 찾아) 가져오기가 계속됩니다.</p>

<p>훅을 찾으면, Python은 적절한 <code class="language-plaintext highlighter-rouge">importlib.machinery.ModuleSpec</code> 객체를 <code class="language-plaintext highlighter-rouge">spec</code>으로 사용하여 훅을 호출합니다. 훅은 성공 시 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 구조체 배열에 대한 포인터를 반환해야 하며, 실패 시 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환하고 예외를 설정해야 합니다.</p>

<p><strong>동적 생성 (Dynamic creation):</strong>
슬롯 배열에서 모듈을 생성하는 새로운 함수가 추가됩니다:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">PyObject</span> <span class="o">*</span><span class="n">PyModule_FromSlotsAndSpec</span><span class="p">(</span><span class="n">PyModuleDef_Slot</span> <span class="o">*</span><span class="n">slots</span><span class="p">,</span> <span class="n">PyObject</span> <span class="o">*</span><span class="n">spec</span><span class="p">)</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">slots</code> 인수는 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 구조체 배열을 가리켜야 하며, <code class="language-plaintext highlighter-rouge">{0}</code>으로 끝나는 슬롯으로 종료되어야 합니다.</p>

<p>모듈의 <code class="language-plaintext highlighter-rouge">exec</code> 슬롯(들)을 실행하는 새로운 함수 <code class="language-plaintext highlighter-rouge">PyModule_Exec</code>도 추가됩니다.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">PyModule_Exec</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">module</span><span class="p">)</span>
</code></pre></div></div>
<p>이 함수는 모듈을 완전히 초기화하는 데 필요하며, <code class="language-plaintext highlighter-rouge">PyModule_FromSlotsAndSpec</code>는 이를 실행하지 않습니다.</p>

<p><strong>토큰 (Tokens):</strong>
모듈 객체는 선택적으로 “토큰”을 저장합니다. 이는 유형(type)의 <code class="language-plaintext highlighter-rouge">Py_tp_token</code>과 유사한 <code class="language-plaintext highlighter-rouge">void*</code> 포인터입니다.</p>

<p>새로운 <code class="language-plaintext highlighter-rouge">Py_mod_token</code> 슬롯을 사용하여 지정된 경우, 모듈 토큰은 모듈보다 오래 존재해야 하며 해당 확장 모듈에 “속해야” 합니다. <code class="language-plaintext highlighter-rouge">PyModule_GetToken</code> 함수가 추가되어 토큰을 얻을 수 있습니다.</p>

<p><strong>새로운 슬롯 (New slots):</strong>
<code class="language-plaintext highlighter-rouge">PyModuleDef_HEAD_INIT</code>를 제외한 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체의 각 필드에 대해 새로운 슬롯 ID가 제공됩니다. 예를 들어, <code class="language-plaintext highlighter-rouge">Py_mod_name</code>, <code class="language-plaintext highlighter-rouge">Py_mod_doc</code>, <code class="language-plaintext highlighter-rouge">Py_mod_clear</code> 등이 있습니다. 모듈 객체보다는 모듈 상태와 관련된 슬롯은 <code class="language-plaintext highlighter-rouge">Py_mod_state_</code> 접두사를 사용합니다.</p>

<p><strong>기존 내보내기 훅의 소프트 비권장 (Soft-deprecating the existing export hook):</strong>
<code class="language-plaintext highlighter-rouge">PyInit_*</code> 내보내기 훅은 소프트 비권장됩니다.</p>

<p><strong>새로운 API 요약 (New API summary):</strong>
새로운 모듈 내보내기 훅: <code class="language-plaintext highlighter-rouge">PyModExport_&lt;NAME&gt;</code> 및 <code class="language-plaintext highlighter-rouge">PyModExportU_&lt;ENCODED_NAME&gt;</code>
새로운 함수:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">PyObject *PyModule_FromSlotsAndSpec(PyModuleDef_Slot *, PyObject *spec)</code></li>
  <li><code class="language-plaintext highlighter-rouge">int PyModule_Exec(PyObject *)</code></li>
  <li><code class="language-plaintext highlighter-rouge">int PyModule_GetToken(PyObject *, void**)</code></li>
  <li><code class="language-plaintext highlighter-rouge">PyObject *PyType_GetModuleByToken(PyTypeObject *type, void *token)</code></li>
  <li><code class="language-plaintext highlighter-rouge">int PyModule_GetStateSize(PyObject *, Py_ssize_t *result)</code></li>
</ul>

<p>새로운 매크로: <code class="language-plaintext highlighter-rouge">PyMODEXPORT_FUNC</code></p>

<p>새로운 슬롯 타입: <code class="language-plaintext highlighter-rouge">Py_mod_name</code>, <code class="language-plaintext highlighter-rouge">Py_mod_doc</code>, <code class="language-plaintext highlighter-rouge">Py_mod_state_size</code>, <code class="language-plaintext highlighter-rouge">Py_mod_methods</code>, <code class="language-plaintext highlighter-rouge">Py_mod_state_traverse</code>, <code class="language-plaintext highlighter-rouge">Py_mod_state_clear</code>, <code class="language-plaintext highlighter-rouge">Py_mod_state_free</code>, <code class="language-plaintext highlighter-rouge">Py_mod_token</code></p>

<p>이 모든 것은 Limited API에 추가될 예정입니다.</p>

<h3 id="하위-호환성-backwards-compatibility">하위 호환성 (Backwards Compatibility)</h3>

<p>기존 모듈이 새 메커니즘을 사용하도록 포팅되면 <code class="language-plaintext highlighter-rouge">PyModule_GetDef</code>는 해당 모듈에 대해 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환하기 시작합니다. 이는 모듈이 정의된 방식이 해당 모듈의 구현 세부 사항이므로 호환성을 깨는 변경으로 간주되어서는 안 됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">PyType_GetModuleByDef</code> 함수는 이제 <code class="language-plaintext highlighter-rouge">def</code> 인수로 모듈 토큰을 허용합니다.</p>

<h3 id="포팅-가이드-porting-guide">포팅 가이드 (Porting Guide)</h3>

<p>기존 모듈을 새 API로 변환하기 위한 가이드입니다.</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">PyModule_GetDef</code> 사용 검토:</strong> 이 함수는 새 메커니즘을 사용하는 모듈에 대해 <code class="language-plaintext highlighter-rouge">NULL</code>을 반환합니다. 대신 <code class="language-plaintext highlighter-rouge">PyModule_GetNameObject</code>나 <code class="language-plaintext highlighter-rouge">__doc__</code> 속성, <code class="language-plaintext highlighter-rouge">PyModule_GetStateSize</code> 등을 사용하여 모듈의 속성을 얻거나, 모듈 객체가 “자신의 것”인지 테스트하려면 <code class="language-plaintext highlighter-rouge">PyModule_GetToken</code>을 사용합니다.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">PyType_GetModuleByDef</code> 사용 검토:</strong> 이를 <code class="language-plaintext highlighter-rouge">PyType_GetModuleByToken</code>으로 대체하는 것을 고려합니다. (하위 호환성을 위해 <code class="language-plaintext highlighter-rouge">PyType_GetModuleByDef</code>가 토큰을 허용하도록 변경됩니다.)</li>
  <li><strong><code class="language-plaintext highlighter-rouge">Py_mod_create</code> 함수 검토:</strong> 이 함수의 두 번째 인수가 <code class="language-plaintext highlighter-rouge">NULL</code>로 호출될 수 있으므로 사용하지 않도록 합니다. 대신 기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체를 직접 사용합니다.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">Py_mod_exec</code> 슬롯 통합:</strong> 여러 <code class="language-plaintext highlighter-rouge">Py_mod_exec</code> 슬롯이 있는 경우 하나로 통합합니다.</li>
  <li><strong>새로운 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 배열 생성:</strong> 기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code>의 <code class="language-plaintext highlighter-rouge">m_slots</code> 멤버가 가리키는 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 배열을 복사하거나 새로 생성합니다.</li>
  <li><strong>새로운 슬롯 추가:</strong> 기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체의 모든 멤버에 대한 슬롯을 추가합니다. 예: <code class="language-plaintext highlighter-rouge">Py_mod_name</code>, <code class="language-plaintext highlighter-rouge">Py_mod_doc</code> 등.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">Py_mod_token</code> 슬롯 추가:</strong> <code class="language-plaintext highlighter-rouge">PyModule_GetToken</code> 또는 <code class="language-plaintext highlighter-rouge">PyType_GetModuleByToken</code>을 사용하는 경우, 기존 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체를 가리키는 <code class="language-plaintext highlighter-rouge">Py_mod_token</code> 슬롯을 추가합니다.</li>
  <li><strong>새로운 내보내기 훅 추가:</strong> <code class="language-plaintext highlighter-rouge">PyMODEXPORT_FUNC PyModExport_examplemodule(PyObject *spec)</code>와 같은 형식의 훅을 추가하여 새로 정의한 슬롯 배열을 반환합니다.</li>
  <li><strong>하위 버전 지원 중단 시 <code class="language-plaintext highlighter-rouge">PyInit_</code> 함수 제거:</strong> 모듈이 더 낮은 버전의 Python을 지원하지 않게 되면 <code class="language-plaintext highlighter-rouge">PyInit_</code> 함수와 사용되지 않는 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 구조체를 제거할 수 있습니다.</li>
</ol>

<h3 id="보안-관련-사항-security-implications">보안 관련 사항 (Security Implications)</h3>
<p>알려진 보안 관련 사항은 없습니다.</p>

<h3 id="교육-방법-how-to-teach-this">교육 방법 (How to Teach This)</h3>
<p>정기적인 참조 문서 외에, 포팅 가이드를 새로운 HOWTO 문서로 추가해야 합니다.</p>

<h3 id="예시-example">예시 (Example)</h3>
<p>(PEP 문서에 포함된 C 코드 예시를 번역 대신 간략히 설명합니다.)
이 PEP는 C 수준의 모듈 전역 상태를 가지는 예시 모듈을 제공하며, 이 모듈은 일반 빌드와 자유 스레딩 빌드 모두에서 성공적으로 실행됩니다. 이 예시는 <code class="language-plaintext highlighter-rouge">Py_LIMITED_API</code>를 사용하여 CPython 버전별 ABI 종속성을 피하고, 새로운 <code class="language-plaintext highlighter-rouge">PyModExport</code> 훅과 <code class="language-plaintext highlighter-rouge">PyModuleDef_Slot</code> 배열을 사용하여 모듈을 정의합니다.</p>

<h3 id="가능한-향후-방향-possible-future-directions">가능한 향후 방향 (Possible Future Directions)</h3>
<ul>
  <li><strong>슬롯 개선:</strong> <code class="language-plaintext highlighter-rouge">void *</code> 사용으로 인한 타입 안전성 문제 및 알려지지 않은 슬롯 ID에 대한 제한된 전방 호환성 문제를 해결할 수 있습니다.</li>
  <li><strong>기본값 업데이트:</strong> <code class="language-plaintext highlighter-rouge">Py_mod_multiple_interpreters</code> 및 <code class="language-plaintext highlighter-rouge">Py_mod_gil</code> 슬롯의 기본값을 업데이트할 수 있습니다.</li>
  <li><strong>inittab:</strong> <code class="language-plaintext highlighter-rouge">inittab</code>에서 <code class="language-plaintext highlighter-rouge">PyModuleDef</code> 없는 슬롯을 허용해야 할 수도 있습니다.</li>
</ul>

<hr />

<blockquote>
  <p>⚠️ <strong>알림:</strong> 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.</p>
</blockquote>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/tags/#python" class="page__taxonomy-item" rel="tag">Python</a><span class="sep">, </span>
    
      <a href="/tags/#translation" class="page__taxonomy-item" rel="tag">Translation</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#pep" class="page__taxonomy-item" rel="tag">PEP</a><span class="sep">, </span>
    
      <a href="/categories/#python" class="page__taxonomy-item" rel="tag">Python</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2025-09-27">September 27, 2025</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/python/pep/792/" class="pagination--pager" title="[Final] PEP 792 - Project status markers in the simple index
">Previous</a>
    
    
      <a href="/python/pep/794/" class="pagination--pager" title="[Accepted] PEP 794 - Import Name Metadata
">Next</a>
    
  </nav>


    </div>

    
  </article>

</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 secrett2633. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'secrett2633/secrett2633.github.io');
    script.setAttribute('issue-term', 'pathname');
    script.setAttribute('theme', 'github-light');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
