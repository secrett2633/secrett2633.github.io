(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{6646:function(t,e,s){Promise.resolve().then(s.t.bind(s,231,23)),Promise.resolve().then(s.bind(s,227)),Promise.resolve().then(s.bind(s,9038))},227:function(t,e,s){"use strict";s.d(e,{default:function(){return c}});var n=s(7437),a=s(9038);function c(t){let{postPermalink:e}=t,{commentCounts:s,loading:c}=(0,a.f)(),o=s[e]||0;return c?(0,n.jsxs)("span",{className:"text-gray-400 text-sm ml-3",role:"status",children:[(0,n.jsxs)("svg",{className:"inline w-3 h-3 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,n.jsx)("span",{className:"sr-only",children:"댓글 수 로딩 중"})]}):(0,n.jsxs)("span",{className:"text-gray-500 text-sm ml-3",children:["\uD83D\uDCAC ",o]})}},9038:function(t,e,s){"use strict";s.d(e,{default:function(){return i},f:function(){return o}});var n=s(7437),a=s(2265);let c=(0,a.createContext)({commentCounts:{},loading:!0}),o=()=>(0,a.useContext)(c),r="comment_counts_cache";function i(t){let{children:e,repoOwner:s="secrett2633",repoName:o="secrett2633.github.io"}=t,[i,l]=(0,a.useState)({}),[u,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async function(){try{let t=localStorage.getItem(r);if(t)try{let e=JSON.parse(t);if(Date.now()-e.timestamp<6e5){l(e.counts),m(!1);return}}catch(t){console.warn("Failed to parse cache:",t),localStorage.removeItem(r)}let e={},n="https://api.github.com/repos/".concat(s,"/").concat(o,"/discussions?per_page=100");for(;n;){let t=await fetch(n,{headers:{Accept:"application/vnd.github+json"}});if(!t.ok){console.warn("GitHub API returned ".concat(t.status)),m(!1);return}for(let s of(await t.json()))try{if(s.title){let t=s.title.trim();t.startsWith("/")||(t="/"+t),t.endsWith("/")||(t+="/"),e[t]=s.comments||0}if(s.body){let t=s.body.match(/https?:\/\/[^\/\s]+(\/.+)/);if(t&&t[1]){let n=t[1].split(/[\s\n#]/)[0].trim();n.endsWith("/")||(n+="/"),e[n]=s.comments||0}}}catch(t){console.warn("Failed to parse discussion:",t)}let s=t.headers.get("Link");if(n=null,s)for(let t of s.split(",")){let e=t.match(/<([^>]+)>;\s*rel="next"/);if(e){n=e[1];break}}}l(e);let a={counts:e,timestamp:Date.now()};try{localStorage.setItem(r,JSON.stringify(a))}catch(t){console.warn("Failed to save cache:",t)}}catch(t){console.warn("Failed to fetch comment counts:",t)}finally{m(!1)}})()},[s,o]),(0,n.jsx)(c.Provider,{value:{commentCounts:i,loading:u},children:e})}}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=6646)}),_N_E=t.O()}]);