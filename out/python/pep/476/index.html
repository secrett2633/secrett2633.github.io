<!DOCTYPE html><html lang="ko" class="no-js"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/e975486d410ad4e9.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-e1766af8e208074e.js"/><script src="/_next/static/chunks/fd9d1056-4e1a26e2d413ba3c.js" async=""></script><script src="/_next/static/chunks/23-e8ded9e1e67d56dc.js" async=""></script><script src="/_next/static/chunks/main-app-6d0231ce06c8f62f.js" async=""></script><script src="/_next/static/chunks/231-c27e618569e042bc.js" async=""></script><script src="/_next/static/chunks/157-1a135130af3e1cae.js" async=""></script><script src="/_next/static/chunks/app/layout-c3e2e457f12fb6f6.js" async=""></script><script src="/_next/static/chunks/app/%5B...slug%5D/page-90448483657abf9e.js" async=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-NE2W3CFPNY"></script><title>secrett2633&#x27;s blog</title><meta name="description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><meta name="author" content="secrett2633"/><meta name="keywords" content="Django, Python, DevOps, AI, ML, 블로그, 기술"/><meta name="creator" content="secrett2633"/><meta name="publisher" content="secrett2633"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://secrett2633.github.io/"/><meta name="format-detection" content="telephone=no, address=no, email=no"/><meta property="og:title" content="secrett2633&#x27;s blog"/><meta property="og:description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><meta property="og:url" content="https://secrett2633.github.io/"/><meta property="og:site_name" content="secrett2633&#x27;s blog"/><meta property="og:locale" content="ko_KR"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="secrett2633&#x27;s blog"/><meta name="twitter:description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><link rel="icon" href="/icon.ico?6d9f34d4948640b8" type="image/x-icon" sizes="16x16"/><meta name="msapplication-TileColor" content="#ffc40d"/><meta name="theme-color" content="#ffffff"/><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-NE2W3CFPNY');
            </script><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_f367f3 layout--default"><div class="min-h-screen bg-gray-50"><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"><a class="site-title" href="/">secrett2633&#x27;s blog</a><div class="flex items-center space-x-4"><ul class="visible-links"><li class="masthead__menu-item"><a href="https://github.com/secrett2633" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul><button class="search__toggle" type="button"><svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16"><path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path></svg></button></div></nav></div></div></div><main class="initial-content"><!--$--><div class="flex flex-col lg:flex-row gap-8"><aside class="lg:w-64 xl:w-72 order-1 lg:order-none"><div class="sidebar sticky"><nav class="space-y-4"><div><h4 class="font-medium text-gray-900 mb-2">Backend</h4><ul class="space-y-1 ml-4"><li><a href="/backend/django/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Django<!-- --> (<!-- -->6<!-- -->)</a></li><li><a href="/backend/logging/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Logging<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">Python</h4><ul class="space-y-1 ml-4"><li><a href="/python/pep/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">PEP<!-- --> (<!-- -->650<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">AI/ML</h4><ul class="space-y-1 ml-4"><li><a href="/ai/llm/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">LLM<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/ai/review/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Review<!-- --> (<!-- -->1318<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">DevOps</h4><ul class="space-y-1 ml-4"><li><a href="/devops/nginx/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Nginx<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/docker/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Docker<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/safeline/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">SafeLine<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/jenkins/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Jenkins<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/devops/github-actions/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">GitHub Actions<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/aws/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">AWS<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">etc</h4><ul class="space-y-1 ml-4"><li><a href="/etc/me/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Me<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/etc/chrome-extension/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Chrome Extension<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div></nav></div></aside><main class="flex-1"><article class="page"><header class="mb-8"><h1 class="page__title">[Final] PEP 476 - Enabling certificate verification by default for stdlib http clients</h1><div class="page__meta"><time dateTime="2025-09-26 22:22:04+0900">2025년 9월 26일</time><span class="ml-4">수정: <!-- -->2025년 9월 26일</span></div></header><div class="page__content"><div><blockquote>
<p><strong>원문 링크:</strong> <a href="https://peps.python.org/pep-0476/">PEP 476 - Enabling certificate verification by default for stdlib http clients</a></p>
<p><strong>상태:</strong> Final | <strong>유형:</strong> Standards Track | <strong>작성일:</strong> 28-Aug-2014</p>
</blockquote>
<h2>PEP 476 – <code>stdlib</code> HTTP 클라이언트에 기본적으로 인증서 검증 활성화</h2>
<h3>초록 (Abstract)</h3>
<p>현재 Python 표준 라이브러리의 HTTP 클라이언트(<code>urllib</code>, <code>urllib2</code>, <code>http</code>, <code>httplib</code> 모듈)는 <code>https://</code> URL을 처리할 때 TLS 스트림을 사용하지만, 서버의 X509 인증서가 신뢰할 수 있는 CA(인증 기관)에 의해 서명되었는지, 그리고 인증서의 Common Name 또는 Subject Alternate Name이 요청된 호스트와 일치하는지 실제로 검증하지 않습니다. 이러한 검사 누락으로 인해 공격자가 중간자(Man-in-the-Middle) 공격을 쉽게 수행하고 트래픽을 변경할 수 있습니다.</p>
<p>이 PEP는 Python HTTP 클라이언트에 X509 인증서 서명 및 호스트명 검증을 기본적으로 활성화할 것을 제안하며, 필요에 따라 개별 호출 단위로 이 기능을 비활성화(opt-out)할 수 있도록 합니다. 이 변경사항은 Python 2.7.9, 3.4.3 및 3.5 버전부터 적용되었습니다.</p>
<h3>도입 배경 (Rationale)</h3>
<p><code>HTTPS</code>의 "S"는 "보안(Secure)"을 의미합니다. Python 사용자들은 <code>HTTPS</code>를 사용할 때 보안 연결을 기대하지만, 현재 Python은 이러한 기대를 충족시키지 못하고 있습니다. 겉보기에는 간단해 보이는 API가 사용자들을 오도하고 있는 상황입니다.</p>
<p>많은 Python 사용자들은 이러한 유효성 검사가 수행되지 않는다는 사실을 인지하지 못했으며, 이를 알게 되면 충격을 받습니다. <code>requests</code> 라이브러리(기본적으로 이러한 검사를 활성화함)의 인기는 이러한 검사가 과도한 부담이 아니라는 것을 보여주며, <code>requests</code>가 표준 라이브러리 클라이언트보다 주요 보안 개선 사항으로 널리 권장된다는 사실은 많은 사용자들이 도구에서 "기본 보안"에 대한 더 높은 기준을 기대한다는 것을 의미합니다.</p>
<p>Python이 이 문제에 대해 부주의했다는 점을 인지하지 못한 다양한 애플리케이션의 실패는 정기적인 CVE(Common Vulnerabilities and Exposures) 할당의 원인이 되고 있습니다.</p>
<h3>기술적 세부 사항 (Technical Details)</h3>
<h4>신뢰 데이터베이스 (Trust database)</h4>
<p>이 PEP는 모든 플랫폼에서 시스템이 제공하는 인증서 데이터베이스를 사용할 것을 제안합니다. 이러한 데이터베이스를 찾을 수 없는 경우 오류가 발생하며, 사용자는 문제를 해결하기 위해 명시적으로 위치를 지정해야 합니다.</p>
<p>이 목표는 새로운 <code>ssl._create_default_https_context</code> 함수를 추가함으로써 달성됩니다. 이 함수는 <code>ssl.create_default_context</code>와 동일합니다. <code>http.client</code>는 <code>ssl._create_stdlib_context</code> 대신 <code>ssl._create_default_https_context</code>를 사용하도록 변경됩니다. 또한 <code>ssl._create_stdlib_context</code>는 <code>ssl._create_unverified_context</code>로 이름이 변경됩니다(하위 호환성을 위해 별칭은 유지됩니다).</p>
<p>이 PEP는 시스템 제공 인증서 데이터베이스를 사용하는 것을 제안합니다. 이전 논의에서는 Mozilla의 인증서 데이터베이스를 번들로 제공하고 이를 기본값으로 사용하는 방안이 제안되었으나, 다음과 같은 여러 이유로 채택되지 않았습니다.</p>
<ul>
<li>플랫폼 신뢰 데이터베이스를 사용하면 Python 개발자의 유지 보수 부담이 줄어듭니다. 자체 신뢰 데이터베이스를 제공하면 인증서가 폐기될 때마다 릴리스를 해야 합니다.</li>
<li>Linux 벤더 및 다른 다운스트림(downstream)은 Mozilla 인증서를 번들에서 제외할 것이며, 이는 행동의 파편화를 초래합니다.</li>
<li>플랫폼 저장소를 사용하면 기업 내부 CA와 같은 상황을 더 쉽게 처리할 수 있습니다.</li>
</ul>
<p>OpenSSL에는 <code>SSL_CERT_DIR</code> 및 <code>SSL_CERT_FILE</code>이라는 두 개의 환경 변수가 있으며, 이를 사용하여 Python이 다른 인증서 데이터베이스를 가리키도록 할 수 있습니다.</p>
<h4>하위 호환성 (Backwards compatibility)</h4>
<p>이 변경으로 인해 일부 HTTPS 연결이 핸드셰이크 중에 예외(Exception)를 발생시키면서 "깨지는" 것처럼 보일 수 있습니다. 그러나 이는 오해의 소지가 있습니다. 사실 이러한 연결은 현재 "조용히 실패하고" 있으며, HTTPS URL은 기밀성(confidentiality)과 인증(authentication)에 대한 기대를 나타냅니다. Python이 사용자의 요청이 실제로 이루어졌는지 검증하지 않는다는 사실은 버그이며, "오류는 절대 조용히 넘어가지 않아야 한다(Errors should never pass silently)"는 원칙에도 위배됩니다.</p>
<p>그럼에도 불구하고 자체 서명(self-signed)되었거나 잘못된 인증서를 가진 서버에 접근해야 하는 사용자들은 사용자 정의 신뢰 루트를 가진 컨텍스트를 제공하거나 유효성 검사를 비활성화하는 컨텍스트를 제공하여 그렇게 할 수 있습니다(가능한 경우 전자를 강력히 권장). 사용자들은 필요한 인증서를 시스템 신뢰 저장소에 추가하여 전역적으로 신뢰할 수도 있습니다.</p>
<p>Twisted의 14.0 릴리스도 동일한 변경을 적용했으며, 거의 반대에 부딪히지 않았습니다.</p>
<h4>옵트아웃 (Opting out)</h4>
<p>단일 연결에서 인증서 검증을 비활성화하려는 사용자는 <code>urllib.urlopen</code>에 <code>context</code> 인자를 제공하여 이를 달성할 수 있습니다.</p>
<pre><code class="language-python">import ssl
# 이는 이전과 동일한 동작을 복원합니다.
context = ssl._create_unverified_context()
urllib.urlopen("https://no-valid-cert", context=context)
</code></pre>
<p>이 PEP를 구현하는 Python 버전에서 <code>ssl</code> 모듈을 몽키패치(monkeypatching)하여 전역적으로 검증을 비활성화하는 것도 가능하지만, 이는 강력히 권장되지 않습니다.</p>
<pre><code class="language-python">import ssl
try:
    _create_unverified_https_context = ssl._create_unverified_context
except AttributeError:
    # 기본적으로 HTTPS 인증서를 검증하지 않는 레거시 Python
    pass
else:
    # HTTPS 검증을 지원하지 않는 대상 환경 처리
    ssl._create_default_https_context = _create_unverified_https_context
</code></pre>
<p>이 지침은 주로 이 PEP를 구현하는 최신 Python 버전을 레거시 환경(HTTPS 연결에 대한 인증서 검증을 아직 지원하지 않는)에서 채택하려는 시스템 관리자를 위한 것입니다. 예를 들어, 관리자는 Python의 표준 운영 환경에서 <code>sitecustomize.py</code>에 위 몽키패치를 추가하여 옵트아웃할 수 있습니다. 애플리케이션 및 라이브러리는 (시스템 관리자가 제어하는 ​​구성 설정에 대한 응답으로가 아니라면) 프로세스 전체에 이 변경 사항을 적용해서는 안 됩니다.</p>
<p>특히 보안에 민감한 애플리케이션은 기본 Python 구현의 기본 동작에 의존하기보다 항상 명시적으로 애플리케이션이 정의한 <code>SSLContext</code>를 제공해야 합니다.</p>
<h4>다른 프로토콜 (Other protocols)</h4>
<p>이 PEP는 HTTP 클라이언트에 대해서만 이러한 수준의 유효성 검사를 요구하며, SMTP와 같은 다른 프로토콜에는 적용되지 않습니다. 이는 HTTPS 서버의 상당수가 브라우저가 수행하는 유효성 검사 덕분에 올바른 인증서를 가지고 있지만, 다른 프로토콜의 경우 자체 서명되거나 잘못된 인증서가 훨씬 더 흔하기 때문입니다.</p>
<h3>Python 버전 (Python Versions)</h3>
<p>이 PEP는 3.4.x, 3.5 및 2.7.X 브랜치 모두에서 발생할 변경 사항을 설명합니다. 2.7.X의 경우, PEP 466에서 이미 백포트된 기능 외에도 <code>httplib</code>에 <code>context</code>(<code>SSLContext</code>) 인수를 백포트해야 합니다.</p>
<h3>구현 (Implementation)</h3>
<ul>
<li>Issue 22366: <code>urllib.request.urlopen</code>에 <code>context</code> 인자 추가.</li>
<li>Issue 22417: 이 PEP의 핵심 내용을 구현.</li>
</ul>
<h3>저작권 (Copyright)</h3>
<p>이 문서는 퍼블릭 도메인에 공개되었습니다.</p>
<blockquote>
<p>⚠️ <strong>알림:</strong> 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.</p>
</blockquote>
</div></div><footer class="page__meta mt-8"><div class="page__taxonomy"><h4 class="text-sm font-medium text-gray-900 mb-2">태그</h4><span class="page__taxonomy-item">#<!-- -->Python</span><span class="page__taxonomy-item">#<!-- -->PEP</span><span class="page__taxonomy-item">#<!-- -->Translation</span></div></footer></article></main></div><!--/$--></main><div id="footer" class="page__footer"><footer class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="text-center text-gray-500 text-sm"><p>© 2025 secrett2633. All rights reserved.</p></div></footer></div></div><script src="/_next/static/chunks/webpack-e1766af8e208074e.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/e975486d410ad4e9.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[5751,[],\"\"]\n5:I[9275,[],\"\"]\n7:I[1343,[],\"\"]\n8:I[9157,[\"231\",\"static/chunks/231-c27e618569e042bc.js\",\"157\",\"static/chunks/157-1a135130af3e1cae.js\",\"185\",\"static/chunks/app/layout-c3e2e457f12fb6f6.js\"],\"default\"]\n9:I[231,[\"231\",\"static/chunks/231-c27e618569e042bc.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-90448483657abf9e.js\"],\"\"]\nb:I[6130,[],\"\"]\n6:[\"slug\",\"python/pep/476\",\"c\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e975486d410ad4e9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"buildId\":\"8N6icDw00Cy0kKVlExSq2\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/python/pep/476/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"python/pep/476\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"python\\\",\\\"pep\\\",\\\"476\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"python/pep/476\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",\"$L4\"],null],null]},[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"no-js\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#ffc40d\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#ffffff\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-NE2W3CFPNY\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              window.dataLayer = window.dataLayer || [];\\n              function gtag(){dataLayer.push(arguments);}\\n              gtag('js', new Date());\\n              gtag('config', 'G-NE2W3CFPNY');\\n            \"}}]]}],[\"$\",\"body\",null,{\"className\":\"__className_f367f3 layout--default\",\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-gray-50\",\"children\":[[\"$\",\"$L8\",null,{}],[\"$\",\"main\",null,{\"className\":\"initial-content\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"min-h-screen flex items-center justify-center bg-gray-50\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-6xl font-bold text-primary-600 mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-semibold text-gray-900 mb-4\",\"children\":\"페이지를 찾을 수 없습니다\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-600 mb-8\",\"children\":\"요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다.\"}],[\"$\",\"$L9\",null,{\"href\":\"/\",\"className\":\"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors\",\"children\":\"홈으로 돌아가기\"}]]}]}],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"div\",null,{\"id\":\"footer\",\"className\":\"page__footer\",\"children\":[\"$\",\"footer\",null,{\"className\":\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center text-gray-500 text-sm\",\"children\":[\"$\",\"p\",null,{\"children\":\"© 2025 secrett2633. All rights reserved.\"}]}]}]}]]}]}]]}],null],[[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"}]}],[],[]]],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]]\n"])</script><script>self.__next_f.push([1,"d:T23df,"])</script><script>self.__next_f.push([1,"\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e원문 링크:\u003c/strong\u003e \u003ca href=\"https://peps.python.org/pep-0476/\"\u003ePEP 476 - Enabling certificate verification by default for stdlib http clients\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e상태:\u003c/strong\u003e Final | \u003cstrong\u003e유형:\u003c/strong\u003e Standards Track | \u003cstrong\u003e작성일:\u003c/strong\u003e 28-Aug-2014\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003ePEP 476 – \u003ccode\u003estdlib\u003c/code\u003e HTTP 클라이언트에 기본적으로 인증서 검증 활성화\u003c/h2\u003e\n\u003ch3\u003e초록 (Abstract)\u003c/h3\u003e\n\u003cp\u003e현재 Python 표준 라이브러리의 HTTP 클라이언트(\u003ccode\u003eurllib\u003c/code\u003e, \u003ccode\u003eurllib2\u003c/code\u003e, \u003ccode\u003ehttp\u003c/code\u003e, \u003ccode\u003ehttplib\u003c/code\u003e 모듈)는 \u003ccode\u003ehttps://\u003c/code\u003e URL을 처리할 때 TLS 스트림을 사용하지만, 서버의 X509 인증서가 신뢰할 수 있는 CA(인증 기관)에 의해 서명되었는지, 그리고 인증서의 Common Name 또는 Subject Alternate Name이 요청된 호스트와 일치하는지 실제로 검증하지 않습니다. 이러한 검사 누락으로 인해 공격자가 중간자(Man-in-the-Middle) 공격을 쉽게 수행하고 트래픽을 변경할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 PEP는 Python HTTP 클라이언트에 X509 인증서 서명 및 호스트명 검증을 기본적으로 활성화할 것을 제안하며, 필요에 따라 개별 호출 단위로 이 기능을 비활성화(opt-out)할 수 있도록 합니다. 이 변경사항은 Python 2.7.9, 3.4.3 및 3.5 버전부터 적용되었습니다.\u003c/p\u003e\n\u003ch3\u003e도입 배경 (Rationale)\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eHTTPS\u003c/code\u003e의 \"S\"는 \"보안(Secure)\"을 의미합니다. Python 사용자들은 \u003ccode\u003eHTTPS\u003c/code\u003e를 사용할 때 보안 연결을 기대하지만, 현재 Python은 이러한 기대를 충족시키지 못하고 있습니다. 겉보기에는 간단해 보이는 API가 사용자들을 오도하고 있는 상황입니다.\u003c/p\u003e\n\u003cp\u003e많은 Python 사용자들은 이러한 유효성 검사가 수행되지 않는다는 사실을 인지하지 못했으며, 이를 알게 되면 충격을 받습니다. \u003ccode\u003erequests\u003c/code\u003e 라이브러리(기본적으로 이러한 검사를 활성화함)의 인기는 이러한 검사가 과도한 부담이 아니라는 것을 보여주며, \u003ccode\u003erequests\u003c/code\u003e가 표준 라이브러리 클라이언트보다 주요 보안 개선 사항으로 널리 권장된다는 사실은 많은 사용자들이 도구에서 \"기본 보안\"에 대한 더 높은 기준을 기대한다는 것을 의미합니다.\u003c/p\u003e\n\u003cp\u003ePython이 이 문제에 대해 부주의했다는 점을 인지하지 못한 다양한 애플리케이션의 실패는 정기적인 CVE(Common Vulnerabilities and Exposures) 할당의 원인이 되고 있습니다.\u003c/p\u003e\n\u003ch3\u003e기술적 세부 사항 (Technical Details)\u003c/h3\u003e\n\u003ch4\u003e신뢰 데이터베이스 (Trust database)\u003c/h4\u003e\n\u003cp\u003e이 PEP는 모든 플랫폼에서 시스템이 제공하는 인증서 데이터베이스를 사용할 것을 제안합니다. 이러한 데이터베이스를 찾을 수 없는 경우 오류가 발생하며, 사용자는 문제를 해결하기 위해 명시적으로 위치를 지정해야 합니다.\u003c/p\u003e\n\u003cp\u003e이 목표는 새로운 \u003ccode\u003essl._create_default_https_context\u003c/code\u003e 함수를 추가함으로써 달성됩니다. 이 함수는 \u003ccode\u003essl.create_default_context\u003c/code\u003e와 동일합니다. \u003ccode\u003ehttp.client\u003c/code\u003e는 \u003ccode\u003essl._create_stdlib_context\u003c/code\u003e 대신 \u003ccode\u003essl._create_default_https_context\u003c/code\u003e를 사용하도록 변경됩니다. 또한 \u003ccode\u003essl._create_stdlib_context\u003c/code\u003e는 \u003ccode\u003essl._create_unverified_context\u003c/code\u003e로 이름이 변경됩니다(하위 호환성을 위해 별칭은 유지됩니다).\u003c/p\u003e\n\u003cp\u003e이 PEP는 시스템 제공 인증서 데이터베이스를 사용하는 것을 제안합니다. 이전 논의에서는 Mozilla의 인증서 데이터베이스를 번들로 제공하고 이를 기본값으로 사용하는 방안이 제안되었으나, 다음과 같은 여러 이유로 채택되지 않았습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e플랫폼 신뢰 데이터베이스를 사용하면 Python 개발자의 유지 보수 부담이 줄어듭니다. 자체 신뢰 데이터베이스를 제공하면 인증서가 폐기될 때마다 릴리스를 해야 합니다.\u003c/li\u003e\n\u003cli\u003eLinux 벤더 및 다른 다운스트림(downstream)은 Mozilla 인증서를 번들에서 제외할 것이며, 이는 행동의 파편화를 초래합니다.\u003c/li\u003e\n\u003cli\u003e플랫폼 저장소를 사용하면 기업 내부 CA와 같은 상황을 더 쉽게 처리할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOpenSSL에는 \u003ccode\u003eSSL_CERT_DIR\u003c/code\u003e 및 \u003ccode\u003eSSL_CERT_FILE\u003c/code\u003e이라는 두 개의 환경 변수가 있으며, 이를 사용하여 Python이 다른 인증서 데이터베이스를 가리키도록 할 수 있습니다.\u003c/p\u003e\n\u003ch4\u003e하위 호환성 (Backwards compatibility)\u003c/h4\u003e\n\u003cp\u003e이 변경으로 인해 일부 HTTPS 연결이 핸드셰이크 중에 예외(Exception)를 발생시키면서 \"깨지는\" 것처럼 보일 수 있습니다. 그러나 이는 오해의 소지가 있습니다. 사실 이러한 연결은 현재 \"조용히 실패하고\" 있으며, HTTPS URL은 기밀성(confidentiality)과 인증(authentication)에 대한 기대를 나타냅니다. Python이 사용자의 요청이 실제로 이루어졌는지 검증하지 않는다는 사실은 버그이며, \"오류는 절대 조용히 넘어가지 않아야 한다(Errors should never pass silently)\"는 원칙에도 위배됩니다.\u003c/p\u003e\n\u003cp\u003e그럼에도 불구하고 자체 서명(self-signed)되었거나 잘못된 인증서를 가진 서버에 접근해야 하는 사용자들은 사용자 정의 신뢰 루트를 가진 컨텍스트를 제공하거나 유효성 검사를 비활성화하는 컨텍스트를 제공하여 그렇게 할 수 있습니다(가능한 경우 전자를 강력히 권장). 사용자들은 필요한 인증서를 시스템 신뢰 저장소에 추가하여 전역적으로 신뢰할 수도 있습니다.\u003c/p\u003e\n\u003cp\u003eTwisted의 14.0 릴리스도 동일한 변경을 적용했으며, 거의 반대에 부딪히지 않았습니다.\u003c/p\u003e\n\u003ch4\u003e옵트아웃 (Opting out)\u003c/h4\u003e\n\u003cp\u003e단일 연결에서 인증서 검증을 비활성화하려는 사용자는 \u003ccode\u003eurllib.urlopen\u003c/code\u003e에 \u003ccode\u003econtext\u003c/code\u003e 인자를 제공하여 이를 달성할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport ssl\r\n# 이는 이전과 동일한 동작을 복원합니다.\r\ncontext = ssl._create_unverified_context()\r\nurllib.urlopen(\"https://no-valid-cert\", context=context)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 PEP를 구현하는 Python 버전에서 \u003ccode\u003essl\u003c/code\u003e 모듈을 몽키패치(monkeypatching)하여 전역적으로 검증을 비활성화하는 것도 가능하지만, 이는 강력히 권장되지 않습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003eimport ssl\r\ntry:\r\n    _create_unverified_https_context = ssl._create_unverified_context\r\nexcept AttributeError:\r\n    # 기본적으로 HTTPS 인증서를 검증하지 않는 레거시 Python\r\n    pass\r\nelse:\r\n    # HTTPS 검증을 지원하지 않는 대상 환경 처리\r\n    ssl._create_default_https_context = _create_unverified_https_context\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 지침은 주로 이 PEP를 구현하는 최신 Python 버전을 레거시 환경(HTTPS 연결에 대한 인증서 검증을 아직 지원하지 않는)에서 채택하려는 시스템 관리자를 위한 것입니다. 예를 들어, 관리자는 Python의 표준 운영 환경에서 \u003ccode\u003esitecustomize.py\u003c/code\u003e에 위 몽키패치를 추가하여 옵트아웃할 수 있습니다. 애플리케이션 및 라이브러리는 (시스템 관리자가 제어하는 ​​구성 설정에 대한 응답으로가 아니라면) 프로세스 전체에 이 변경 사항을 적용해서는 안 됩니다.\u003c/p\u003e\n\u003cp\u003e특히 보안에 민감한 애플리케이션은 기본 Python 구현의 기본 동작에 의존하기보다 항상 명시적으로 애플리케이션이 정의한 \u003ccode\u003eSSLContext\u003c/code\u003e를 제공해야 합니다.\u003c/p\u003e\n\u003ch4\u003e다른 프로토콜 (Other protocols)\u003c/h4\u003e\n\u003cp\u003e이 PEP는 HTTP 클라이언트에 대해서만 이러한 수준의 유효성 검사를 요구하며, SMTP와 같은 다른 프로토콜에는 적용되지 않습니다. 이는 HTTPS 서버의 상당수가 브라우저가 수행하는 유효성 검사 덕분에 올바른 인증서를 가지고 있지만, 다른 프로토콜의 경우 자체 서명되거나 잘못된 인증서가 훨씬 더 흔하기 때문입니다.\u003c/p\u003e\n\u003ch3\u003ePython 버전 (Python Versions)\u003c/h3\u003e\n\u003cp\u003e이 PEP는 3.4.x, 3.5 및 2.7.X 브랜치 모두에서 발생할 변경 사항을 설명합니다. 2.7.X의 경우, PEP 466에서 이미 백포트된 기능 외에도 \u003ccode\u003ehttplib\u003c/code\u003e에 \u003ccode\u003econtext\u003c/code\u003e(\u003ccode\u003eSSLContext\u003c/code\u003e) 인수를 백포트해야 합니다.\u003c/p\u003e\n\u003ch3\u003e구현 (Implementation)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eIssue 22366: \u003ccode\u003eurllib.request.urlopen\u003c/code\u003e에 \u003ccode\u003econtext\u003c/code\u003e 인자 추가.\u003c/li\u003e\n\u003cli\u003eIssue 22417: 이 PEP의 핵심 내용을 구현.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e저작권 (Copyright)\u003c/h3\u003e\n\u003cp\u003e이 문서는 퍼블릭 도메인에 공개되었습니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e⚠️ \u003cstrong\u003e알림:\u003c/strong\u003e 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n"])</script><script>self.__next_f.push([1,"4:[\"$\",\"div\",null,{\"className\":\"flex flex-col lg:flex-row gap-8\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"lg:w-64 xl:w-72 order-1 lg:order-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"sidebar sticky\",\"children\":[\"$\",\"nav\",null,{\"className\":\"space-y-4\",\"children\":[[\"$\",\"div\",\"Backend\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"Backend\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Django\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/backend/django/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Django\",\" (\",6,\")\"]}]}],[\"$\",\"li\",\"Logging\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/backend/logging/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Logging\",\" (\",1,\")\"]}]}]]}]]}],[\"$\",\"div\",\"Python\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"Python\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"PEP\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/python/pep/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"PEP\",\" (\",650,\")\"]}]}]]}]]}],[\"$\",\"div\",\"AI/ML\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"AI/ML\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"LLM\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ai/llm/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"LLM\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Review\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ai/review/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Review\",\" (\",1318,\")\"]}]}]]}]]}],[\"$\",\"div\",\"DevOps\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"DevOps\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Nginx\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/nginx/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Nginx\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Docker\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/docker/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Docker\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"SafeLine\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/safeline/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"SafeLine\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Jenkins\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/jenkins/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Jenkins\",\" (\",3,\")\"]}]}],[\"$\",\"li\",\"GitHub Actions\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/github-actions/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"GitHub Actions\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"AWS\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/aws/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"AWS\",\" (\",1,\")\"]}]}]]}]]}],[\"$\",\"div\",\"etc\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"etc\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Me\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/etc/me/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Me\",\" (\",3,\")\"]}]}],[\"$\",\"li\",\"Chrome Extension\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/etc/chrome-extension/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Chrome Extension\",\" (\",1,\")\"]}]}]]}]]}]]}]}]}],[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"article\",null,{\"className\":\"page\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"page__title\",\"children\":\"[Final] PEP 476 - Enabling certificate verification by default for stdlib http clients\"}],[\"$\",\"div\",null,{\"className\":\"page__meta\",\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2025-09-26 22:22:04+0900\",\"children\":\"2025년 9월 26일\"}],[\"$\",\"span\",null,{\"className\":\"ml-4\",\"children\":[\"수정: \",\"2025년 9월 26일\"]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"page__content\",\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$d\"}}]}],[\"$\",\"footer\",null,{\"className\":\"page__meta mt-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"page__taxonomy\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"text-sm font-medium text-gray-900 mb-2\",\"children\":\"태그\"}],[[\"$\",\"span\",\"Python\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"Python\"]}],[\"$\",\"span\",\"PEP\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"PEP\"]}],[\"$\",\"span\",\"Translation\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"Translation\"]}]]]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"meta\",\"4\",{\"name\":\"author\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"5\",{\"name\":\"keywords\",\"content\":\"Django, Python, DevOps, AI, ML, 블로그, 기술\"}],[\"$\",\"meta\",\"6\",{\"name\":\"creator\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"7\",{\"name\":\"publisher\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"9\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"10\",{\"rel\":\"canonical\",\"href\":\"https://secrett2633.github.io/\"}],[\"$\",\"meta\",\"11\",{\"name\":\"format-detection\",\"content\":\"telephone=no, address=no, email=no\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:title\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:url\",\"content\":\"https://secrett2633.github.io/\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:site_name\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:title\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"link\",\"21\",{\"rel\":\"icon\",\"href\":\"/icon.ico?6d9f34d4948640b8\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n3:null\n"])</script></body></html>