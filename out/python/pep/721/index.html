<!DOCTYPE html><html lang="ko" class="no-js"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/773b243a13a00265.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-90b03762f46d1ba4.js"/><script src="/_next/static/chunks/fd9d1056-4e1a26e2d413ba3c.js" async=""></script><script src="/_next/static/chunks/23-e8ded9e1e67d56dc.js" async=""></script><script src="/_next/static/chunks/main-app-6087bc228fd56b83.js" async=""></script><script src="/_next/static/chunks/231-c27e618569e042bc.js" async=""></script><script src="/_next/static/chunks/app/layout-29f3b81c3a382114.js" async=""></script><script src="/_next/static/chunks/app/%5B...slug%5D/page-d9dbb0d3ac265797.js" async=""></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-NE2W3CFPNY"></script><title>secrett2633&#x27;s blog</title><meta name="description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><meta name="author" content="secrett2633"/><meta name="keywords" content="Django, Python, DevOps, AI, ML, 블로그, 기술"/><meta name="creator" content="secrett2633"/><meta name="publisher" content="secrett2633"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://blog.secrett2633.cloud/"/><meta name="format-detection" content="telephone=no, address=no, email=no"/><meta property="og:title" content="secrett2633&#x27;s blog"/><meta property="og:description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><meta property="og:url" content="https://blog.secrett2633.cloud/"/><meta property="og:site_name" content="secrett2633&#x27;s blog"/><meta property="og:locale" content="ko_KR"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="secrett2633&#x27;s blog"/><meta name="twitter:description" content="기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트"/><link rel="icon" href="/icon.ico?6d9f34d4948640b8" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><meta name="msapplication-TileColor" content="#ffc40d"/><meta name="theme-color" content="#ffffff"/><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-NE2W3CFPNY');
            </script><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_f367f3 layout--default"><div class="min-h-screen bg-gray-50"><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav id="site-nav" class="greedy-nav"><a class="site-title" href="/">secrett2633&#x27;s blog</a><div class="flex items-center space-x-4"><ul class="visible-links"><li class="masthead__menu-item"><a href="https://github.com/secrett2633" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul><button class="search__toggle" type="button"><svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16"><path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path></svg></button></div></nav></div></div></div><main class="initial-content"><!--$--><div class="flex flex-col lg:flex-row gap-8"><aside class="lg:w-64 xl:w-72 order-1 lg:order-none"><div class="sidebar sticky"><nav class="space-y-4"><div><h4 class="font-medium text-gray-900 mb-2">Backend</h4><ul class="space-y-1 ml-4"><li><a href="/backend/django/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Django<!-- --> (<!-- -->6<!-- -->)</a></li><li><a href="/backend/logging/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Logging<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">Python</h4><ul class="space-y-1 ml-4"><li><a href="/python/pep/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">PEP<!-- --> (<!-- -->650<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">AI/ML</h4><ul class="space-y-1 ml-4"><li><a href="/ai/llm/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">LLM<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/ai/review/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Review<!-- --> (<!-- -->2279<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">DevOps</h4><ul class="space-y-1 ml-4"><li><a href="/devops/nginx/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Nginx<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/docker/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Docker<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/safeline/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">SafeLine<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/jenkins/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Jenkins<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/devops/github-actions/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">GitHub Actions<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/devops/aws/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">AWS<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div><div><h4 class="font-medium text-gray-900 mb-2">etc</h4><ul class="space-y-1 ml-4"><li><a href="/etc/me/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Me<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/etc/chrome-extension/" class="text-sm text-gray-600 hover:text-primary-600 block py-1">Chrome Extension<!-- --> (<!-- -->1<!-- -->)</a></li></ul></div></nav></div></aside><main class="flex-1"><article class="page"><header class="mb-8"><h1 class="page__title">[Final] PEP 721 - Using tarfile.data_filter for source distribution extraction</h1><div class="page__meta"><time dateTime="2025-09-27 13:15:15+0900">2025년 9월 27일</time><span class="ml-4">수정: <!-- -->2025년 9월 27일</span></div></header><div class="page__content"><div><blockquote>
<p><strong>원문 링크:</strong> <a href="https://peps.python.org/pep-0721/">PEP 721 - Using tarfile.data_filter for source distribution extraction</a></p>
<p><strong>상태:</strong> Final | <strong>유형:</strong> Standards Track | <strong>작성일:</strong> 12-Jul-2023</p>
</blockquote>
<h2>PEP 721: 소스 배포 추출을 위한 <code>tarfile.data_filter</code> 사용</h2>
<h3>개요 (Abstract)</h3>
<p>Python Source Distribution (sdist) 아카이브를 추출할 때, PEP 706에서 도입된 <code>tarfile.data_filter</code>의 사용을 명확히 하고, 이 필터를 직접 사용할 수 없는 도구들의 동작 방식을 정의합니다.</p>
<h3>동기 (Motivation)</h3>
<p><code>sdist</code>는 <code>tar</code> 아카이브 형식으로 정의됩니다. <code>tar</code> 포맷은 Unix와 유사한 파일의 모든 메타데이터를 캡처하도록 설계되었는데, 이 중 일부는 소스 코드에 불필요하거나, 플랫폼에 따라 다르며, 심지어 위험할 수도 있습니다. PEP 706에서 설명했듯이, <code>tarball</code>을 추출할 때는 항상 허용되는 기능을 제한하거나, <code>tarball</code>에 대한 완전한 제어 권한을 명시적으로 부여해야 합니다.</p>
<h3>근거 (Rationale)</h3>
<p><code>sdist</code>의 경우, PEP 706에서 도입된 <code>data_filter</code>만으로도 충분합니다. 이 필터는 <code>git</code>과 <code>zip</code> (둘 다 패키징 워크플로우에서 흔히 사용됨)보다 약간 더 많은 기능을 허용합니다. 하지만 모든 도구가 <code>data_filter</code>를 사용할 수 있는 것은 아니므로, 이 PEP는 명확한 기대치를 명시합니다. 목표는 <code>pip download</code> 및 <code>setuptools.archive_util.unpack_tarfile</code>의 현재 동작이 유효하도록 하는 것이며, 너무 위험하다고 판단되는 경우는 예외로 합니다.</p>
<p><strong>Python 패치되지 않은 버전 (Unpatched versions of Python):</strong>
<code>tarfile</code> 필터가 없는 Python 버전에서 실행될 경우, 도구는 이 PEP를 무시할 수 있습니다. <code>data_filter</code> 기능은 <code>python.org</code>에서 지원하는 모든 Python 버전으로 백포트되었지만, 타사 라이브러리에서 이를 벤더링하는 것은 까다롭기 때문에 모든 도구에 강제할 수는 없습니다. 이는 보안 업데이트 유지에 대한 책임을 도구에서 사용자에게로 전환합니다.</p>
<p><strong>권한 (Permissions):</strong>
일반적인 도구(<code>git</code>, <code>zip</code>)는 Unix 권한(mode bits)을 보존하지 않습니다. 사용자에게 <code>sdist</code>에서 이러한 권한에 의존하지 말라고 알리고, 도구가 이를 비교적 자유롭게 처리하도록 허용하는 것이 합리적입니다. 유일한 예외는 실행 권한(executable permission)이며, 도구가 이를 보존할 것을 권장하지만 필수는 아닙니다. 스크립트가 일반적으로 플랫폼에 따라 다르다는 점을 감안할 때, 실행 가능 여부를 유지하는 것은 도구별 동작이라고 볼 수 있습니다. <code>git</code>은 실행 가능성을 보존하지만, <code>zip</code>은 기본적으로 이를 수행하지 않습니다.</p>
<h3>명세 (Specification)</h3>
<p>다음 내용은 PyPA(Python Packaging Authority) 소스 배포 포맷 사양에 "Source distribution archive features"라는 새로운 섹션으로 추가될 예정입니다.</p>
<p><code>tar</code> 파일을 있는 그대로 추출하는 것은 위험하며 결과가 플랫폼에 따라 다르므로, 소스 배포의 아카이브 기능은 제한됩니다.</p>
<p><strong><code>data_filter</code>를 사용하여 압축 해제 (Unpacking with the data filter):</strong>
소스 배포를 추출할 때, 도구는 <code>tarfile.data_filter</code> (예: <code>TarFile.extractall(..., filter='data')</code>)를 사용하거나, 아래 "Unpacking without the data filter" 섹션을 따라야 합니다. <code>hasattr(tarfile, 'data_filter')</code>가 없는 Python 인터프리터에서는 (PEP 706이 없는 버전), 해당 필터를 사용하는 도구는 사용자에게 경고하고 이 명세를 무시할 수 있습니다. 이 경우 사용성(예: 아카이브를 완전히 신뢰)과 보안(예: 압축 해제 거부) 간의 균형은 도구에 달려 있습니다.</p>
<p><strong><code>data_filter</code> 없이 압축 해제 (Unpacking without the data filter):</strong>
<code>data_filter</code>를 직접 사용하지 않는 도구는 (예: 하위 호환성, 추가 기능 허용 또는 Python을 사용하지 않는 경우) 다음 지침을 따라야 합니다.</p>
<p>다음 파일은 <code>sdist</code> 아카이브에서 <strong>유효하지 않습니다.</strong> 이러한 항목을 발견하면 도구는 사용자에게 알려야 하고, 항목을 압축 해제하지 <strong>않아야 하며</strong> , 실패로 중단할 수 있습니다.</p>
<ul>
<li>대상 디렉토리 외부에 배치될 파일.</li>
<li>대상 디렉토리 외부를 가리키는 링크 (심볼릭 또는 하드).</li>
<li>장치 파일 (파이프 포함).</li>
</ul>
<p>다음도 유효하지 않습니다. 도구는 위와 같이 처리할 수 있지만, 필수는 아닙니다.</p>
<ul>
<li>파일 이름이나 링크 대상에 <code>..</code> 구성 요소가 있는 파일.</li>
<li>아카이브의 일부가 아닌 파일을 가리키는 링크.</li>
</ul>
<p>도구는 아카이브의 내용을 사용하여 링크(심볼릭 또는 하드)를 일반 파일로 압축 해제할 수 있습니다.</p>
<p><code>sdist</code> 아카이브를 추출할 때:</p>
<ul>
<li>파일 이름의 선행 슬래시(<code>leading slashes</code>)는 반드시 제거되어야 합니다.</li>
<li>각 모드(Unix 권한) 비트에 대해 도구는 다음 중 하나를 수행해야 합니다.
<ul>
<li>새 파일/디렉토리에 대한 플랫폼의 기본값을 사용합니다.</li>
<li>아카이브에 따라 비트를 설정합니다.</li>
<li>실행 불가능한 파일의 경우 <code>rw-r--r--</code> (<code>0o644</code>), 실행 가능한 파일 및 디렉토리의 경우 <code>rwxr-xr-x</code> (<code>0o755</code>)에서 비트를 사용합니다.</li>
</ul>
</li>
<li><code>High mode bits</code> (<code>setuid</code>, <code>setgid</code>, <code>sticky</code>)는 반드시 지워져야 합니다.</li>
<li>사용자 실행 가능 비트(user executable bit)를 보존하는 것을 권장합니다.</li>
</ul>
<h3>하위 호환성 (Backwards Compatibility)</h3>
<p>기존 동작은 명시되지 않았으며 도구마다 다르게 처리되었습니다. 이 PEP는 기대치를 명확히 합니다. 알려진 하위 호환성 문제는 없지만, 일부 프로젝트는 보장되지 않는 세부 사항에 의존할 수 있습니다. 이 PEP는 가장 위험한 기능을 금지하고 나머지는 도구별로 처리하도록 합니다.</p>
<h3>보안 영향 (Security Implications)</h3>
<p>권장되는 <code>data_filter</code>는 일반적인 공격에 대해 안전하다고 여겨지며, 향후 결함이 발견될 경우 수정할 수 있는 단일 지점을 제공합니다. 명시된 사양은 <code>data_filter</code>의 보호 기능을 포함합니다.</p>
<h3>교육 방법 (How to Teach This)</h3>
<p>이 PEP는 패키징 도구 작성자를 대상으로 하며, PEP 문서와 업데이트된 패키징 사양으로 충분하다고 판단됩니다.</p>
<blockquote>
<p>⚠️ <strong>알림:</strong> 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.</p>
</blockquote>
</div></div><footer class="page__meta mt-8"><div class="page__taxonomy"><h4 class="text-sm font-medium text-gray-900 mb-2">태그</h4><span class="page__taxonomy-item">#<!-- -->Python</span><span class="page__taxonomy-item">#<!-- -->PEP</span><span class="page__taxonomy-item">#<!-- -->Translation</span></div></footer><section class="comments-section mt-12 pt-8 border-t border-gray-200"></section><section class="mt-12 border-t border-gray-200 pt-8"><h3 class="text-base font-semibold text-gray-900 mb-4">Python<!-- --> 의 다른글</h3><ul class="space-y-2 text-sm"><li class="text-gray-500">이전글<!-- --> <a class="text-gray-500 hover:text-gray-700 underline decoration-dotted underline-offset-4" href="/python/pep/720/">[Draft] PEP 720 - Cross-compiling Python packages</a></li><li class="text-gray-900 font-semibold">현재글 : <!-- -->[Final] PEP 721 - Using tarfile.data_filter for source distribution extraction</li><li class="text-gray-500">다음글<!-- --> <a class="text-gray-500 hover:text-gray-700 underline decoration-dotted underline-offset-4" href="/python/pep/722/">[Rejected] PEP 722 - Dependency specification for single-file scripts</a></li></ul></section></article></main></div><!--/$--></main><div id="footer" class="page__footer"><footer class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="text-center text-gray-500 text-sm"><p>© 2025 secrett2633. All rights reserved.</p></div></footer></div></div><script src="/_next/static/chunks/webpack-90b03762f46d1ba4.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/773b243a13a00265.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[5751,[],\"\"]\n6:I[9275,[],\"\"]\n8:I[1343,[],\"\"]\n9:I[9157,[\"231\",\"static/chunks/231-c27e618569e042bc.js\",\"185\",\"static/chunks/app/layout-29f3b81c3a382114.js\"],\"default\"]\na:I[231,[\"231\",\"static/chunks/231-c27e618569e042bc.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-d9dbb0d3ac265797.js\"],\"\"]\nc:I[6130,[],\"\"]\n7:[\"slug\",\"python/pep/721\",\"c\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/773b243a13a00265.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"vurCQsCzY_vgt4Jj6xcPJ\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/python/pep/721/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"python/pep/721\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"python\\\",\\\"pep\\\",\\\"721\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"python/pep/721\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",\"$L5\"],null],null]},[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$7\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"no-js\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#ffc40d\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#ffffff\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-NE2W3CFPNY\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              window.dataLayer = window.dataLayer || [];\\n              function gtag(){dataLayer.push(arguments);}\\n              gtag('js', new Date());\\n              gtag('config', 'G-NE2W3CFPNY');\\n            \"}}]]}],[\"$\",\"body\",null,{\"className\":\"__className_f367f3 layout--default\",\"children\":[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-gray-50\",\"children\":[[\"$\",\"$L9\",null,{}],[\"$\",\"main\",null,{\"className\":\"initial-content\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"min-h-screen flex items-center justify-center bg-gray-50\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-6xl font-bold text-primary-600 mb-4\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"text-2xl font-semibold text-gray-900 mb-4\",\"children\":\"페이지를 찾을 수 없습니다\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-600 mb-8\",\"children\":\"요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다.\"}],[\"$\",\"$La\",null,{\"href\":\"/\",\"className\":\"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors\",\"children\":\"홈으로 돌아가기\"}]]}]}],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"div\",null,{\"id\":\"footer\",\"className\":\"page__footer\",\"children\":[\"$\",\"footer\",null,{\"className\":\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-center text-gray-500 text-sm\",\"children\":[\"$\",\"p\",null,{\"children\":\"© 2025 secrett2633. All rights reserved.\"}]}]}]}]]}]}]]}],null],[[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center min-h-screen\",\"children\":[\"$\",\"div\",null,{\"className\":\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"}]}],[],[]]],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"f:I[646,[\"231\",\"static/chunks/231-c27e618569e042bc.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-d9dbb0d3ac265797.js\"],\"default\"]\ne:T1e26,"])</script><script>self.__next_f.push([1,"\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e원문 링크:\u003c/strong\u003e \u003ca href=\"https://peps.python.org/pep-0721/\"\u003ePEP 721 - Using tarfile.data_filter for source distribution extraction\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e상태:\u003c/strong\u003e Final | \u003cstrong\u003e유형:\u003c/strong\u003e Standards Track | \u003cstrong\u003e작성일:\u003c/strong\u003e 12-Jul-2023\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003ePEP 721: 소스 배포 추출을 위한 \u003ccode\u003etarfile.data_filter\u003c/code\u003e 사용\u003c/h2\u003e\n\u003ch3\u003e개요 (Abstract)\u003c/h3\u003e\n\u003cp\u003ePython Source Distribution (sdist) 아카이브를 추출할 때, PEP 706에서 도입된 \u003ccode\u003etarfile.data_filter\u003c/code\u003e의 사용을 명확히 하고, 이 필터를 직접 사용할 수 없는 도구들의 동작 방식을 정의합니다.\u003c/p\u003e\n\u003ch3\u003e동기 (Motivation)\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003esdist\u003c/code\u003e는 \u003ccode\u003etar\u003c/code\u003e 아카이브 형식으로 정의됩니다. \u003ccode\u003etar\u003c/code\u003e 포맷은 Unix와 유사한 파일의 모든 메타데이터를 캡처하도록 설계되었는데, 이 중 일부는 소스 코드에 불필요하거나, 플랫폼에 따라 다르며, 심지어 위험할 수도 있습니다. PEP 706에서 설명했듯이, \u003ccode\u003etarball\u003c/code\u003e을 추출할 때는 항상 허용되는 기능을 제한하거나, \u003ccode\u003etarball\u003c/code\u003e에 대한 완전한 제어 권한을 명시적으로 부여해야 합니다.\u003c/p\u003e\n\u003ch3\u003e근거 (Rationale)\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003esdist\u003c/code\u003e의 경우, PEP 706에서 도입된 \u003ccode\u003edata_filter\u003c/code\u003e만으로도 충분합니다. 이 필터는 \u003ccode\u003egit\u003c/code\u003e과 \u003ccode\u003ezip\u003c/code\u003e (둘 다 패키징 워크플로우에서 흔히 사용됨)보다 약간 더 많은 기능을 허용합니다. 하지만 모든 도구가 \u003ccode\u003edata_filter\u003c/code\u003e를 사용할 수 있는 것은 아니므로, 이 PEP는 명확한 기대치를 명시합니다. 목표는 \u003ccode\u003epip download\u003c/code\u003e 및 \u003ccode\u003esetuptools.archive_util.unpack_tarfile\u003c/code\u003e의 현재 동작이 유효하도록 하는 것이며, 너무 위험하다고 판단되는 경우는 예외로 합니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ePython 패치되지 않은 버전 (Unpatched versions of Python):\u003c/strong\u003e\n\u003ccode\u003etarfile\u003c/code\u003e 필터가 없는 Python 버전에서 실행될 경우, 도구는 이 PEP를 무시할 수 있습니다. \u003ccode\u003edata_filter\u003c/code\u003e 기능은 \u003ccode\u003epython.org\u003c/code\u003e에서 지원하는 모든 Python 버전으로 백포트되었지만, 타사 라이브러리에서 이를 벤더링하는 것은 까다롭기 때문에 모든 도구에 강제할 수는 없습니다. 이는 보안 업데이트 유지에 대한 책임을 도구에서 사용자에게로 전환합니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e권한 (Permissions):\u003c/strong\u003e\n일반적인 도구(\u003ccode\u003egit\u003c/code\u003e, \u003ccode\u003ezip\u003c/code\u003e)는 Unix 권한(mode bits)을 보존하지 않습니다. 사용자에게 \u003ccode\u003esdist\u003c/code\u003e에서 이러한 권한에 의존하지 말라고 알리고, 도구가 이를 비교적 자유롭게 처리하도록 허용하는 것이 합리적입니다. 유일한 예외는 실행 권한(executable permission)이며, 도구가 이를 보존할 것을 권장하지만 필수는 아닙니다. 스크립트가 일반적으로 플랫폼에 따라 다르다는 점을 감안할 때, 실행 가능 여부를 유지하는 것은 도구별 동작이라고 볼 수 있습니다. \u003ccode\u003egit\u003c/code\u003e은 실행 가능성을 보존하지만, \u003ccode\u003ezip\u003c/code\u003e은 기본적으로 이를 수행하지 않습니다.\u003c/p\u003e\n\u003ch3\u003e명세 (Specification)\u003c/h3\u003e\n\u003cp\u003e다음 내용은 PyPA(Python Packaging Authority) 소스 배포 포맷 사양에 \"Source distribution archive features\"라는 새로운 섹션으로 추가될 예정입니다.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003etar\u003c/code\u003e 파일을 있는 그대로 추출하는 것은 위험하며 결과가 플랫폼에 따라 다르므로, 소스 배포의 아카이브 기능은 제한됩니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003edata_filter\u003c/code\u003e를 사용하여 압축 해제 (Unpacking with the data filter):\u003c/strong\u003e\n소스 배포를 추출할 때, 도구는 \u003ccode\u003etarfile.data_filter\u003c/code\u003e (예: \u003ccode\u003eTarFile.extractall(..., filter='data')\u003c/code\u003e)를 사용하거나, 아래 \"Unpacking without the data filter\" 섹션을 따라야 합니다. \u003ccode\u003ehasattr(tarfile, 'data_filter')\u003c/code\u003e가 없는 Python 인터프리터에서는 (PEP 706이 없는 버전), 해당 필터를 사용하는 도구는 사용자에게 경고하고 이 명세를 무시할 수 있습니다. 이 경우 사용성(예: 아카이브를 완전히 신뢰)과 보안(예: 압축 해제 거부) 간의 균형은 도구에 달려 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003edata_filter\u003c/code\u003e 없이 압축 해제 (Unpacking without the data filter):\u003c/strong\u003e\n\u003ccode\u003edata_filter\u003c/code\u003e를 직접 사용하지 않는 도구는 (예: 하위 호환성, 추가 기능 허용 또는 Python을 사용하지 않는 경우) 다음 지침을 따라야 합니다.\u003c/p\u003e\n\u003cp\u003e다음 파일은 \u003ccode\u003esdist\u003c/code\u003e 아카이브에서 \u003cstrong\u003e유효하지 않습니다.\u003c/strong\u003e 이러한 항목을 발견하면 도구는 사용자에게 알려야 하고, 항목을 압축 해제하지 \u003cstrong\u003e않아야 하며\u003c/strong\u003e , 실패로 중단할 수 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e대상 디렉토리 외부에 배치될 파일.\u003c/li\u003e\n\u003cli\u003e대상 디렉토리 외부를 가리키는 링크 (심볼릭 또는 하드).\u003c/li\u003e\n\u003cli\u003e장치 파일 (파이프 포함).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e다음도 유효하지 않습니다. 도구는 위와 같이 처리할 수 있지만, 필수는 아닙니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e파일 이름이나 링크 대상에 \u003ccode\u003e..\u003c/code\u003e 구성 요소가 있는 파일.\u003c/li\u003e\n\u003cli\u003e아카이브의 일부가 아닌 파일을 가리키는 링크.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e도구는 아카이브의 내용을 사용하여 링크(심볼릭 또는 하드)를 일반 파일로 압축 해제할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esdist\u003c/code\u003e 아카이브를 추출할 때:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e파일 이름의 선행 슬래시(\u003ccode\u003eleading slashes\u003c/code\u003e)는 반드시 제거되어야 합니다.\u003c/li\u003e\n\u003cli\u003e각 모드(Unix 권한) 비트에 대해 도구는 다음 중 하나를 수행해야 합니다.\n\u003cul\u003e\n\u003cli\u003e새 파일/디렉토리에 대한 플랫폼의 기본값을 사용합니다.\u003c/li\u003e\n\u003cli\u003e아카이브에 따라 비트를 설정합니다.\u003c/li\u003e\n\u003cli\u003e실행 불가능한 파일의 경우 \u003ccode\u003erw-r--r--\u003c/code\u003e (\u003ccode\u003e0o644\u003c/code\u003e), 실행 가능한 파일 및 디렉토리의 경우 \u003ccode\u003erwxr-xr-x\u003c/code\u003e (\u003ccode\u003e0o755\u003c/code\u003e)에서 비트를 사용합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eHigh mode bits\u003c/code\u003e (\u003ccode\u003esetuid\u003c/code\u003e, \u003ccode\u003esetgid\u003c/code\u003e, \u003ccode\u003esticky\u003c/code\u003e)는 반드시 지워져야 합니다.\u003c/li\u003e\n\u003cli\u003e사용자 실행 가능 비트(user executable bit)를 보존하는 것을 권장합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e하위 호환성 (Backwards Compatibility)\u003c/h3\u003e\n\u003cp\u003e기존 동작은 명시되지 않았으며 도구마다 다르게 처리되었습니다. 이 PEP는 기대치를 명확히 합니다. 알려진 하위 호환성 문제는 없지만, 일부 프로젝트는 보장되지 않는 세부 사항에 의존할 수 있습니다. 이 PEP는 가장 위험한 기능을 금지하고 나머지는 도구별로 처리하도록 합니다.\u003c/p\u003e\n\u003ch3\u003e보안 영향 (Security Implications)\u003c/h3\u003e\n\u003cp\u003e권장되는 \u003ccode\u003edata_filter\u003c/code\u003e는 일반적인 공격에 대해 안전하다고 여겨지며, 향후 결함이 발견될 경우 수정할 수 있는 단일 지점을 제공합니다. 명시된 사양은 \u003ccode\u003edata_filter\u003c/code\u003e의 보호 기능을 포함합니다.\u003c/p\u003e\n\u003ch3\u003e교육 방법 (How to Teach This)\u003c/h3\u003e\n\u003cp\u003e이 PEP는 패키징 도구 작성자를 대상으로 하며, PEP 문서와 업데이트된 패키징 사양으로 충분하다고 판단됩니다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e⚠️ \u003cstrong\u003e알림:\u003c/strong\u003e 이 문서는 AI를 활용하여 번역되었으며, 기술적 정확성을 보장하지 않습니다. 정확한 내용은 반드시 원문을 확인하시기 바랍니다.\u003c/p\u003e\n\u003c/blockquote\u003e\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"flex flex-col lg:flex-row gap-8\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"lg:w-64 xl:w-72 order-1 lg:order-none\",\"children\":[\"$\",\"div\",null,{\"className\":\"sidebar sticky\",\"children\":[\"$\",\"nav\",null,{\"className\":\"space-y-4\",\"children\":[[\"$\",\"div\",\"Backend\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"Backend\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Django\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/backend/django/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Django\",\" (\",6,\")\"]}]}],[\"$\",\"li\",\"Logging\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/backend/logging/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Logging\",\" (\",1,\")\"]}]}]]}]]}],[\"$\",\"div\",\"Python\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"Python\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"PEP\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/python/pep/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"PEP\",\" (\",650,\")\"]}]}]]}]]}],[\"$\",\"div\",\"AI/ML\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"AI/ML\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"LLM\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ai/llm/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"LLM\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Review\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ai/review/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Review\",\" (\",2279,\")\"]}]}]]}]]}],[\"$\",\"div\",\"DevOps\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"DevOps\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Nginx\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/nginx/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Nginx\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Docker\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/docker/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Docker\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"SafeLine\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/safeline/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"SafeLine\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"Jenkins\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/jenkins/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Jenkins\",\" (\",3,\")\"]}]}],[\"$\",\"li\",\"GitHub Actions\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/github-actions/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"GitHub Actions\",\" (\",1,\")\"]}]}],[\"$\",\"li\",\"AWS\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/devops/aws/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"AWS\",\" (\",1,\")\"]}]}]]}]]}],[\"$\",\"div\",\"etc\",{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-medium text-gray-900 mb-2\",\"children\":\"etc\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1 ml-4\",\"children\":[[\"$\",\"li\",\"Me\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/etc/me/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Me\",\" (\",3,\")\"]}]}],[\"$\",\"li\",\"Chrome Extension\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/etc/chrome-extension/\",\"className\":\"text-sm text-gray-600 hover:text-primary-600 block py-1\",\"children\":[\"Chrome Extension\",\" (\",1,\")\"]}]}]]}]]}]]}]}]}],[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"article\",null,{\"className\":\"page\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"page__title\",\"children\":\"[Final] PEP 721 - Using tarfile.data_filter for source distribution extraction\"}],[\"$\",\"div\",null,{\"className\":\"page__meta\",\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2025-09-27 13:15:15+0900\",\"children\":\"2025년 9월 27일\"}],[\"$\",\"span\",null,{\"className\":\"ml-4\",\"children\":[\"수정: \",\"2025년 9월 27일\"]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"page__content\",\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]}],[\"$\",\"footer\",null,{\"className\":\"page__meta mt-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"page__taxonomy\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"text-sm font-medium text-gray-900 mb-2\",\"children\":\"태그\"}],[[\"$\",\"span\",\"Python\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"Python\"]}],[\"$\",\"span\",\"PEP\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"PEP\"]}],[\"$\",\"span\",\"Translation\",{\"className\":\"page__taxonomy-item\",\"children\":[\"#\",\"Translation\"]}]]]}]}],[\"$\",\"$Lf\",null,{\"postPermalink\":\"/python/pep/721/\",\"postId\":\"2025-09-27-pep-0721-using-tarfile-data-filter-for-source-distribution-extraction\"}],[\"$\",\"section\",null,{\"className\":\"mt-12 border-t border-gray-200 pt-8\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-base font-semibold text-gray-900 mb-4\",\"children\":[\"Python\",\" 의 다른글\"]}],[\"$\",\"ul\",null,{\"className\":\"space-y-2 text-sm\",\"children\":[[\"$\",\"li\",null,{\"className\":\"text-gray-500\",\"children\":[\"이전글\",\" \",[\"$\",\"$La\",null,{\"href\":\"/python/pep/720/\",\"className\":\"text-gray-500 hover:text-gray-700 underline decoration-dotted underline-offset-4\",\"children\":\"[Draft] PEP 720 - Cross-compiling Python packages\"}]]}],[\"$\",\"li\",null,{\"className\":\"text-gray-900 font-semibold\",\"children\":[\"현재글 : \",\"[Final] PEP 721 - Using tarfile.data_filter for source distribution extraction\"]}],[\"$\",\"li\",null,{\"className\":\"text-gray-500\",\"children\":[\"다음글\",\" \",[\"$\",\"$La\",null,{\"href\":\"/python/pep/722/\",\"className\":\"text-gray-500 hover:text-gray-700 underline decoration-dotted underline-offset-4\",\"children\":\"[Rejected] PEP 722 - Dependency specification for single-file scripts\"}]]}]]}]]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"meta\",\"4\",{\"name\":\"author\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"5\",{\"name\":\"keywords\",\"content\":\"Django, Python, DevOps, AI, ML, 블로그, 기술\"}],[\"$\",\"meta\",\"6\",{\"name\":\"creator\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"7\",{\"name\":\"publisher\",\"content\":\"secrett2633\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"9\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"10\",{\"rel\":\"canonical\",\"href\":\"https://blog.secrett2633.cloud/\"}],[\"$\",\"meta\",\"11\",{\"name\":\"format-detection\",\"content\":\"telephone=no, address=no, email=no\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:title\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:url\",\"content\":\"https://blog.secrett2633.cloud/\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:site_name\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:locale\",\"content\":\"ko_KR\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:title\",\"content\":\"secrett2633's blog\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:description\",\"content\":\"기술 블로그 - Django, Python, DevOps, AI/ML 관련 포스트\"}],[\"$\",\"link\",\"21\",{\"rel\":\"icon\",\"href\":\"/icon.ico?6d9f34d4948640b8\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"22\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>